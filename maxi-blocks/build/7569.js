"use strict";(self.webpackChunkmaxi_blocks=self.webpackChunkmaxi_blocks||[]).push([[7569],{77569:function(e,t,n){n.r(t);var o=n(51609),r=n(27723),s=n(29491),a=n(47143),l=n(86087),c=n(66087),u=n(32485),i=n.n(u),m=n(26287),p=n(82724),h=n(46416),b=n(70417),g=n(97397);const f=(0,m.Ay)((()=>Promise.resolve().then(n.bind(n,2114)))),d=(0,m.Ay)((()=>Promise.resolve().then(n.bind(n,68145)))),E=(0,m.Ay)((()=>Promise.resolve().then(n.bind(n,98279)))),k=e=>{const{clientId:t,onChange:n,breakpoint:u,repeaterStatus:m,repeaterRowClientId:N,getInnerBlocksPositions:w,toolbar:_=!1}=e,[v,C]=(0,l.useState)((0,c.isNil)(e["row-pattern-general"])?1:(0,p.pw)(e["row-pattern-general"])),[y,I]=(0,l.useState)([]),M=(0,s.useInstanceId)(k);(0,l.useEffect)((()=>{const e=m&&t===N;I(_?(0,p.yv)(e):(0,p.yv)(e,u,v))}),[u,v]),(0,l.useEffect)((()=>{e["row-pattern-general"]&&C((0,p.pw)(e["row-pattern-general"]))}),[u,e["row-pattern-general"]]);const A=()=>{const e=[],{getBlock:n}=(0,a.select)("core/block-editor");return n(t).innerBlocks.forEach((t=>{e.push((0,h.qw)({target:"column-size",breakpoint:u,attributes:t.attributes}))})),e},P=e=>{const t=[],n=(e=>{const t=[];let n=0,o=0,r=1;return e.forEach((e=>{n+=e,o+=1,t.push({rowNumber:r}),Math.round(100*n+Number.EPSILON)/100==1&&(t.forEach((e=>{e.columnsNumber||(e.columnsNumber=o)})),r+=1,n=0,o=0)})),t})(e);return e.forEach(((o,r)=>{n[r].columnsNumber>1&&t.push(100*e[r]),1===n[r].columnsNumber&&t.push(100)})),t},S=i()("components-column-pattern__template-button",_&&"components-column-pattern__template-button--toolbar");return(0,o.createElement)("div",{className:"components-column-pattern"},!_&&"general"===u&&(0,o.createElement)(f,{label:(0,r.__)("Number of columns","maxi-blocks"),value:v,defaultValue:v,onChangeValue:e=>C(e),min:1,maxRange:8,disableReset:!0}),(0,o.createElement)("div",{className:"components-column-pattern__templates"},y.map((r=>r.isMoreThanEightColumns&&"general"!==u?null:(0,o.createElement)(d,{key:(0,c.uniqueId)(`components-column-pattern--${M}--`),className:S+(r.isMoreThanEightColumns?" components-column-pattern-apply_settings":""),"aria-pressed":(0,c.isEqual)(A(),(r.isMoreThanEightColumns?Array(v).fill(100/v):P(r.sizes)).map((e=>(0,c.floor)(e,2)))),onClick:()=>{(0,p.Is)(r.name,t,u,v,m);const o=(0,h.ul)({target:"row-pattern",props:e,breakpoint:u}),s=r.isMoreThanEightColumns?v.toString():r.name;if(m){var l,c;const e=w();if((null!==(l=(0,p.W9)(o)?.sizes.length)&&void 0!==l?l:Number(o))<(null!==(c=(0,p.W9)(s)?.sizes.length)&&void 0!==c?c:Number(s))&&t===N)(0,b.Jw)(N,e);else if(t!==N){e[(0,g.hV)(t,e)].forEach((e=>{e!==t&&(0,p.Is)(s,e,u,v,m,m)}));const{__unstableMarkNextChangeAsNotPersistent:n}=(0,a.dispatch)("core/block-editor");n()}}n({[(0,h.Ku)("row-pattern",!1,null,u)]:s})}},r.isMoreThanEightColumns?"Apply Setting":(0,o.createElement)(E,{className:"components-column-pattern__icon",icon:r.icon}))))))};t.default=k}}]);