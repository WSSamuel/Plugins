"use strict";(self.webpackChunkmaxi_blocks=self.webpackChunkmaxi_blocks||[]).push([[8194],{78194:function(e,t,a){a.r(t),a.d(t,{default:function(){return $}});var o=a(51609),n=a(27723),l=a(56427),c=a(47143),s=a(68145),i=a(98279),r=a(51219),m=a(86087),p=a(55590),b=a(66087),_=e=>{const{tab:t,label:a,organizedAttributes:n,currentOrganizedAttributes:l,specialPaste:c,handleSpecialPaste:s}=e,[i,r]=(0,m.useState)(!1),p=(0,b.kebabCase)(a);return(0,o.createElement)(o.Fragment,null,(0,o.createElement)("div",{className:"toolbar-item__copy-paste__popover__item toolbar-item__copy-paste__popover__item__group",onClick:e=>{"INPUT"!==e.target.nodeName&&r(!i)}},(0,o.createElement)("input",{type:"checkbox",name:p,id:p,checked:((e,t,a)=>{const o=Object.keys(t).length-1;return e.filter((e=>Object.keys(e).includes(a))).length===o})(c[t],n[t][a],a),onChange:e=>((e,t,a)=>{s({attr:Object.keys((0,b.omit)(n[t][e],"group")),tab:t,group:e,checked:a})})(a,t,e.target.checked)}),(0,o.createElement)("span",{onClick:e=>e.preventDefault()},(0,o.createElement)("label",{htmlFor:p},a)),(0,o.createElement)("span",{onClick:e=>r(!i),"aria-expanded":i,className:"copy-paste__group-icon"})),i&&Object.keys(n[t][a]).map((e=>{const i=(0,b.kebabCase)(e===a?`${a}-nested`:e);return!(0,b.isEqual)(l[t][a][e],n[t][a][e])&&(0,o.createElement)("div",{className:"toolbar-item__copy-paste__popover__item",key:`copy-paste-${t}-${i}`,"data-copy_paste_group":(0,b.kebabCase)(a)},(0,o.createElement)("label",{htmlFor:i,className:"maxi-axis-control__content__item__checkbox"},(0,o.createElement)("input",{type:"checkbox",name:i,id:i,checked:!(0,b.isEmpty)(c[t].filter((t=>"object"==typeof t&&Object.values(t).includes(e)))),onChange:o=>s({attr:e,tab:t,checked:o.target.checked,group:a})}),(0,o.createElement)("span",null,e)))})))},d=a(87747),u=a(34099),k=a(82724),g=a(6852),x=a(70417),E=a(97397),h=a(2509);const y=["maxi-blocks/container-maxi","maxi-blocks/row-maxi","maxi-blocks/column-maxi","maxi-blocks/group-maxi"];var C=e=>{const{blockName:t,clientId:a,closeMoreSettings:l,copyPasteMapping:i}=e,C=(0,m.useContext)(h.A),{attributes:f,blockAttributes:v,organizedAttributes:N,currentOrganizedAttributes:S,copiedStyles:O,copiedBlocks:B,innerBlocks:I,hasInnerBlocks:j}=(0,c.useSelect)((e=>{const{receiveCopiedStyles:t,receiveCopiedBlocks:o}=e("maxiBlocks"),{getBlock:n}=e("core/block-editor"),l=t(),c=o(),s=l&&(0,u.dZ)(l,i)||{},{attributes:r,innerBlocks:m}=n(a),p=(0,u.dZ)(r,i,!0);return{attributes:r,blockAttributes:p,organizedAttributes:s,currentOrganizedAttributes:(0,u.dZ)(p,i),copiedStyles:l,copiedBlocks:c,innerBlocks:m,hasInnerBlocks:!(0,b.isEmpty)(m)}})),A=e=>Object.keys(e).reduce(((e,t)=>(e[t]=[],e)),{}),[P,w]=(0,m.useState)(A(N)),{copyStyles:T,copyNestedBlocks:R}=(0,c.useDispatch)("maxiBlocks"),{updateBlockAttributes:z,replaceInnerBlocks:D}=(0,c.useDispatch)("core/block-editor"),M=e=>{if("maxi-blocks/row-maxi"===t&&Object.entries(e).forEach((([e,t])=>{e.includes("row-pattern-")&&t!==f[e]&&(0,k.Is)(t,a,e.replace("row-pattern-",""))})),e["background-layers"]){const t=(0,g.Xr)(e["background-layers"],f.uniqueID);t&&(e["background-layers"]=t)}},$=()=>{if(!C?.repeaterStatus)return;const{getBlock:e}=(0,c.select)("core/block-editor"),t=C?.getInnerBlocksPositions(),o=(0,E.S0)(a,(0,E.tR)(a,t[[-1]])),n=t[o].findIndex((e=>e===a));t[o].forEach((a=>(0,x.ke)(e(a),(0,E.tR)(a,t[[-1]]),t,n)))},q=({attr:e,tab:t,checked:a,group:o})=>{const n=Object.assign({},P);(0,b.isArray)(e)?(n[t]=n[t].filter((e=>!(0,b.isObject)(e)||(0,b.isObject)(e)&&!Object.keys(e).includes(o))),e.forEach((e=>{a&&(n[t]=[].concat(n[t],[{[o]:e}]))}))):n[t]=o?a?[].concat(n[t],[{[o]:e}]):n[t].filter((t=>!(0,b.isObject)(t)||(0,b.isObject)(t)&&!Object.values(t).includes(e))):P[t].includes(e)?n[t].filter((t=>t!==e)):[].concat(n[t],[e]),w(n)},F=()=>{let e={};Object.entries(P).forEach((([t,a])=>{a.forEach((a=>{e=Object.assign({},e,(0,b.isString)(a)?N[t][a]:N[t][Object.keys(a)[0]][Object.values(a)[0]])}))})),w(A(N)),l(),M(e),z(a,e),$()},W=()=>{const e=[];return Object.entries(N).forEach((([t,a])=>{const l={label:(0,n.__)((0,b.capitalize)(t),"maxi-blocks"),content:!(0,b.isEmpty)(N[t])&&!(0,b.isEqual)(S[t],a)&&Object.entries(a).map((([e,a])=>{const n=(0,b.kebabCase)(e);return a.group||(0,b.isEqual)(S[t][e],a)?!(0,b.isEqual)(S[t][e],a)&&(0,o.createElement)(_,{key:`copy-paste-group-${t}-${e}`,tab:t,label:e,organizedAttributes:N,currentOrganizedAttributes:S,specialPaste:P,handleSpecialPaste:q}):(0,o.createElement)("div",{className:"toolbar-item__copy-paste__popover__item",key:`copy-paste-${t}-${n}`},(0,o.createElement)("label",{htmlFor:n,className:"maxi-axis-control__content__item__checkbox"},(0,o.createElement)("input",{type:"checkbox",name:n,id:n,checked:P[t].includes(e),onChange:()=>q({attr:e,tab:t})}),(0,o.createElement)("span",null,e)))}))};l.content&&e.push(l)})),e};return(0,o.createElement)("div",{className:"toolbar-item__copy-paste__popover"},(0,o.createElement)(s.default,{className:"toolbar-item__copy-paste__popover__button",onClick:()=>{l(),T(v)}},(0,n.__)("Copy styles - all","maxi-blocks")),(0,o.createElement)(s.default,{className:"toolbar-item__copy-paste__popover__button",onClick:()=>{const e=(0,u.A5)(O,f,i);l(),M(e),z(a,e),$()},disabled:(0,b.isEmpty)(O)},(0,n.__)("Paste styles - all","maxi-blocks")),!(0,b.isEmpty)(O)&&!(0,b.isEqual)(S,N)&&(0,o.createElement)(r.default,{className:"maxi-copypaste__copy-selector",contentClassName:"maxi-more-settings__popover maxi-dropdown__child-content maxi-copy-paste__popover",position:"right bottom",renderToggle:({onToggle:e})=>(0,o.createElement)(s.default,{className:"toolbar-item__copy-paste__popover__button",onClick:e},(0,n.__)("Paste special - select","maxi-blocks")),renderContent:()=>(0,o.createElement)("form",null,(0,o.createElement)(p.Ev,{target:"sidebar-settings-tabs",disablePadding:!0,items:W()}),(0,o.createElement)(s.default,{className:"toolbar-item__copy-paste__popover__button toolbar-item__copy-paste__popover__button--special",onClick:F},(0,n.__)("Paste special style","maxi-blocks")))}),j&&(0,o.createElement)(s.default,{className:"toolbar-item__copy-paste__popover__button toolbar-item__copy-nested-block__popover__button",onClick:()=>{R(I),l()}},(0,n.__)("Copy nested blocks","maxi-blocks")),y.includes(t)&&(0,o.createElement)(s.default,{className:"toolbar-item__copy-paste__popover__button",onClick:()=>{const e=(0,u.CY)(B);if(C?.repeaterStatus||D(a,e),C?.repeaterStatus){const o={name:t,clientId:a,innerBlocks:I},n=Object.assign({},o,{innerBlocks:e});(0,d.ng)((e=>{const t=(0,E.S0)(e.clientId,o),a=(0,E.FB)(t,n);a&&e.name===a.name&&(a.clientId=e.clientId)}),!1,I),D(a,e);const l=C?.getInnerBlocksPositions();(0,x.Jw)(C?.repeaterRowClientId,l,null,(0,E.tR)(a,l[[-1]]).clientId)}l()},disabled:(0,b.isEmpty)(B)},(0,n.__)("Paste nested blocks","maxi-blocks")))},f=a(40730),v=a(28557),N=e=>{const{clientId:t}=e,[a,l]=(0,m.useState)(""),{__experimentalConvertBlocksToReusable:i}=(0,c.useDispatch)(f.store),p=(0,m.useCallback)((async function(e){try{await i(t,e)}catch(e){console.error(e.message)}}),[t]);return(0,o.createElement)(r.default,{className:"maxi-reusableblocks__blocks-selector",contentClassName:"maxi-more-settings__popover maxi-dropdown__child-content maxi-dropdown__reusable-content",position:"right top",renderToggle:({isOpen:e,onToggle:t})=>(0,o.createElement)(s.default,{onClick:t,text:"Copy"},(0,n.__)("Add to reusable blocks","maxi-blocks")),renderContent:()=>(0,o.createElement)("form",{onSubmit:e=>{e.preventDefault(),p(a),l("")}},(0,o.createElement)(v.default,{placeholder:(0,n.__)("Reusable block name","maxi-blocks"),label:(0,n.__)("Create reusable block","maxi-blocks"),value:a,onChange:l}),(0,o.createElement)(s.default,{type:"submit"},(0,n.__)("Save","maxi-blocks")))})},S=a(15369),O=e=>{const{clientId:t,blockName:a,tooltipsHide:i}=e;if("maxi-blocks/column-maxi"===a)return null;const{getBlock:r}=(0,c.select)("core/block-editor"),m=r(t),{innerBlocks:p,attributes:b}=m,{uniqueID:_}=b,{removeBlock:d}=(0,c.useDispatch)("core/block-editor"),u=()=>(0,o.createElement)("div",{className:"toolbar-item toolbar-item__delete"},(0,o.createElement)(s.default,{onClick:()=>{d(t),(0,S.A)(_,p)}},(0,n.__)("Remove block","maxi-blocks"),(0,o.createElement)("span",null,"Shift+Alt+Z")));return i?u():(0,o.createElement)(l.Tooltip,{text:(0,n.__)("Delete","maxi-blocks"),placement:"top"},u())},B=a(55315),I=a(46416),j=a(2521);const A=["maxi-blocks/button-maxi","maxi-blocks/svg-icon-maxi","maxi-blocks/image-maxi"],P=["maxi-blocks/text-maxi","maxi-blocks/list-item-maxi"];var w=e=>{const{blockName:t,onChange:a,breakpoint:l,isCaptionToolbar:c=!1}=e;if(!A.includes(t)&&!c)return null;const m=P.includes(t)||c;return(0,o.createElement)(r.default,{className:"toolbar-item__alignment",contentClassName:"maxi-dropdown__child-content maxi-dropdown__alignment-content",position:"bottom right",renderToggle:({isOpen:e,onToggle:t})=>(0,o.createElement)(s.default,{onClick:t,text:"Copy"},m?(0,o.createElement)(i.default,{className:"toolbar-item__icon toolbar-item__icon__alignment",icon:j.HuA}):(0,o.createElement)(o.Fragment,null,(0,n.__)("Align","maxi-blocks"))),renderContent:()=>(0,o.createElement)(B.default,Object.assign({},(0,I.XW)(e,m?"textAlignment":"alignment"),{onChange:a,disableJustify:!m,disableIcon:!0,disableRTC:!0,breakpoint:l,type:m&&"text"}))})},T=a(2114),R=a(86329),z=a(2720),D=e=>{const{onChange:t,closeMoreSettings:a}=e,{content:l}=(0,m.useContext)(R.hE),[c,i]=(0,m.useState)(10),[p,b]=(0,m.useState)(15);return(0,o.createElement)(r.default,{className:"maxi-text-generator__generator",contentClassName:"maxi-more-settings__popover maxi-dropdown__child-content maxi-dropdown__text-generator-child-content",position:"right top",renderToggle:({isOpen:e,onToggle:t})=>(0,o.createElement)(s.default,{onClick:t,text:"Copy"},(0,n.__)("Placeholder text generator","maxi-blocks")),renderContent:()=>(0,o.createElement)("div",{className:"toolbar-item__text-generator-blocks__popover"},(0,o.createElement)(T.default,{disableRange:!0,disableReset:!0,label:(0,n.__)("Words per sentence","maxi-blocks"),value:p,onChangeValue:e=>{b(e)},min:0,max:100}),(0,o.createElement)(T.default,{disableRange:!0,disableReset:!0,label:(0,n.__)("Sentences","maxi-blocks"),value:c,onChangeValue:e=>{i(e)},min:0,max:20}),(0,o.createElement)(s.default,{type:"button",onClick:()=>{((e,o)=>{const n=(0,z.E5)({p:1,avgWordsPerSentence:o,avgSentencesPerParagraph:e}).map((e=>e)),c=`${l}${n[0].props.children}`;c.length,c.length,t({isList:!1,content:c}),a()})(c,p)}},(0,n.__)("Add","maxi-blocks")),(0,o.createElement)(s.default,{type:"button",onClick:()=>((e,o)=>{const n=(0,z.E5)({p:1,avgWordsPerSentence:o,avgSentencesPerParagraph:e}).map((e=>e)),l=n[0].props.children;l.length,l.length,t({isList:!1,content:n[0].props.children}),a()})(c,p)},(0,n.__)("Replace","maxi-blocks")))})},M=a(20436),$=e=>{const{clientId:t,blockName:a,onChange:m,copyPasteMapping:p,tooltipsHide:b}=e,{breakpoint:_}=(0,c.useSelect)((e=>{const{receiveMaxiDeviceType:t}=e("maxiBlocks");return{breakpoint:t()}})),d=(0,o.createElement)("div",{className:"toolbar-item toolbar-item__more-settings"},(0,o.createElement)(r.default,{className:"maxi-more-settings__settings-selector",contentClassName:"maxi-more-settings__popover",position:"right bottom",popoverProps:{useShift:!0},renderToggle:({onToggle:e})=>(0,o.createElement)(s.default,{onClick:e},(0,o.createElement)(i.default,{className:"toolbar-item__icon",icon:j.E1o})),renderContent:l=>(0,o.createElement)("div",null,(0,o.createElement)(C,{blockName:a,clientId:t,closeMoreSettings:l.onClose,copyPasteMapping:p}),["maxi-blocks/text-maxi","maxi-blocks/list-item-maxi"].includes(a)&&(0,o.createElement)(D,{onChange:m,closeMoreSettings:l.onClose}),"maxi-blocks/button-maxi"===a&&(0,o.createElement)("div",null,(0,o.createElement)(s.default,{onClick:()=>{(0,M.z4)(0,"height width")}},(0,n.__)("Button width","maxi-blocks")),(0,o.createElement)(s.default,{onClick:()=>{(0,M.z4)(0,"margin padding")}},(0,n.__)("Button padding/margin","maxi-blocks")),(0,o.createElement)(w,Object.assign({clientId:t,blockName:a,getGroupAttributes:!0},(0,I.XW)(e,["alignment","textAlignment"]),{onChange:m,breakpoint:_}))),"maxi-blocks/image-maxi"===a&&(0,o.createElement)(s.default,{onClick:()=>{(0,M.z4)(0,"caption")}},(0,n.__)("Caption","maxi-blocks")),("maxi-blocks/svg-icon-maxi"===a||"maxi-blocks/image-maxi"===a)&&(0,o.createElement)(w,Object.assign({clientId:t,blockName:a,getGroupAttributes:!0},(0,I.XW)(e,["alignment","textAlignment"]),{onChange:m,breakpoint:_})),(0,o.createElement)(N,{clientId:t,blockName:a}),(0,o.createElement)(O,{clientId:t,blockName:a}))}));return b?d:(0,o.createElement)(l.Tooltip,{text:(0,n.__)("More","maxi-blocks"),placement:"top"},d)}}}]);