"use strict";(self.webpackChunkmaxi_blocks=self.webpackChunkmaxi_blocks||[]).push([[7759],{77759:function(e,t,o){o.r(t);var i=o(51609),s=o(27723),r=o(47143),n=o(74997),c=o(86087),a=o(66087),l=o(32485),p=o.n(l),m=o(26287),d=o(55590),u=o(46416),b=o(39030),k=o(87747),x=o(93788),v=o(2521);const y=(0,m.Ay)((()=>o.e(9436).then(o.bind(o,39436)))),_=({baseBreakpoint:e,icon:t,tooltipValue:o,breakpoint:r,target:n})=>{const c=e===n,a=p()("maxi-responsive-selector__button-wrapper",c&&"maxi-responsive-selector__base");return(0,i.createElement)("div",{className:a},(0,i.createElement)(d.$n,{className:"maxi-responsive-selector__button-item",onClick:()=>(0,u.GB)(c?"general":n),"aria-pressed":"general"===r?e===n:r===n},(0,i.createElement)("div",null,o&&(0,i.createElement)("div",{className:"responsive-button-tooltip"},o),t,c&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)("svg",{className:"maxi-tabs-control__notification",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 9 9"},(0,i.createElement)("path",{fill:"#ff4a17",d:"M4.5 0H9v4.5A4.5 4.5 0 0 1 4.5 9 4.5 4.5 0 0 1 0 4.5 4.5 4.5 0 0 1 4.5 0Z"})),(0,i.createElement)("div",{className:"maxi-responsive-selector__button-current-size"},(0,s.__)("Your size","maxi-blocks"))))))};t.default=e=>{const{className:t,isOpen:o,onClose:l}=e,m=(0,c.useRef)(null),{insertBlock:u}=(0,r.useDispatch)("core/block-editor"),{setMaxiDeviceType:f}=(0,r.useDispatch)("maxiBlocks"),{deviceType:E,breakpoints:g,baseBreakpoint:h,isListViewOpened:w,isInserterOpened:S}=(0,r.useSelect)((e=>{const{receiveMaxiDeviceType:t,receiveMaxiBreakpoints:o,receiveBaseBreakpoint:i}=e("maxiBlocks");let s,r;e("core/editor")?(s=e("core/editor").isListViewOpened,r=e("core/editor").isInserterOpened):e("core/edit-post")?(s=e("core/edit-post").isListViewOpened,r=e("core/edit-post").isInserterOpened):e("core/edit-site")&&(s=e("core/edit-site").isListViewOpened,r=e("core/edit-site").isInserterOpened);const n=i();return{deviceType:t(),breakpoints:o(),baseBreakpoint:n,isListViewOpened:!!s&&s(),isInserterOpened:!!r&&r()}}));(0,c.useEffect)((()=>{const e=document.querySelector(".interface-interface-skeleton__secondary-sidebar");return e&&o&&(e.style.marginTop="41px"),()=>{e&&(e.style.marginTop="0")}}),[w,S,o]),(0,c.useEffect)((()=>{[document.querySelector(".edit-post-visual-editor")||document.querySelector(".edit-site-visual-editor")||document.querySelector(".editor-visual-editor"),(0,b.fn)()].forEach((e=>{e&&!e.getAttributeNames().includes("maxi-blocks-responsive")&&e.setAttribute("maxi-blocks-responsive",h)}))})),(0,c.useEffect)((()=>{const e=document.querySelector(".is-tablet-preview"),t=document.querySelector(".is-mobile-preview");if(e||t){const o=null!=e?e:t,i=o.querySelector('iframe[name="editor-canvas"]'),s=i.contentDocument,r=s.body,n=o.closest(".edit-post-visual-editor"),c=n.getAttribute("maxi-blocks-responsive-width");if(n.getAttribute("is-maxi-preview")&&(o.style.width=`${c}px`,o.style.boxSizing="content-box"),r&&i&&!s.body.classList.contains("maxi-blocks--active")){s.body.classList.add("maxi-blocks--active"),r.setAttribute("maxi-blocks-responsive",e?"s":"xs"),s.documentElement.style.scrollbarWidth="none",(0,x.rn)((0,x.sS)(),!0,s);const t=Array.from(document.querySelectorAll("div.maxi-blocks__styles"));(0,a.isEmpty)(t)||t.forEach((e=>{const t=e.cloneNode(!0),{id:o}=t;s.querySelector(`#${o}`)?.remove(),t.children[0].innerText=t.children[0].innerText.replaceAll(" .edit-post-visual-editor",".editor-styles-wrapper"),i.contentDocument.head.appendChild(t)}));const o=document.querySelector("#maxi-blocks-sc-vars-inline-css")?.cloneNode(!0);o&&(s.querySelector("#maxi-blocks-sc-vars-inline-css")?.remove(),i.contentDocument.head.appendChild(o));const n=s.querySelector("#maxi-blocks-block-editor-css"),c=s.querySelector("#maxi-blocks-block-css");if(!n){const e=document.querySelector("#maxi-blocks-block-editor-css");i.contentDocument.head.appendChild(e.cloneNode(!0))}if(!c){const e=document.querySelector("#maxi-blocks-block-css");i.contentDocument.head.appendChild(e.cloneNode(!0))}}}}));const q=(0,c.useCallback)((e=>{e.addEventListener("click",(e=>{const{target:t}=e,o=t.innerText,i=("Desktop"===o?"general":"Tablet"===o&&"s")||"Mobile"===o&&"xs",s=document.querySelector(".edit-post-visual-editor")||document.querySelector(".edit-site-visual-editor")||document.querySelector(".editor-visual-editor");s.setAttribute("maxi-blocks-responsive",i),s.removeAttribute("maxi-blocks-responsive-width"),"Desktop"===o&&(s.style.width=""),f({deviceType:i,isGutenbergButton:!0})}))}));(0,c.useEffect)((()=>{const e=document.querySelector(".block-editor-post-preview__button-toggle");if(e){const t={attributes:!0,childList:!1,subtree:!1},o=new MutationObserver((e=>{e.forEach((e=>{if("attributes"===e.type&&"aria-expanded"===e.attributeName){const e=document.querySelector(".block-editor-post-preview__dropdown-content"),t=document.querySelector("#maxi-blocks__responsive-toolbar");e&&!t&&Array.from(e.querySelectorAll(".block-editor-post-preview__button-resize")).forEach(q)}}))}));return o.observe(e,t),()=>o.disconnect()}return()=>{}}));const B=p()("maxi-responsive-selector",t);return(0,i.createElement)("div",{className:B,style:{display:o?"flex":"none"},ref:m},(0,i.createElement)("span",{className:"maxi-responsive-selector__close",onClick:l},(0,i.createElement)(d.In,{icon:v.utg})),(0,i.createElement)(_,{icon:v.m2T,target:"xxl",breakpoint:E,baseBreakpoint:h,breakpoints:g,tooltipValue:`>${g.xl}`}),(0,i.createElement)(_,{icon:v.Q4m,target:"xl",breakpoint:E,baseBreakpoint:h,breakpoints:g,tooltipValue:g.xl}),(0,i.createElement)(_,{icon:v.HM$,target:"l",breakpoint:E,baseBreakpoint:h,breakpoints:g,tooltipValue:g.l}),(0,i.createElement)(_,{icon:v.TVK,target:"m",breakpoint:E,baseBreakpoint:h,breakpoints:g,tooltipValue:g.m}),(0,i.createElement)(_,{icon:v.PgH,target:"s",breakpoint:E,baseBreakpoint:h,breakpoints:g,tooltipValue:g.s}),(0,i.createElement)(_,{icon:v.z2Z,target:"xs",breakpoint:E,baseBreakpoint:h,breakpoints:g,tooltipValue:g.xs}),(0,i.createElement)("div",{className:"action-buttons"},(0,i.createElement)(d.$n,{className:"action-buttons__button","aria-label":(0,s.__)("Template library","maxi-blocks"),onClick:()=>(()=>{let e;const t=(0,b.H$)();if(t){const t=(0,r.select)("core/edit-site").getEditedPostId(),o=(0,r.select)("core/edit-site").getEditedPostType();"wp_template"!==o&&"wp_block"!==o&&"wp_template_part"!==o||u((0,n.createBlock)("maxi-blocks/maxi-cloud")),o&&t&&(0,k.ng)((t=>"core/post-content"===t.name&&(e=t.clientId,!0)))}!e&&t||u((0,n.createBlock)("maxi-blocks/maxi-cloud"),void 0,e)})()},(0,i.createElement)(d.In,{className:"template-library-cloud-icon",icon:v.bHI}),(0,i.createElement)("span",null,(0,s.__)("Template library","maxi-blocks")))),(0,i.createElement)(y,{ref:m}),(0,i.createElement)("a",{href:"https://maxiblocks.com/go/help-center",target:"_blank",rel:"noopener noreferrer",className:"maxi-components-button components-button action-buttons__button"},(0,i.createElement)(d.In,{className:"toolbar-item__icon",icon:v.$yR})," ",(0,s.__)("Help","maxi-blocks")))}}}]);