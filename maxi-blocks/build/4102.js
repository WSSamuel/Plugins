(self.webpackChunkmaxi_blocks=self.webpackChunkmaxi_blocks||[]).push([[4102],{72733:function(e){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function r(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},t.prototype.emit=function(e){var t,a,s,o,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(i(a=this._events[e]))return!1;if(n(a))switch(arguments.length){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),a.apply(this,o)}else if(r(a))for(o=Array.prototype.slice.call(arguments,1),s=(u=a.slice()).length,c=0;c<s;c++)u[c].apply(this,o);return!0},t.prototype.addListener=function(e,a){var s;if(!n(a))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(a.listener)?a.listener:a),this._events[e]?r(this._events[e])?this._events[e].push(a):this._events[e]=[this._events[e],a]:this._events[e]=a,r(this._events[e])&&!this._events[e].warned&&(s=i(this._maxListeners)?t.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){if(!n(t))throw TypeError("listener must be a function");var r=!1;function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},t.prototype.removeListener=function(e,t){var i,a,s,o;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(i=this._events[e]).length,a=-1,i===t||n(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(i)){for(o=s;o-- >0;)if(i[o]===t||i[o].listener&&i[o].listener===t){a=o;break}if(a<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},t.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n(r=this._events[e]))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},t.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},t.listenerCount=function(e,t){return e.listenerCount(t)}},74103:function(e,t,n){"use strict";var r=n(36571),i=n(33371),a=n(67691);function s(e,t,n){return new r(e,t,n)}s.version=n(16938),s.AlgoliaSearchHelper=r,s.SearchParameters=i,s.SearchResults=a,e.exports=s},46732:function(e,t,n){"use strict";var r=n(72733);function i(e,t){this.main=e,this.fn=t,this.lastResults=null}n(73014)(i,r),i.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},i.prototype.getModifiedState=function(e){return this.fn(e)},e.exports=i},44054:function(e,t,n){"use strict";var r=n(29110),i=n(21383),a=n(40317),s={addRefinement:function(e,t,n){if(s.isRefined(e,t,n))return e;var i=""+n,a=e[t]?e[t].concat(i):[i],o={};return o[t]=a,r({},o,e)},removeRefinement:function(e,t,n){if(void 0===n)return s.clearRefinement(e,(function(e,n){return t===n}));var r=""+n;return s.clearRefinement(e,(function(e,n){return t===n&&r===e}))},toggleRefinement:function(e,t,n){if(void 0===n)throw new Error("toggleRefinement should be used with a value");return s.isRefined(e,t,n)?s.removeRefinement(e,t,n):s.addRefinement(e,t,n)},clearRefinement:function(e,t,n){if(void 0===t)return a(e)?{}:e;if("string"==typeof t)return i(e,[t]);if("function"==typeof t){var r=!1,s=Object.keys(e).reduce((function(i,a){var s=e[a]||[],o=s.filter((function(e){return!t(e,a,n)}));return o.length!==s.length&&(r=!0),i[a]=o,i}),{});return r?s:e}},isRefined:function(e,t,n){var r=!!e[t]&&e[t].length>0;if(void 0===n||!r)return r;var i=""+n;return-1!==e[t].indexOf(i)}};e.exports=s},33371:function(e,t,n){"use strict";var r=n(44728),i=n(29110),a=n(14843),s=n(20849),o=n(17507),c=n(21383),u=n(40317),h=n(72208),l=n(44054);function f(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((function(e,n){return f(t[n],e)})):e===t}function d(e){var t=e?d._parseNumbers(e):{};void 0===t.userToken||h(t.userToken)||console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=t.facets||[],this.disjunctiveFacets=t.disjunctiveFacets||[],this.hierarchicalFacets=t.hierarchicalFacets||[],this.facetsRefinements=t.facetsRefinements||{},this.facetsExcludes=t.facetsExcludes||{},this.disjunctiveFacetsRefinements=t.disjunctiveFacetsRefinements||{},this.numericRefinements=t.numericRefinements||{},this.tagRefinements=t.tagRefinements||[],this.hierarchicalFacetsRefinements=t.hierarchicalFacetsRefinements||{};var n=this;Object.keys(t).forEach((function(e){var r=-1!==d.PARAMETERS.indexOf(e),i=void 0!==t[e];!r&&i&&(n[e]=t[e])}))}d.PARAMETERS=Object.keys(new d),d._parseNumbers=function(e){if(e instanceof d)return e;var t={};if(["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"].forEach((function(n){var r=e[n];if("string"==typeof r){var i=parseFloat(r);t[n]=isNaN(i)?r:i}})),Array.isArray(e.insideBoundingBox)&&(t.insideBoundingBox=e.insideBoundingBox.map((function(e){return Array.isArray(e)?e.map((function(e){return parseFloat(e)})):e}))),e.numericRefinements){var n={};Object.keys(e.numericRefinements).forEach((function(t){var r=e.numericRefinements[t]||{};n[t]={},Object.keys(r).forEach((function(e){var i=r[e].map((function(e){return Array.isArray(e)?e.map((function(e){return"string"==typeof e?parseFloat(e):e})):"string"==typeof e?parseFloat(e):e}));n[t][e]=i}))})),t.numericRefinements=n}return r({},e,t)},d.make=function(e){var t=new d(e);return(e.hierarchicalFacets||[]).forEach((function(e){if(e.rootPath){var n=t.getHierarchicalRefinement(e.name);n.length>0&&0!==n[0].indexOf(e.rootPath)&&(t=t.clearRefinements(e.name)),0===(n=t.getHierarchicalRefinement(e.name)).length&&(t=t.toggleHierarchicalFacetRefinement(e.name,e.rootPath))}})),t},d.validate=function(e,t){var n=t||{};return e.tagFilters&&n.tagRefinements&&n.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):e.tagRefinements.length>0&&n.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&n.numericRefinements&&u(n.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):u(e.numericRefinements)&&n.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},d.prototype={constructor:d,clearRefinements:function(e){var t={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:l.clearRefinement(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:l.clearRefinement(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:l.clearRefinement(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:l.clearRefinement(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return t.numericRefinements===this.numericRefinements&&t.facetsRefinements===this.facetsRefinements&&t.facetsExcludes===this.facetsExcludes&&t.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&t.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(t)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(e,t,n){var i=o(n);if(this.isNumericRefined(e,t,i))return this;var a=r({},this.numericRefinements);return a[e]=r({},a[e]),a[e][t]?(a[e][t]=a[e][t].slice(),a[e][t].push(i)):a[e][t]=[i],this.setQueryParameters({numericRefinements:a})},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsRefinements[e]||[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)&&this.disjunctiveFacetsRefinements[e]||[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsExcludes[e]||[]},removeNumericRefinement:function(e,t,n){return void 0!==n?this.isNumericRefined(e,t,n)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements((function(r,i){return i===e&&r.op===t&&f(r.val,o(n))}))}):this:void 0!==t?this.isNumericRefined(e,t)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements((function(n,r){return r===e&&n.op===t}))}):this:this.isNumericRefined(e)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements((function(t,n){return n===e}))}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(e){if(void 0===e)return u(this.numericRefinements)?{}:this.numericRefinements;if("string"==typeof e)return c(this.numericRefinements,[e]);if("function"==typeof e){var t=!1,n=this.numericRefinements,r=Object.keys(n).reduce((function(r,i){var a=n[i],s={};return a=a||{},Object.keys(a).forEach((function(n){var r=a[n]||[],o=[];r.forEach((function(t){e({val:t,op:n},i,"numeric")||o.push(t)})),o.length!==r.length&&(t=!0),s[n]=o})),r[i]=s,r}),{});return t?r:this.numericRefinements}},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return l.isRefined(this.facetsRefinements,e,t)?this:this.setQueryParameters({facetsRefinements:l.addRefinement(this.facetsRefinements,e,t)})},addExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return l.isRefined(this.facetsExcludes,e,t)?this:this.setQueryParameters({facetsExcludes:l.addRefinement(this.facetsExcludes,e,t)})},addDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return l.isRefined(this.disjunctiveFacetsRefinements,e,t)?this:this.setQueryParameters({disjunctiveFacetsRefinements:l.addRefinement(this.disjunctiveFacetsRefinements,e,t)})},addTagRefinement:function(e){if(this.isTagRefined(e))return this;var t={tagRefinements:this.tagRefinements.concat(e)};return this.setQueryParameters(t)},removeFacet:function(e){return this.isConjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({facets:this.facets.filter((function(t){return t!==e}))}):this},removeDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter((function(t){return t!==e}))}):this},removeHierarchicalFacet:function(e){return this.isHierarchicalFacet(e)?this.clearRefinements(e).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter((function(t){return t.name!==e}))}):this},removeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return l.isRefined(this.facetsRefinements,e,t)?this.setQueryParameters({facetsRefinements:l.removeRefinement(this.facetsRefinements,e,t)}):this},removeExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return l.isRefined(this.facetsExcludes,e,t)?this.setQueryParameters({facetsExcludes:l.removeRefinement(this.facetsExcludes,e,t)}):this},removeDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return l.isRefined(this.disjunctiveFacetsRefinements,e,t)?this.setQueryParameters({disjunctiveFacetsRefinements:l.removeRefinement(this.disjunctiveFacetsRefinements,e,t)}):this},removeTagRefinement:function(e){if(!this.isTagRefined(e))return this;var t={tagRefinements:this.tagRefinements.filter((function(t){return t!==e}))};return this.setQueryParameters(t)},toggleRefinement:function(e,t){return this.toggleFacetRefinement(e,t)},toggleFacetRefinement:function(e,t){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,t);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,t);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,t);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:l.toggleRefinement(this.facetsRefinements,e,t)})},toggleExcludeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:l.toggleRefinement(this.facetsExcludes,e,t)})},toggleDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:l.toggleRefinement(this.disjunctiveFacetsRefinements,e,t)})},toggleHierarchicalFacetRefinement:function(e,t){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),r={};return void 0!==this.hierarchicalFacetsRefinements[e]&&this.hierarchicalFacetsRefinements[e].length>0&&(this.hierarchicalFacetsRefinements[e][0]===t||0===this.hierarchicalFacetsRefinements[e][0].indexOf(t+n))?-1===t.indexOf(n)?r[e]=[]:r[e]=[t.slice(0,t.lastIndexOf(n))]:r[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:i({},r,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.");var n={};return n[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:i({},n,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(e){if(!this.isHierarchicalFacetRefined(e))return this;var t={};return t[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:i({},t,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(e){return this.disjunctiveFacets.indexOf(e)>-1},isHierarchicalFacet:function(e){return void 0!==this.getHierarchicalFacetByName(e)},isConjunctiveFacet:function(e){return this.facets.indexOf(e)>-1},isFacetRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&l.isRefined(this.facetsRefinements,e,t)},isExcludeRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&l.isRefined(this.facetsExcludes,e,t)},isDisjunctiveFacetRefined:function(e,t){return!!this.isDisjunctiveFacet(e)&&l.isRefined(this.disjunctiveFacetsRefinements,e,t)},isHierarchicalFacetRefined:function(e,t){if(!this.isHierarchicalFacet(e))return!1;var n=this.getHierarchicalRefinement(e);return t?-1!==n.indexOf(t):n.length>0},isNumericRefined:function(e,t,n){if(void 0===n&&void 0===t)return!!this.numericRefinements[e];var r=this.numericRefinements[e]&&void 0!==this.numericRefinements[e][t];if(void 0===n||!r)return r;var i,a,c=o(n),u=void 0!==(i=this.numericRefinements[e][t],a=c,s(i,(function(e){return f(e,a)})));return r&&u},isTagRefined:function(e){return-1!==this.tagRefinements.indexOf(e)},getRefinedDisjunctiveFacets:function(){var e=this,t=a(Object.keys(this.numericRefinements).filter((function(t){return Object.keys(e.numericRefinements[t]).length>0})),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter((function(t){return e.disjunctiveFacetsRefinements[t].length>0})).concat(t).concat(this.getRefinedHierarchicalFacets())},getRefinedHierarchicalFacets:function(){var e=this;return a(this.hierarchicalFacets.map((function(e){return e.name})),Object.keys(this.hierarchicalFacetsRefinements).filter((function(t){return e.hierarchicalFacetsRefinements[t].length>0})))},getUnrefinedDisjunctiveFacets:function(){var e=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter((function(t){return-1===e.indexOf(t)}))},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var e=this.managedParameters,t={},n=this;return Object.keys(this).forEach((function(r){var i=n[r];-1===e.indexOf(r)&&void 0!==i&&(t[r]=i)})),t},setQueryParameter:function(e,t){if(this[e]===t)return this;var n={};return n[e]=t,this.setQueryParameters(n)},setQueryParameters:function(e){if(!e)return this;var t=d.validate(this,e);if(t)throw t;var n=this,r=d._parseNumbers(e),i=Object.keys(this).reduce((function(e,t){return e[t]=n[t],e}),{}),a=Object.keys(r).reduce((function(e,t){var n=void 0!==e[t],i=void 0!==r[t];return n&&!i?c(e,[t]):(i&&(e[t]=r[t]),e)}),i);return new this.constructor(a)},resetPage:function(){return void 0===this.page?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return"boolean"!=typeof e.showParentLevel||e.showParentLevel},getHierarchicalFacetByName:function(e){return s(this.hierarchicalFacets,(function(t){return t.name===e}))},getHierarchicalFacetBreadcrumb:function(e){if(!this.isHierarchicalFacet(e))return[];var t=this.getHierarchicalRefinement(e)[0];if(!t)return[];var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e));return t.split(n).map((function(e){return e.trim()}))},toString:function(){return JSON.stringify(this,null,2)}},e.exports=d},76673:function(e,t,n){"use strict";e.exports=function(e){return function(t,n){var s=e.hierarchicalFacets[n],u=e.hierarchicalFacetsRefinements[s.name]&&e.hierarchicalFacetsRefinements[s.name][0]||"",h=e._getHierarchicalFacetSeparator(s),l=e._getHierarchicalRootPath(s),f=e._getHierarchicalShowParentLevel(s),d=a(e._getHierarchicalFacetSortBy(s)),p=t.every((function(e){return e.exhaustive})),m=function(e,t,n,a,s){return function(u,h,l){var f=u;if(l>0){var d=0;for(f=u;d<l;){var p=f&&Array.isArray(f.data)?f.data:[];f=i(p,(function(e){return e.isRefined})),d++}}if(f){var m=Object.keys(h.data).map((function(e){return[e,h.data[e]]})).filter((function(e){return function(e,t,n,r,i,a){return(!i||0===e.indexOf(i)&&i!==e)&&(!i&&-1===e.indexOf(r)||i&&e.split(r).length-i.split(r).length==1||-1===e.indexOf(r)&&-1===n.indexOf(r)||0===n.indexOf(e)||0===e.indexOf(t+r)&&(a||0===e.indexOf(n)))}(e[0],f.path||n,s,t,n,a)}));f.data=r(m.map((function(e){var n=e[0];return function(e,t,n,r,i){var a=t.split(n);return{name:a[a.length-1].trim(),path:t,escapedValue:o(t),count:e,isRefined:r===t||0===r.indexOf(t+n),exhaustive:i,data:null}}(e[1],n,t,c(s),h.exhaustive)})),e[0],e[1])}return u}}(d,h,l,f,u),g=t;return l&&(g=t.slice(l.split(h).length)),g.reduce(m,{name:e.hierarchicalFacets[n].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:p,data:null})}};var r=n(38601),i=n(20849),a=n(7577),s=n(2909),o=s.escapeFacetValue,c=s.unescapeFacetValue},67691:function(e,t,n){"use strict";var r=n(44728),i=n(29110),a=n(38601),s=n(78965),o=n(20849),c=n(43917),u=n(7577),h=n(2909),l=h.escapeFacetValue,f=h.unescapeFacetValue,d=n(76673);function p(e){var t={};return e.forEach((function(e,n){t[e]=n})),t}function m(e,t,n){t&&t[n]&&(e.stats=t[n])}function g(e,t,n){var a=t[0];this._rawResults=t;var u=this;Object.keys(a).forEach((function(e){u[e]=a[e]})),Object.keys(n||{}).forEach((function(e){u[e]=n[e]})),this.processingTimeMS=t.reduce((function(e,t){return void 0===t.processingTimeMS?e:e+t.processingTimeMS}),0),this.disjunctiveFacets=[],this.hierarchicalFacets=e.hierarchicalFacets.map((function(){return[]})),this.facets=[];var h=e.getRefinedDisjunctiveFacets(),l=p(e.facets),g=p(e.disjunctiveFacets),v=1,y=a.facets||{};Object.keys(y).forEach((function(t){var n,r,i=y[t],s=(n=e.hierarchicalFacets,r=t,o(n,(function(e){return(e.attributes||[]).indexOf(r)>-1})));if(s){var h=s.attributes.indexOf(t),f=c(e.hierarchicalFacets,(function(e){return e.name===s.name}));u.hierarchicalFacets[f][h]={attribute:t,data:i,exhaustive:a.exhaustiveFacetsCount}}else{var d,p=-1!==e.disjunctiveFacets.indexOf(t),v=-1!==e.facets.indexOf(t);p&&(d=g[t],u.disjunctiveFacets[d]={name:t,data:i,exhaustive:a.exhaustiveFacetsCount},m(u.disjunctiveFacets[d],a.facets_stats,t)),v&&(d=l[t],u.facets[d]={name:t,data:i,exhaustive:a.exhaustiveFacetsCount},m(u.facets[d],a.facets_stats,t))}})),this.hierarchicalFacets=s(this.hierarchicalFacets),h.forEach((function(n){var s=t[v],o=s&&s.facets?s.facets:{},h=e.getHierarchicalFacetByName(n);Object.keys(o).forEach((function(t){var n,l=o[t];if(h){n=c(e.hierarchicalFacets,(function(e){return e.name===h.name}));var d=c(u.hierarchicalFacets[n],(function(e){return e.attribute===t}));if(-1===d)return;u.hierarchicalFacets[n][d].data=r({},u.hierarchicalFacets[n][d].data,l)}else{n=g[t];var p=a.facets&&a.facets[t]||{};u.disjunctiveFacets[n]={name:t,data:i({},l,p),exhaustive:s.exhaustiveFacetsCount},m(u.disjunctiveFacets[n],s.facets_stats,t),e.disjunctiveFacetsRefinements[t]&&e.disjunctiveFacetsRefinements[t].forEach((function(r){!u.disjunctiveFacets[n].data[r]&&e.disjunctiveFacetsRefinements[t].indexOf(f(r))>-1&&(u.disjunctiveFacets[n].data[r]=0)}))}})),v++})),e.getRefinedHierarchicalFacets().forEach((function(n){var r=e.getHierarchicalFacetByName(n),a=e._getHierarchicalFacetSeparator(r),s=e.getHierarchicalRefinement(n);0===s.length||s[0].split(a).length<2||t.slice(v).forEach((function(t){var n=t&&t.facets?t.facets:{};Object.keys(n).forEach((function(t){var o=n[t],h=c(e.hierarchicalFacets,(function(e){return e.name===r.name})),l=c(u.hierarchicalFacets[h],(function(e){return e.attribute===t}));if(-1!==l){var f={};if(s.length>0){var d=s[0].split(a)[0];f[d]=u.hierarchicalFacets[h][l].data[d]}u.hierarchicalFacets[h][l].data=i(f,o,u.hierarchicalFacets[h][l].data)}})),v++}))})),Object.keys(e.facetsExcludes).forEach((function(t){var n=e.facetsExcludes[t],r=l[t];u.facets[r]={name:t,data:a.facets[t],exhaustive:a.exhaustiveFacetsCount},n.forEach((function(e){u.facets[r]=u.facets[r]||{name:t},u.facets[r].data=u.facets[r].data||{},u.facets[r].data[e]=0}))})),this.hierarchicalFacets=this.hierarchicalFacets.map(d(e)),this.facets=s(this.facets),this.disjunctiveFacets=s(this.disjunctiveFacets),this._state=e}function v(e,t,n,r){if(r=r||0,Array.isArray(t))return e(t,n[r]);if(!t.data||0===t.data.length)return t;var a=t.data.map((function(t){return v(e,t,n,r+1)})),s=e(a,n[r]);return i({data:s},t)}function y(e,t){var n=o(e,(function(e){return e.name===t}));return n&&n.stats}function R(e,t,n,r,i){var a=o(i,(function(e){return e.name===n})),s=a&&a.data&&a.data[r]?a.data[r]:0,c=a&&a.exhaustive||!1;return{type:t,attributeName:n,name:r,count:s,exhaustive:c}}g.prototype.getFacetByName=function(e){function t(t){return t.name===e}return o(this.facets,t)||o(this.disjunctiveFacets,t)||o(this.hierarchicalFacets,t)},g.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],g.prototype.getFacetValues=function(e,t){var n=function(e,t){function n(e){return e.name===t}if(e._state.isConjunctiveFacet(t)){var r=o(e.facets,n);return r?Object.keys(r.data).map((function(n){var i=l(n);return{name:n,escapedValue:i,count:r.data[n],isRefined:e._state.isFacetRefined(t,i),isExcluded:e._state.isExcludeRefined(t,n)}})):[]}if(e._state.isDisjunctiveFacet(t)){var i=o(e.disjunctiveFacets,n);return i?Object.keys(i.data).map((function(n){var r=l(n);return{name:n,escapedValue:r,count:i.data[n],isRefined:e._state.isDisjunctiveFacetRefined(t,r)}})):[]}if(e._state.isHierarchicalFacet(t))return o(e.hierarchicalFacets,n)}(this,e);if(n){var r=i({},t,{sortBy:g.DEFAULT_SORT,facetOrdering:!(t&&t.sortBy)}),s=this;return v((function(e,t){if(r.facetOrdering){var n=function(e,t){return e.renderingContent&&e.renderingContent.facetOrdering&&e.renderingContent.facetOrdering.values&&e.renderingContent.facetOrdering.values[t]}(s,t);if(Boolean(n))return function(e,t){var n=[],r=[],i=(t.order||[]).reduce((function(e,t,n){return e[t]=n,e}),{});e.forEach((function(e){var t=e.path||e.name;void 0!==i[t]?n[i[t]]=e:r.push(e)})),n=n.filter((function(e){return e}));var s,o=t.sortRemainingBy;return"hidden"===o?n:(s="alpha"===o?[["path","name"],["asc","asc"]]:[["count"],["desc"]],n.concat(a(r,s[0],s[1])))}(e,n)}if(Array.isArray(r.sortBy)){var i=u(r.sortBy,g.DEFAULT_SORT);return a(e,i[0],i[1])}if("function"==typeof r.sortBy)return function(e,t){return t.sort(e)}(r.sortBy,e);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")}),n,Array.isArray(n)?[e]:s._state.getHierarchicalFacetByName(n.name).attributes)}},g.prototype.getFacetStats=function(e){return this._state.isConjunctiveFacet(e)?y(this.facets,e):this._state.isDisjunctiveFacet(e)?y(this.disjunctiveFacets,e):void 0},g.prototype.getRefinements=function(){var e=this._state,t=this,n=[];return Object.keys(e.facetsRefinements).forEach((function(r){e.facetsRefinements[r].forEach((function(e){n.push(R(0,"facet",r,e,t.facets))}))})),Object.keys(e.facetsExcludes).forEach((function(r){e.facetsExcludes[r].forEach((function(e){n.push(R(0,"exclude",r,e,t.facets))}))})),Object.keys(e.disjunctiveFacetsRefinements).forEach((function(r){e.disjunctiveFacetsRefinements[r].forEach((function(e){n.push(R(0,"disjunctive",r,e,t.disjunctiveFacets))}))})),Object.keys(e.hierarchicalFacetsRefinements).forEach((function(r){e.hierarchicalFacetsRefinements[r].forEach((function(i){n.push(function(e,t,n,r){var i=e.getHierarchicalFacetByName(t),a=e._getHierarchicalFacetSeparator(i),s=n.split(a),c=o(r,(function(e){return e.name===t})),u=s.reduce((function(e,t){var n=e&&o(e.data,(function(e){return e.name===t}));return void 0!==n?n:e}),c),h=u&&u.count||0,l=u&&u.exhaustive||!1,f=u&&u.path||"";return{type:"hierarchical",attributeName:t,name:f,count:h,exhaustive:l}}(e,r,i,t.hierarchicalFacets))}))})),Object.keys(e.numericRefinements).forEach((function(t){var r=e.numericRefinements[t];Object.keys(r).forEach((function(e){r[e].forEach((function(r){n.push({type:"numeric",attributeName:t,name:r,numericValue:r,operator:e})}))}))})),e.tagRefinements.forEach((function(e){n.push({type:"tag",attributeName:"_tags",name:e})})),n},e.exports=g},36571:function(e,t,n){"use strict";var r=n(33371),i=n(67691),a=n(46732),s=n(49228),o=n(72733),c=n(73014),u=n(40317),h=n(21383),l=n(44728),f=n(16938),d=n(2909).escapeFacetValue;function p(e,t,n){"function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper ("+f+")"),this.setClient(e);var i=n||{};i.index=t,this.state=r.make(i),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}function m(e){if(e<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(e),isPageReset:!1}),this}function g(){return this.state.page}c(p,o),p.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this},p.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this},p.prototype.getQuery=function(){var e=this.state;return s._getHitsSearchParams(e)},p.prototype.searchOnce=function(e,t){var n=e?this.state.setQueryParameters(e):this.state,r=s._getQueries(n.index,n),a=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:n}),!t)return this.client.search(r).then((function(e){return a._currentNbQueries--,0===a._currentNbQueries&&a.emit("searchQueueEmpty"),{content:new i(n,e.results),state:n,_originalResponse:e}}),(function(e){throw a._currentNbQueries--,0===a._currentNbQueries&&a.emit("searchQueueEmpty"),e}));this.client.search(r).then((function(e){a._currentNbQueries--,0===a._currentNbQueries&&a.emit("searchQueueEmpty"),t(null,new i(n,e.results),n)})).catch((function(e){a._currentNbQueries--,0===a._currentNbQueries&&a.emit("searchQueueEmpty"),t(e,null,n)}))},p.prototype.findAnswers=function(e){var t=this.state,n=this.derivedHelpers[0];if(!n)return Promise.resolve([]);var r=n.getModifiedState(t),i=l({attributesForPrediction:e.attributesForPrediction,nbHits:e.nbHits},{params:h(s._getHitsSearchParams(r),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),a="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if("function"!=typeof this.client.initIndex)throw new Error(a);var o=this.client.initIndex(r.index);if("function"!=typeof o.findAnswers)throw new Error(a);return o.findAnswers(r.query,e.queryLanguages,i)},p.prototype.searchForFacetValues=function(e,t,n,r){var i="function"==typeof this.client.searchForFacetValues,a="function"==typeof this.client.initIndex;if(!i&&!a&&"function"!=typeof this.client.search)throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues");var o=this.state.setQueryParameters(r||{}),c=o.isDisjunctiveFacet(e),u=s.getSearchForFacetQuery(e,t,n,o);this._currentNbQueries++;var h,l=this;return i?h=this.client.searchForFacetValues([{indexName:o.index,params:u}]):a?h=this.client.initIndex(o.index).searchForFacetValues(u):(delete u.facetName,h=this.client.search([{type:"facet",facet:e,indexName:o.index,params:u}]).then((function(e){return e.results[0]}))),this.emit("searchForFacetValues",{state:o,facet:e,query:t}),h.then((function(t){return l._currentNbQueries--,0===l._currentNbQueries&&l.emit("searchQueueEmpty"),(t=Array.isArray(t)?t[0]:t).facetHits.forEach((function(t){t.escapedValue=d(t.value),t.isRefined=c?o.isDisjunctiveFacetRefined(e,t.escapedValue):o.isFacetRefined(e,t.escapedValue)})),t}),(function(e){throw l._currentNbQueries--,0===l._currentNbQueries&&l.emit("searchQueueEmpty"),e}))},p.prototype.setQuery=function(e){return this._change({state:this.state.resetPage().setQuery(e),isPageReset:!0}),this},p.prototype.clearRefinements=function(e){return this._change({state:this.state.resetPage().clearRefinements(e),isPageReset:!0}),this},p.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this},p.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},p.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},p.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(e,t),isPageReset:!0}),this},p.prototype.addNumericRefinement=function(e,t,n){return this._change({state:this.state.resetPage().addNumericRefinement(e,t,n),isPageReset:!0}),this},p.prototype.addFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addFacetRefinement(e,t),isPageReset:!0}),this},p.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},p.prototype.addFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().addExcludeRefinement(e,t),isPageReset:!0}),this},p.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},p.prototype.addTag=function(e){return this._change({state:this.state.resetPage().addTagRefinement(e),isPageReset:!0}),this},p.prototype.removeNumericRefinement=function(e,t,n){return this._change({state:this.state.resetPage().removeNumericRefinement(e,t,n),isPageReset:!0}),this},p.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},p.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},p.prototype.removeHierarchicalFacetRefinement=function(e){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(e),isPageReset:!0}),this},p.prototype.removeFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeFacetRefinement(e,t),isPageReset:!0}),this},p.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},p.prototype.removeFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().removeExcludeRefinement(e,t),isPageReset:!0}),this},p.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},p.prototype.removeTag=function(e){return this._change({state:this.state.resetPage().removeTagRefinement(e),isPageReset:!0}),this},p.prototype.toggleFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(e,t),isPageReset:!0}),this},p.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},p.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)},p.prototype.toggleFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().toggleFacetRefinement(e,t),isPageReset:!0}),this},p.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},p.prototype.toggleTag=function(e){return this._change({state:this.state.resetPage().toggleTagRefinement(e),isPageReset:!0}),this},p.prototype.nextPage=function(){var e=this.state.page||0;return this.setPage(e+1)},p.prototype.previousPage=function(){var e=this.state.page||0;return this.setPage(e-1)},p.prototype.setCurrentPage=m,p.prototype.setPage=m,p.prototype.setIndex=function(e){return this._change({state:this.state.resetPage().setIndex(e),isPageReset:!0}),this},p.prototype.setQueryParameter=function(e,t){return this._change({state:this.state.resetPage().setQueryParameter(e,t),isPageReset:!0}),this},p.prototype.setState=function(e){return this._change({state:r.make(e),isPageReset:!1}),this},p.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new r(e),this},p.prototype.hasRefinements=function(e){return!!u(this.state.getNumericRefinements(e))||(this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):!!this.state.isHierarchicalFacet(e)&&this.state.isHierarchicalFacetRefined(e))},p.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)},p.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)},p.prototype.hasTag=function(e){return this.state.isTagRefined(e)},p.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},p.prototype.getIndex=function(){return this.state.index},p.prototype.getCurrentPage=g,p.prototype.getPage=g,p.prototype.getTags=function(){return this.state.tagRefinements},p.prototype.getRefinements=function(e){var t=[];this.state.isConjunctiveFacet(e)?(this.state.getConjunctiveRefinements(e).forEach((function(e){t.push({value:e,type:"conjunctive"})})),this.state.getExcludeRefinements(e).forEach((function(e){t.push({value:e,type:"exclude"})}))):this.state.isDisjunctiveFacet(e)&&this.state.getDisjunctiveRefinements(e).forEach((function(e){t.push({value:e,type:"disjunctive"})}));var n=this.state.getNumericRefinements(e);return Object.keys(n).forEach((function(e){var r=n[e];t.push({value:r,operator:e,type:"numeric"})})),t},p.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)},p.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)},p.prototype._search=function(e){var t=this.state,n=[],r=[];e.onlyWithDerivedHelpers||(r=s._getQueries(t.index,t),n.push({state:t,queriesCount:r.length,helper:this}),this.emit("search",{state:t,results:this.lastResults}));var i=this.derivedHelpers.map((function(e){var r=e.getModifiedState(t),i=s._getQueries(r.index,r);return n.push({state:r,queriesCount:i.length,helper:e}),e.emit("search",{state:r,results:e.lastResults}),i})),a=Array.prototype.concat.apply(r,i),o=this._queryId++;this._currentNbQueries++;try{this.client.search(a).then(this._dispatchAlgoliaResponse.bind(this,n,o)).catch(this._dispatchAlgoliaError.bind(this,o))}catch(e){this.emit("error",{error:e})}},p.prototype._dispatchAlgoliaResponse=function(e,t,n){if(!(t<this._lastQueryIdReceived)){this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,0===this._currentNbQueries&&this.emit("searchQueueEmpty");var r=n.results.slice();e.forEach((function(e){var t=e.state,n=e.queriesCount,a=e.helper,s=r.splice(0,n),o=a.lastResults=new i(t,s);a.emit("result",{results:o,state:t})}))}},p.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",{error:t}),0===this._currentNbQueries&&this.emit("searchQueueEmpty"))},p.prototype.containsRefinement=function(e,t,n,r){return e||0!==t.length||0!==n.length||0!==r.length},p.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&this.state.disjunctiveRefinements[e].length>0},p.prototype._change=function(e){var t=e.state,n=e.isPageReset;t!==this.state&&(this.state=t,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:n}))},p.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},p.prototype.setClient=function(e){return this.client===e||("function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper ("+f+")"),this.client=e),this},p.prototype.getClient=function(){return this.client},p.prototype.derive=function(e){var t=new a(this,e);return this.derivedHelpers.push(t),t},p.prototype.detachDerivedHelper=function(e){var t=this.derivedHelpers.indexOf(e);if(-1===t)throw new Error("Derived helper already detached");this.derivedHelpers.splice(t,1)},p.prototype.hasPendingRequests=function(){return this._currentNbQueries>0},e.exports=p},78965:function(e){"use strict";e.exports=function(e){return Array.isArray(e)?e.filter(Boolean):[]}},29110:function(e){"use strict";e.exports=function(){return Array.prototype.slice.call(arguments).reduceRight((function(e,t){return Object.keys(Object(t)).forEach((function(n){void 0!==t[n]&&(void 0!==e[n]&&delete e[n],e[n]=t[n])})),e}),{})}},2909:function(e){"use strict";e.exports={escapeFacetValue:function(e){return"string"!=typeof e?e:String(e).replace(/^-/,"\\-")},unescapeFacetValue:function(e){return"string"!=typeof e?e:e.replace(/^\\-/,"-")}}},20849:function(e){"use strict";e.exports=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}},43917:function(e){"use strict";e.exports=function(e,t){if(!Array.isArray(e))return-1;for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}},7577:function(e,t,n){"use strict";var r=n(20849);e.exports=function(e,t){var n=(t||[]).map((function(e){return e.split(":")}));return e.reduce((function(e,t){var i=t.split(":"),a=r(n,(function(e){return e[0]===i[0]}));return i.length>1||!a?(e[0].push(i[0]),e[1].push(i[1]),e):(e[0].push(a[0]),e[1].push(a[1]),e)}),[[],[]])}},73014:function(e){"use strict";e.exports=function(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}},14843:function(e){"use strict";e.exports=function(e,t){return e.filter((function(n,r){return t.indexOf(n)>-1&&e.indexOf(n)===r}))}},44728:function(e){"use strict";function t(e){return"function"==typeof e||Array.isArray(e)||"[object Object]"===Object.prototype.toString.call(e)}function n(e,r){if(e===r)return e;for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&"__proto__"!==i){var a=r[i],s=e[i];void 0!==s&&void 0===a||(t(s)&&t(a)?e[i]=n(s,a):e[i]="object"==typeof(o=a)&&null!==o?n(Array.isArray(o)?[]:{},o):o)}var o;return e}e.exports=function(e){t(e)||(e={});for(var r=1,i=arguments.length;r<i;r++){var a=arguments[r];t(a)&&n(e,a)}return e}},40317:function(e){"use strict";e.exports=function(e){return e&&Object.keys(e).length>0}},21383:function(e){"use strict";e.exports=function(e,t){if(null===e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}},38601:function(e){"use strict";function t(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=void 0!==t,a=null===t;if(!a&&e>t||r&&i||!n)return 1;if(!r&&e<t||a&&n||!i)return-1}return 0}e.exports=function(e,n,r){if(!Array.isArray(e))return[];Array.isArray(r)||(r=[]);var i=e.map((function(e,t){return{criteria:n.map((function(t){return e[t]})),index:t,value:e}}));return i.sort((function(e,n){for(var i=-1;++i<e.criteria.length;){var a=t(e.criteria[i],n.criteria[i]);if(a)return i>=r.length?a:"desc"===r[i]?-a:a}return e.index-n.index})),i.map((function(e){return e.value}))}},17507:function(e){"use strict";e.exports=function e(t){if("number"==typeof t)return t;if("string"==typeof t)return parseFloat(t);if(Array.isArray(t))return t.map(e);throw new Error("The value should be a number, a parsable string or an array of those.")}},49228:function(e,t,n){"use strict";var r=n(44728);function i(e){return Object.keys(e).sort((function(e,t){return e.localeCompare(t)})).reduce((function(t,n){return t[n]=e[n],t}),{})}var a={_getQueries:function(e,t){var n=[];return n.push({indexName:e,params:a._getHitsSearchParams(t)}),t.getRefinedDisjunctiveFacets().forEach((function(r){n.push({indexName:e,params:a._getDisjunctiveFacetSearchParams(t,r)})})),t.getRefinedHierarchicalFacets().forEach((function(r){var i=t.getHierarchicalFacetByName(r),s=t.getHierarchicalRefinement(r),o=t._getHierarchicalFacetSeparator(i);if(s.length>0&&s[0].split(o).length>1){var c=s[0].split(o).slice(0,-1).reduce((function(e,t,n){return e.concat({attribute:i.attributes[n],value:0===n?t:[e[e.length-1].value,t].join(o)})}),[]);c.forEach((function(r,i){var s=a._getDisjunctiveFacetSearchParams(t,r.attribute,0===i),o=c[i-1];s.facetFilters=i>0?[o.attribute+":"+o.value]:void 0,n.push({indexName:e,params:s})}))}})),n},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(a._getHitsHierarchicalFacetsAttributes(e)),n=a._getFacetFilters(e),s=a._getNumericFilters(e),o=a._getTagFilters(e),c={facets:t.indexOf("*")>-1?["*"]:t,tagFilters:o};return n.length>0&&(c.facetFilters=n),s.length>0&&(c.numericFilters=s),i(r({},e.getQueryParams(),c))},_getDisjunctiveFacetSearchParams:function(e,t,n){var s=a._getFacetFilters(e,t,n),o=a._getNumericFilters(e,t),c=a._getTagFilters(e),u={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1};c.length>0&&(u.tagFilters=c);var h=e.getHierarchicalFacetByName(t);return u.facets=h?a._getDisjunctiveHierarchicalFacetAttribute(e,h,n):t,o.length>0&&(u.numericFilters=o),s.length>0&&(u.facetFilters=s),i(r({},e.getQueryParams(),u))},_getNumericFilters:function(e,t){if(e.numericFilters)return e.numericFilters;var n=[];return Object.keys(e.numericRefinements).forEach((function(r){var i=e.numericRefinements[r]||{};Object.keys(i).forEach((function(e){var a=i[e]||[];t!==r&&a.forEach((function(t){if(Array.isArray(t)){var i=t.map((function(t){return r+e+t}));n.push(i)}else n.push(r+e+t)}))}))})),n},_getTagFilters:function(e){return e.tagFilters?e.tagFilters:e.tagRefinements.join(",")},_getFacetFilters:function(e,t,n){var r=[],i=e.facetsRefinements||{};Object.keys(i).forEach((function(e){(i[e]||[]).forEach((function(t){r.push(e+":"+t)}))}));var a=e.facetsExcludes||{};Object.keys(a).forEach((function(e){(a[e]||[]).forEach((function(t){r.push(e+":-"+t)}))}));var s=e.disjunctiveFacetsRefinements||{};Object.keys(s).forEach((function(e){var n=s[e]||[];if(e!==t&&n&&0!==n.length){var i=[];n.forEach((function(t){i.push(e+":"+t)})),r.push(i)}}));var o=e.hierarchicalFacetsRefinements||{};return Object.keys(o).forEach((function(i){var a=(o[i]||[])[0];if(void 0!==a){var s,c,u=e.getHierarchicalFacetByName(i),h=e._getHierarchicalFacetSeparator(u),l=e._getHierarchicalRootPath(u);if(t===i){if(-1===a.indexOf(h)||!l&&!0===n||l&&l.split(h).length===a.split(h).length)return;l?(c=l.split(h).length-1,a=l):(c=a.split(h).length-2,a=a.slice(0,a.lastIndexOf(h))),s=u.attributes[c]}else c=a.split(h).length-1,s=u.attributes[c];s&&r.push([s+":"+a])}})),r},_getHitsHierarchicalFacetsAttributes:function(e){return e.hierarchicalFacets.reduce((function(t,n){var r=e.getHierarchicalRefinement(n.name)[0];if(!r)return t.push(n.attributes[0]),t;var i=e._getHierarchicalFacetSeparator(n),a=r.split(i).length,s=n.attributes.slice(0,a+1);return t.concat(s)}),[])},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,n){var r=e._getHierarchicalFacetSeparator(t);if(!0===n){var i=e._getHierarchicalRootPath(t),a=0;return i&&(a=i.split(r).length),[t.attributes[a]]}var s=(e.getHierarchicalRefinement(t.name)[0]||"").split(r).length-1;return t.attributes.slice(0,s+1)},getSearchForFacetQuery:function(e,t,n,s){var o=s.isDisjunctiveFacet(e)?s.clearRefinements(e):s,c={facetQuery:t,facetName:e};return"number"==typeof n&&(c.maxFacetHits=n),i(r({},a._getHitsSearchParams(o),c))}};e.exports=a},72208:function(e){"use strict";e.exports=function(e){return null!==e&&/^[a-zA-Z0-9_-]{1,64}$/.test(e)}},16938:function(e){"use strict";e.exports="3.10.0"},39786:function(e,t,n){var r,i;!function(a,s){"use strict";void 0===(i="function"==typeof(r=s)?r.call(t,n,t,e):r)||(e.exports=i)}(window,(function(){"use strict";var e=function(){var e=window.Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],n=0;n<t.length;n++){var r=t[n]+"MatchesSelector";if(e[r])return r}}();return function(t,n){return t[e](n)}}))},32137:function(e,t,n){var r,i;"undefined"!=typeof window&&window,void 0===(i="function"==typeof(r=function(){"use strict";function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var n=this._events=this._events||{},r=n[e]=n[e]||[];return-1==r.indexOf(t)&&r.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{};return(n[e]=n[e]||{})[t]=!0,this}},t.off=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var r=n.indexOf(t);return-1!=r&&n.splice(r,1),this}},t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var r=this._onceEvents&&this._onceEvents[e],i=0;i<n.length;i++){var a=n[i];r&&r[a]&&(this.off(e,a),delete r[a]),a.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e})?r.call(t,n,t,e):r)||(e.exports=i)},977:function(e,t,n){var r,i;!function(a,s){r=[n(39786)],i=function(e){return function(e,t){"use strict";var n={extend:function(e,t){for(var n in t)e[n]=t[n];return e},modulo:function(e,t){return(e%t+t)%t}},r=Array.prototype.slice;n.makeArray=function(e){return Array.isArray(e)?e:null==e?[]:"object"==typeof e&&"number"==typeof e.length?r.call(e):[e]},n.removeFrom=function(e,t){var n=e.indexOf(t);-1!=n&&e.splice(n,1)},n.getParent=function(e,n){for(;e.parentNode&&e!=document.body;)if(e=e.parentNode,t(e,n))return e},n.getQueryElement=function(e){return"string"==typeof e?document.querySelector(e):e},n.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},n.filterFindElements=function(e,r){e=n.makeArray(e);var i=[];return e.forEach((function(e){if(e instanceof HTMLElement)if(r){t(e,r)&&i.push(e);for(var n=e.querySelectorAll(r),a=0;a<n.length;a++)i.push(n[a])}else i.push(e)})),i},n.debounceMethod=function(e,t,n){n=n||100;var r=e.prototype[t],i=t+"Timeout";e.prototype[t]=function(){var e=this[i];clearTimeout(e);var t=arguments,a=this;this[i]=setTimeout((function(){r.apply(a,t),delete a[i]}),n)}},n.docReady=function(e){var t=document.readyState;"complete"==t||"interactive"==t?setTimeout(e):document.addEventListener("DOMContentLoaded",e)},n.toDashed=function(e){return e.replace(/(.)([A-Z])/g,(function(e,t,n){return t+"-"+n})).toLowerCase()};var i=e.console;return n.htmlInit=function(t,r){n.docReady((function(){var a=n.toDashed(r),s="data-"+a,o=document.querySelectorAll("["+s+"]"),c=document.querySelectorAll(".js-"+a),u=n.makeArray(o).concat(n.makeArray(c)),h=s+"-options",l=e.jQuery;u.forEach((function(e){var n,a=e.getAttribute(s)||e.getAttribute(h);try{n=a&&JSON.parse(a)}catch(t){return void(i&&i.error("Error parsing "+s+" on "+e.className+": "+t))}var o=new t(e,n);l&&l.data(e,r,o)}))}))},n}(a,e)}.apply(t,r),void 0===i||(e.exports=i)}(window)},21485:function(e,t,n){var r,i;window,void 0===(i="function"==typeof(r=function(){"use strict";function e(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}var t="undefined"==typeof console?function(){}:function(e){console.error(e)},n=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],r=n.length;function i(e){var n=getComputedStyle(e);return n||t("Style returned "+n+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),n}var a,s=!1;function o(t){if(function(){if(!s){s=!0;var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style.boxSizing="border-box";var n=document.body||document.documentElement;n.appendChild(t);var r=i(t);a=200==Math.round(e(r.width)),o.isBoxSizeOuter=a,n.removeChild(t)}}(),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var c=i(t);if("none"==c.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<r;t++)e[n[t]]=0;return e}();var u={};u.width=t.offsetWidth,u.height=t.offsetHeight;for(var h=u.isBorderBox="border-box"==c.boxSizing,l=0;l<r;l++){var f=n[l],d=c[f],p=parseFloat(d);u[f]=isNaN(p)?0:p}var m=u.paddingLeft+u.paddingRight,g=u.paddingTop+u.paddingBottom,v=u.marginLeft+u.marginRight,y=u.marginTop+u.marginBottom,R=u.borderLeftWidth+u.borderRightWidth,b=u.borderTopWidth+u.borderBottomWidth,x=h&&a,F=e(c.width);!1!==F&&(u.width=F+(x?0:m+R));var _=e(c.height);return!1!==_&&(u.height=_+(x?0:g+b)),u.innerWidth=u.width-(m+R),u.innerHeight=u.height-(g+b),u.outerWidth=u.width+v,u.outerHeight=u.height+y,u}}return o})?r.call(t,n,t,e):r)||(e.exports=i)},16994:function(e,t,n){var r,i,a;window,i=[n(82831),n(21485)],void 0===(a="function"==typeof(r=function(e,t){"use strict";var n=e.create("masonry");n.compatOptions.fitWidth="isFitWidth";var r=n.prototype;return r._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var e=0;e<this.cols;e++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},r.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var e=this.items[0],n=e&&e.element;this.columnWidth=n&&t(n).outerWidth||this.containerWidth}var r=this.columnWidth+=this.gutter,i=this.containerWidth+this.gutter,a=i/r,s=r-i%r;a=Math[s&&s<1?"round":"floor"](a),this.cols=Math.max(a,1)},r.getContainerWidth=function(){var e=this._getOption("fitWidth")?this.element.parentNode:this.element,n=t(e);this.containerWidth=n&&n.innerWidth},r._getItemLayoutPosition=function(e){e.getSize();var t=e.size.outerWidth%this.columnWidth,n=Math[t&&t<1?"round":"ceil"](e.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var r=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](n,e),i={x:this.columnWidth*r.col,y:r.y},a=r.y+e.size.outerHeight,s=n+r.col,o=r.col;o<s;o++)this.colYs[o]=a;return i},r._getTopColPosition=function(e){var t=this._getTopColGroup(e),n=Math.min.apply(Math,t);return{col:t.indexOf(n),y:n}},r._getTopColGroup=function(e){if(e<2)return this.colYs;for(var t=[],n=this.cols+1-e,r=0;r<n;r++)t[r]=this._getColGroupY(r,e);return t},r._getColGroupY=function(e,t){if(t<2)return this.colYs[e];var n=this.colYs.slice(e,e+t);return Math.max.apply(Math,n)},r._getHorizontalColPosition=function(e,t){var n=this.horizontalColIndex%this.cols;n=e>1&&n+e>this.cols?0:n;var r=t.size.outerWidth&&t.size.outerHeight;return this.horizontalColIndex=r?n+e:this.horizontalColIndex,{col:n,y:this._getColGroupY(n,e)}},r._manageStamp=function(e){var n=t(e),r=this._getElementOffset(e),i=this._getOption("originLeft")?r.left:r.right,a=i+n.outerWidth,s=Math.floor(i/this.columnWidth);s=Math.max(0,s);var o=Math.floor(a/this.columnWidth);o-=a%this.columnWidth?0:1,o=Math.min(this.cols-1,o);for(var c=(this._getOption("originTop")?r.top:r.bottom)+n.outerHeight,u=s;u<=o;u++)this.colYs[u]=Math.max(c,this.colYs[u])},r._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this._getOption("fitWidth")&&(e.width=this._getContainerFitWidth()),e},r._getContainerFitWidth=function(){for(var e=0,t=this.cols;--t&&0===this.colYs[t];)e++;return(this.cols-e)*this.columnWidth-this.gutter},r.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!=this.containerWidth},n})?r.apply(t,i):r)||(e.exports=a)},63169:function(e,t,n){var r,i,a;window,i=[n(32137),n(21485)],void 0===(a="function"==typeof(r=function(e,t){"use strict";var n=document.documentElement.style,r="string"==typeof n.transition?"transition":"WebkitTransition",i="string"==typeof n.transform?"transform":"WebkitTransform",a={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[r],s={transform:i,transition:r,transitionDuration:r+"Duration",transitionProperty:r+"Property",transitionDelay:r+"Delay"};function o(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}var c=o.prototype=Object.create(e.prototype);c.constructor=o,c._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},c.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},c.getSize=function(){this.size=t(this.element)},c.css=function(e){var t=this.element.style;for(var n in e)t[s[n]||n]=e[n]},c.getPosition=function(){var e=getComputedStyle(this.element),t=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),r=e[t?"left":"right"],i=e[n?"top":"bottom"],a=parseFloat(r),s=parseFloat(i),o=this.layout.size;-1!=r.indexOf("%")&&(a=a/100*o.width),-1!=i.indexOf("%")&&(s=s/100*o.height),a=isNaN(a)?0:a,s=isNaN(s)?0:s,a-=t?o.paddingLeft:o.paddingRight,s-=n?o.paddingTop:o.paddingBottom,this.position.x=a,this.position.y=s},c.layoutPosition=function(){var e=this.layout.size,t={},n=this.layout._getOption("originLeft"),r=this.layout._getOption("originTop"),i=n?"paddingLeft":"paddingRight",a=n?"left":"right",s=n?"right":"left",o=this.position.x+e[i];t[a]=this.getXValue(o),t[s]="";var c=r?"paddingTop":"paddingBottom",u=r?"top":"bottom",h=r?"bottom":"top",l=this.position.y+e[c];t[u]=this.getYValue(l),t[h]="",this.css(t),this.emitEvent("layout",[this])},c.getXValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!t?e/this.layout.size.width*100+"%":e+"px"},c.getYValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&t?e/this.layout.size.height*100+"%":e+"px"},c._transitionTo=function(e,t){this.getPosition();var n=this.position.x,r=this.position.y,i=e==this.position.x&&t==this.position.y;if(this.setPosition(e,t),!i||this.isTransitioning){var a=e-n,s=t-r,o={};o.transform=this.getTranslate(a,s),this.transition({to:o,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},c.getTranslate=function(e,t){return"translate3d("+(e=this.layout._getOption("originLeft")?e:-e)+"px, "+(t=this.layout._getOption("originTop")?t:-t)+"px, 0)"},c.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},c.moveTo=c._transitionTo,c.setPosition=function(e,t){this.position.x=parseFloat(e),this.position.y=parseFloat(t)},c._nonTransition=function(e){for(var t in this.css(e.to),e.isCleaning&&this._removeStyles(e.to),e.onTransitionEnd)e.onTransitionEnd[t].call(this)},c.transition=function(e){if(parseFloat(this.layout.options.transitionDuration)){var t=this._transn;for(var n in e.onTransitionEnd)t.onEnd[n]=e.onTransitionEnd[n];for(n in e.to)t.ingProperties[n]=!0,e.isCleaning&&(t.clean[n]=!0);e.from&&(this.css(e.from),this.element.offsetHeight),this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0}else this._nonTransition(e)};var u="opacity,"+i.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}));c.enableTransition=function(){if(!this.isTransitioning){var e=this.layout.options.transitionDuration;e="number"==typeof e?e+"ms":e,this.css({transitionProperty:u,transitionDuration:e,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(a,this,!1)}},c.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},c.onotransitionend=function(e){this.ontransitionend(e)};var h={"-webkit-transform":"transform"};c.ontransitionend=function(e){if(e.target===this.element){var t=this._transn,n=h[e.propertyName]||e.propertyName;delete t.ingProperties[n],function(e){for(var t in e)return!1;return!0}(t.ingProperties)&&this.disableTransition(),n in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[n]),n in t.onEnd&&(t.onEnd[n].call(this),delete t.onEnd[n]),this.emitEvent("transitionEnd",[this])}},c.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(a,this,!1),this.isTransitioning=!1},c._removeStyles=function(e){var t={};for(var n in e)t[n]="";this.css(t)};var l={transitionProperty:"",transitionDuration:"",transitionDelay:""};return c.removeTransitionStyles=function(){this.css(l)},c.stagger=function(e){e=isNaN(e)?0:e,this.staggerDelay=e+"ms"},c.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},c.remove=function(){r&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",(function(){this.removeElem()})),this.hide()):this.removeElem()},c.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:t})},c.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},c.getHideRevealTransitionEndProperty=function(e){var t=this.layout.options[e];if(t.opacity)return"opacity";for(var n in t)return n},c.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},c.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},c.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},o})?r.apply(t,i):r)||(e.exports=a)},82831:function(e,t,n){var r,i;!function(a,s){"use strict";r=[n(32137),n(21485),n(977),n(63169)],i=function(e,t,n,r){return function(e,t,n,r,i){var a=e.console,s=e.jQuery,o=function(){},c=0,u={};function h(e,t){var n=r.getQueryElement(e);if(n){this.element=n,s&&(this.$element=s(this.element)),this.options=r.extend({},this.constructor.defaults),this.option(t);var i=++c;this.element.outlayerGUID=i,u[i]=this,this._create(),this._getOption("initLayout")&&this.layout()}else a&&a.error("Bad element for "+this.constructor.namespace+": "+(n||e))}h.namespace="outlayer",h.Item=i,h.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var l=h.prototype;function f(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}r.extend(l,t.prototype),l.option=function(e){r.extend(this.options,e)},l._getOption=function(e){var t=this.constructor.compatOptions[e];return t&&void 0!==this.options[t]?this.options[t]:this.options[e]},h.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},l._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),r.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},l.reloadItems=function(){this.items=this._itemize(this.element.children)},l._itemize=function(e){for(var t=this._filterFindItemElements(e),n=this.constructor.Item,r=[],i=0;i<t.length;i++){var a=new n(t[i],this);r.push(a)}return r},l._filterFindItemElements=function(e){return r.filterFindElements(e,this.options.itemSelector)},l.getItemElements=function(){return this.items.map((function(e){return e.element}))},l.layout=function(){this._resetLayout(),this._manageStamps();var e=this._getOption("layoutInstant"),t=void 0!==e?e:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},l._init=l.layout,l._resetLayout=function(){this.getSize()},l.getSize=function(){this.size=n(this.element)},l._getMeasurement=function(e,t){var r,i=this.options[e];i?("string"==typeof i?r=this.element.querySelector(i):i instanceof HTMLElement&&(r=i),this[e]=r?n(r)[t]:i):this[e]=0},l.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},l._getItemsForLayout=function(e){return e.filter((function(e){return!e.isIgnored}))},l._layoutItems=function(e,t){if(this._emitCompleteOnItems("layout",e),e&&e.length){var n=[];e.forEach((function(e){var r=this._getItemLayoutPosition(e);r.item=e,r.isInstant=t||e.isLayoutInstant,n.push(r)}),this),this._processLayoutQueue(n)}},l._getItemLayoutPosition=function(){return{x:0,y:0}},l._processLayoutQueue=function(e){this.updateStagger(),e.forEach((function(e,t){this._positionItem(e.item,e.x,e.y,e.isInstant,t)}),this)},l.updateStagger=function(){var e=this.options.stagger;if(null!=e)return this.stagger=function(e){if("number"==typeof e)return e;var t=e.match(/(^\d*\.?\d*)(\w*)/),n=t&&t[1],r=t&&t[2];return n.length?(n=parseFloat(n))*(d[r]||1):0}(e),this.stagger;this.stagger=0},l._positionItem=function(e,t,n,r,i){r?e.goTo(t,n):(e.stagger(i*this.stagger),e.moveTo(t,n))},l._postLayout=function(){this.resizeContainer()},l.resizeContainer=function(){if(this._getOption("resizeContainer")){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},l._getContainerSize=o,l._setContainerMeasure=function(e,t){if(void 0!==e){var n=this.size;n.isBorderBox&&(e+=t?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"}},l._emitCompleteOnItems=function(e,t){var n=this;function r(){n.dispatchEvent(e+"Complete",null,[t])}var i=t.length;if(t&&i){var a=0;t.forEach((function(t){t.once(e,s)}))}else r();function s(){++a==i&&r()}},l.dispatchEvent=function(e,t,n){var r=t?[t].concat(n):n;if(this.emitEvent(e,r),s)if(this.$element=this.$element||s(this.element),t){var i=s.Event(t);i.type=e,this.$element.trigger(i,n)}else this.$element.trigger(e,n)},l.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},l.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},l.stamp=function(e){(e=this._find(e))&&(this.stamps=this.stamps.concat(e),e.forEach(this.ignore,this))},l.unstamp=function(e){(e=this._find(e))&&e.forEach((function(e){r.removeFrom(this.stamps,e),this.unignore(e)}),this)},l._find=function(e){if(e)return"string"==typeof e&&(e=this.element.querySelectorAll(e)),r.makeArray(e)},l._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},l._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},l._manageStamp=o,l._getElementOffset=function(e){var t=e.getBoundingClientRect(),r=this._boundingRect,i=n(e);return{left:t.left-r.left-i.marginLeft,top:t.top-r.top-i.marginTop,right:r.right-t.right-i.marginRight,bottom:r.bottom-t.bottom-i.marginBottom}},l.handleEvent=r.handleEvent,l.bindResize=function(){e.addEventListener("resize",this),this.isResizeBound=!0},l.unbindResize=function(){e.removeEventListener("resize",this),this.isResizeBound=!1},l.onresize=function(){this.resize()},r.debounceMethod(h,"onresize",100),l.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},l.needsResizeLayout=function(){var e=n(this.element);return this.size&&e&&e.innerWidth!==this.size.innerWidth},l.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},l.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},l.prepended=function(e){var t=this._itemize(e);if(t.length){var n=this.items.slice(0);this.items=t.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(n)}},l.reveal=function(e){if(this._emitCompleteOnItems("reveal",e),e&&e.length){var t=this.updateStagger();e.forEach((function(e,n){e.stagger(n*t),e.reveal()}))}},l.hide=function(e){if(this._emitCompleteOnItems("hide",e),e&&e.length){var t=this.updateStagger();e.forEach((function(e,n){e.stagger(n*t),e.hide()}))}},l.revealItemElements=function(e){var t=this.getItems(e);this.reveal(t)},l.hideItemElements=function(e){var t=this.getItems(e);this.hide(t)},l.getItem=function(e){for(var t=0;t<this.items.length;t++){var n=this.items[t];if(n.element==e)return n}},l.getItems=function(e){e=r.makeArray(e);var t=[];return e.forEach((function(e){var n=this.getItem(e);n&&t.push(n)}),this),t},l.remove=function(e){var t=this.getItems(e);this._emitCompleteOnItems("remove",t),t&&t.length&&t.forEach((function(e){e.remove(),r.removeFrom(this.items,e)}),this)},l.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="",this.items.forEach((function(e){e.destroy()})),this.unbindResize();var t=this.element.outlayerGUID;delete u[t],delete this.element.outlayerGUID,s&&s.removeData(this.element,this.constructor.namespace)},h.data=function(e){var t=(e=r.getQueryElement(e))&&e.outlayerGUID;return t&&u[t]},h.create=function(e,t){var n=f(h);return n.defaults=r.extend({},h.defaults),r.extend(n.defaults,t),n.compatOptions=r.extend({},h.compatOptions),n.namespace=e,n.data=h.data,n.Item=f(i),r.htmlInit(n,e),s&&s.bridget&&s.bridget(e,n),n};var d={ms:1,s:1e3};return h.Item=i,h}(a,e,t,n,r)}.apply(t,r),void 0===i||(e.exports=i)}(window)},30115:function(e){var t="undefined"!=typeof Element,n="function"==typeof Map,r="function"==typeof Set,i="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function a(e,s){if(e===s)return!0;if(e&&s&&"object"==typeof e&&"object"==typeof s){if(e.constructor!==s.constructor)return!1;var o,c,u,h;if(Array.isArray(e)){if((o=e.length)!=s.length)return!1;for(c=o;0!=c--;)if(!a(e[c],s[c]))return!1;return!0}if(n&&e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;for(h=e.entries();!(c=h.next()).done;)if(!s.has(c.value[0]))return!1;for(h=e.entries();!(c=h.next()).done;)if(!a(c.value[1],s.get(c.value[0])))return!1;return!0}if(r&&e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;for(h=e.entries();!(c=h.next()).done;)if(!s.has(c.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(s)){if((o=e.length)!=s.length)return!1;for(c=o;0!=c--;)if(e[c]!==s[c])return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if((o=(u=Object.keys(e)).length)!==Object.keys(s).length)return!1;for(c=o;0!=c--;)if(!Object.prototype.hasOwnProperty.call(s,u[c]))return!1;if(t&&e instanceof Element)return!1;for(c=o;0!=c--;)if(("_owner"!==u[c]&&"__v"!==u[c]&&"__o"!==u[c]||!e.$$typeof)&&!a(e[u[c]],s[u[c]]))return!1;return!0}return e!=e&&s!=s}e.exports=function(e,t){try{return a(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},51728:function(e,t,n){"use strict";var r=n(64467),i=n(5556),a=n.n(i),s=n(65723);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.A=(0,s.A)({displayName:"AlgoliaCurrentRefinements",$$type:"ais.currentRefinements",propTypes:{transformItems:a().func},getProvidedProps:function(e,t,n,r){var i=r.reduce((function(t,n){return void 0===n.items||!e.clearsQuery&&"query"===n.id||e.clearsQuery&&"query"===n.id&&""===n.items[0].currentRefinement?t:t.concat(n.items.map((function(e){return c(c({},e),{},{id:n.id,index:n.index})})))}),[]),a=e.transformItems?e.transformItems(i):i;return{items:a,canRefine:a.length>0}},refine:function(e,t,n){return(n instanceof Array?n.map((function(e){return e.value})):[n]).reduce((function(e,t){return t(e)}),t)}})},26263:function(e,t,n){"use strict";var r=n(64467),i=n(5556),a=n.n(i),s=n(74103),o=n.n(s),c=n(65723),u=n(78607),h=n(30125);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){return e.attributes[0]},p="hierarchicalMenu";function m(e,t,n){var r=(0,u._1)(e,t,n,"".concat(p,".").concat(d(e)),null);return""===r?null:r}function g(e,t,n,r){var i=t.id,a=t.attributes,s=t.separator,c=t.rootPath,u=t.showParentLevel,h=m(t,n,r);return null===h?e:new(o().SearchParameters)({hierarchicalFacets:[{name:i,attributes:a,separator:s,rootPath:c,showParentLevel:u}]}).toggleHierarchicalFacetRefinement(i,h).toggleHierarchicalFacetRefinement(i,e).getHierarchicalRefinement(i)[0]}function v(e,t,n,r){return e.map((function(e){return{label:e.name,value:g(e.escapedValue,t,n,r),count:e.count,isRefined:e.isRefined,items:e.data&&v(e.data,t,n,r)}}))}var y=function e(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).slice(0,t).map((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(n.items)?f(f({},n),{},{items:e(n.items,t)}):n}))};function R(e,t,n,i){var a=d(e),s=(0,r.A)({},a,n||"");return(0,u.xM)(t,s,i,!0,p)}var b=["name:asc"];t.A=(0,c.A)({displayName:"AlgoliaHierarchicalMenu",$$type:"ais.hierarchicalMenu",propTypes:{attributes:function(e,t,n){if(!Array.isArray(e[t])||e[t].some((function(e){return"string"!=typeof e}))||e[t].length<1)return new Error("Invalid prop ".concat(t," supplied to ").concat(n,". Expected an Array of Strings"))},separator:a().string,rootPath:a().string,showParentLevel:a().bool,defaultRefinement:a().string,showMore:a().bool,limit:a().number,showMoreLimit:a().number,transformItems:a().func,facetOrdering:a().bool},defaultProps:{showMore:!1,limit:10,showMoreLimit:20,separator:" > ",rootPath:null,showParentLevel:!0,facetOrdering:!0},getProvidedProps:function(e,t,n){var r=e.showMore,i=e.limit,a=e.showMoreLimit,s=e.facetOrdering,o=d(e),c=(0,u.h1)(n,{ais:e.contextValue,multiIndexContext:e.indexContextValue});if(!Boolean(c)||!Boolean(c.getFacetByName(o)))return{items:[],currentRefinement:m(e,t,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),canRefine:!1};var h=r?a:i,l=c.getFacetValues(o,{sortBy:b,facetOrdering:s}),f=l.data?v(l.data,e,t,{ais:e.contextValue,multiIndexContext:e.indexContextValue}):[],p=e.transformItems?e.transformItems(f):f;return{items:y(p,h),currentRefinement:m(e,t,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),canRefine:p.length>0}},refine:function(e,t,n){return R(e,t,n,{ais:e.contextValue,multiIndexContext:e.indexContextValue})},cleanUp:function(e,t){return function(e,t,n){return(0,u.Ou)(t,n,"".concat(p,".").concat(d(e)))}(e,t,{ais:e.contextValue,multiIndexContext:e.indexContextValue})},getSearchParameters:function(e,t,n){var r=t.attributes,i=t.separator,a=t.rootPath,s=t.showParentLevel,o=t.showMore,c=t.limit,u=t.showMoreLimit,h=t.contextValue,l=d(t),f=o?u:c;e=e.addHierarchicalFacet({name:l,attributes:r,separator:i,rootPath:a,showParentLevel:s}).setQueryParameters({maxValuesPerFacet:Math.max(e.maxValuesPerFacet||0,f)});var p=m(t,n,{ais:h,multiIndexContext:t.indexContextValue});return null!==p&&(e=e.toggleHierarchicalFacetRefinement(l,p)),e},getMetadata:function(e,t){var n=e.attributes[0],r=d(e),i=m(e,t,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),a=i?[{label:"".concat(n,": ").concat((0,h.Tb)(i)),attribute:n,value:function(t){return R(e,t,"",{ais:e.contextValue,multiIndexContext:e.indexContextValue})},currentRefinement:i}]:[];return{id:r,index:(0,u.yO)({ais:e.contextValue,multiIndexContext:e.indexContextValue}),items:a}}})},92803:function(e,t,n){"use strict";var r=n(64467),i=n(45458),a=n(80045),s=n(30115),o=n.n(s),c=n(65723),u=n(78607),h=n(30125),l=["page"];function f(e,t,n){var r=(0,u._1)(e,t,n,"page",1);return"string"==typeof r?parseInt(r,10):r}function d(e){var t=e||{};return t.page,(0,a.A)(t,l)}function p(e){return Object.keys(e).map(Number).sort((function(e,t){return e-t})).reduce((function(t,n){return t.concat(e[n])}),[])}t.A=(0,c.A)({displayName:"AlgoliaInfiniteHits",$$type:"ais.infiniteHits",getProvidedProps:function(e,t,n){var r=this,a=(0,u.h1)(n,{ais:e.contextValue,multiIndexContext:e.indexContextValue});if(!a)return{hits:[],hasPrevious:!1,hasMore:!1,refine:function(){},refinePrevious:function(){},refineNext:function(){}};var s=a.page,c=a.hits,l=a.hitsPerPage,f=a.nbPages,m=a._state;this._cache=e.cache?e.cache:this._cache||function(){var e=void 0,t=void 0;return{read:function(n){var r=n.state;return o()(t,d(r))?e:null},write:function(n){var r=n.state,i=n.hits;t=d(r),e=i}}}();var g=this._cache.read({state:m})||{},v=(0,h.Zp)(c,l,s),y=(0,h.PD)(v,a.queryID);g[s]=y,this._cache.write({state:m,hits:g});var R=Math.min.apply(Math,(0,i.A)(Object.keys(g).map(Number))),b=Math.max.apply(Math,(0,i.A)(Object.keys(g).map(Number))),x=R>0,F=b<f-1;return{hits:p(g),hasPrevious:x,hasMore:F,refinePrevious:function(e){return r.refine(e,R-1)},refineNext:function(e){return r.refine(e,b+1)}}},getSearchParameters:function(e,t,n){return e.setQueryParameters({page:f(t,n,{ais:t.contextValue,multiIndexContext:t.indexContextValue})-1})},refine:function(e,t,n,i){var a=(0,r.A)({},"page",i+1);return(0,u.xM)(t,a,{ais:e.contextValue,multiIndexContext:e.indexContextValue},!1)}})},46446:function(e,t,n){"use strict";var r=n(64467),i=n(5556),a=n.n(i),s=n(65723),o=n(78607),c=n(30125),u="menu";function h(e){return e.attribute}function l(e,t,n){var r=(0,o._1)(e,t,n,"".concat(u,".").concat(h(e)),null);return""===r?null:r}function f(e,t,n,r){return e===l(t,n,r)?"":e}function d(e){var t=e.showMore,n=e.limit,r=e.showMoreLimit;return t?r:n}function p(e,t,n,i){var a=h(e),s=(0,r.A)({},a,n||"");return(0,o.xM)(t,s,i,!0,u)}var m=["count:desc","name:asc"];t.A=(0,s.A)({displayName:"AlgoliaMenu",$$type:"ais.menu",propTypes:{attribute:a().string.isRequired,showMore:a().bool,limit:a().number,showMoreLimit:a().number,defaultRefinement:a().string,transformItems:a().func,searchable:a().bool,facetOrdering:a().bool},defaultProps:{showMore:!1,limit:10,showMoreLimit:20,facetOrdering:!0},getProvidedProps:function(e,t,n,r,i){var a,s=e.attribute,c=e.searchable,u=e.indexContextValue,h=e.facetOrdering,p=(0,o.h1)(n,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),g=Boolean(p)&&Boolean(p.getFacetByName(s)),v=Boolean(i&&i[s]&&""!==i.query);if(c&&u)throw new Error("react-instantsearch: searching in *List is not available when used inside a multi index context");if(!g)return{items:[],currentRefinement:l(e,t,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),isFromSearch:v,searchable:c,canRefine:g};a=v?i[s].map((function(n){return{label:n.value,value:f(n.escapedValue,e,t,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),_highlightResult:{label:{value:n.highlighted}},count:n.count,isRefined:n.isRefined}})):p.getFacetValues(s,{sortBy:c?void 0:m,facetOrdering:h}).map((function(n){return{label:n.name,value:f(n.escapedValue,e,t,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),count:n.count,isRefined:n.isRefined}}));var y=e.transformItems?e.transformItems(a):a;return{items:y.slice(0,d(e)),currentRefinement:l(e,t,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),isFromSearch:v,searchable:c,canRefine:y.length>0}},refine:function(e,t,n){return p(e,t,n,{ais:e.contextValue,multiIndexContext:e.indexContextValue})},searchForFacetValues:function(e,t,n){return{facetName:e.attribute,query:n,maxFacetHits:d(e)}},cleanUp:function(e,t){return function(e,t,n){return(0,o.Ou)(t,n,"".concat(u,".").concat(h(e)))}(e,t,{ais:e.contextValue,multiIndexContext:e.indexContextValue})},getSearchParameters:function(e,t,n){var r=t.attribute;e=(e=e.setQueryParameters({maxValuesPerFacet:Math.max(e.maxValuesPerFacet||0,d(t))})).addDisjunctiveFacet(r);var i=l(t,n,{ais:t.contextValue,multiIndexContext:t.indexContextValue});return null!==i&&(e=e.addDisjunctiveFacetRefinement(r,i)),e},getMetadata:function(e,t){var n=h(e),r=l(e,t,{ais:e.contextValue,multiIndexContext:e.indexContextValue});return{id:n,index:(0,o.yO)({ais:e.contextValue,multiIndexContext:e.indexContextValue}),items:null===r?[]:[{label:"".concat(e.attribute,": ").concat((0,c.Tb)(r)),attribute:e.attribute,value:function(t){return p(e,t,"",{ais:e.contextValue,multiIndexContext:e.indexContextValue})},currentRefinement:r}]}}})},59559:function(e,t,n){"use strict";n.d(t,{Cx:function(){return a},tv:function(){return c},vi:function(){return s}});var r=n(51609),i=(0,r.createContext)({onInternalStateUpdate:function(){},createHrefForState:function(){return"#"},onSearchForFacetValues:function(){},onSearchStateChange:function(){},onSearchParameters:function(){},store:{},widgetsManager:{},mainTargetedIndex:""}),a=i.Consumer,s=i.Provider,o=(0,r.createContext)(void 0),c=o.Consumer;o.Provider},65723:function(e,t,n){"use strict";var r=n(58168),i=n(80045),a=n(23029),s=n(92901),o=n(9417),c=n(85501),u=n(56822),h=n(53954),l=n(64467),f=n(51609),d=n.n(f),p=n(30115),m=n.n(p),g=n(30125),v=n(59559),y=["contextValue"];function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.A=function(e){return function(t,n){var p=function(e){if(!e.displayName)throw new Error("`createConnector` requires you to provide a `displayName` property.");var t="function"==typeof e.getSearchParameters||"function"==typeof e.getMetadata||"function"==typeof e.transitionState;return function(n){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},v=function(f){(0,c.A)(x,f);var p,v,R=(p=x,v=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,h.A)(p);if(v){var n=(0,h.A)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,u.A)(this,e)});function x(t){var n;return(0,a.A)(this,x),n=R.call(this,t),(0,l.A)((0,o.A)(n),"unsubscribe",void 0),(0,l.A)((0,o.A)(n),"unregisterWidget",void 0),(0,l.A)((0,o.A)(n),"isUnmounting",!1),(0,l.A)((0,o.A)(n),"state",{providedProps:n.getProvidedProps(n.props)}),(0,l.A)((0,o.A)(n),"refine",(function(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];n.props.contextValue.onInternalStateUpdate((t=e.refine).call.apply(t,[(0,o.A)(n),n.props,n.props.contextValue.store.getState().widgets].concat(i)))})),(0,l.A)((0,o.A)(n),"createURL",(function(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n.props.contextValue.createHrefForState((t=e.refine).call.apply(t,[(0,o.A)(n),n.props,n.props.contextValue.store.getState().widgets].concat(i)))})),(0,l.A)((0,o.A)(n),"searchForFacetValues",(function(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];n.props.contextValue.onSearchForFacetValues((t=e.searchForFacetValues).call.apply(t,[(0,o.A)(n),n.props,n.props.contextValue.store.getState().widgets].concat(i)))})),e.getSearchParameters&&n.props.contextValue.onSearchParameters(e.getSearchParameters.bind((0,o.A)(n)),{ais:n.props.contextValue,multiIndexContext:n.props.indexContextValue},n.props,e.getMetadata&&e.getMetadata.bind((0,o.A)(n)),e.displayName),n}return(0,s.A)(x,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribe=this.props.contextValue.store.subscribe((function(){e.isUnmounting||e.setState({providedProps:e.getProvidedProps(e.props)})})),t&&(this.unregisterWidget=this.props.contextValue.widgetsManager.registerWidget(this))}},{key:"shouldComponentUpdate",value:function(t,n){if("function"==typeof e.shouldComponentUpdate)return e.shouldComponentUpdate.call(this,this.props,t,this.state,n);var r=(0,g.bN)(this.props,t);return null===this.state.providedProps||null===n.providedProps?this.state.providedProps!==n.providedProps||!r:!r||!(0,g.bN)(this.state.providedProps,n.providedProps)}},{key:"componentDidUpdate",value:function(n){m()(n,this.props)||(this.setState({providedProps:this.getProvidedProps(this.props)}),t&&(this.props.contextValue.widgetsManager.update(),"function"==typeof e.transitionState&&this.props.contextValue.onSearchStateChange(e.transitionState.call(this,this.props,this.props.contextValue.store.getState().widgets,this.props.contextValue.store.getState().widgets))))}},{key:"componentWillUnmount",value:function(){if(this.isUnmounting=!0,this.unsubscribe&&this.unsubscribe(),this.unregisterWidget&&(this.unregisterWidget(),"function"==typeof e.cleanUp)){var t=e.cleanUp.call(this,this.props,this.props.contextValue.store.getState().widgets);this.props.contextValue.store.setState(b(b({},this.props.contextValue.store.getState()),{},{widgets:t})),this.props.contextValue.onSearchStateChange((0,g.tU)(t))}}},{key:"getProvidedProps",value:function(t){var n=this.props.contextValue.store.getState(),r=n.widgets,i=n.results,a=n.resultsFacetValues,s=n.searching,o=n.searchingForFacetValues,c=n.isSearchStalled,u=n.metadata,h={results:i,searching:s,searchingForFacetValues:o,isSearchStalled:c,error:n.error};return e.getProvidedProps.call(this,t,r,h,u,a)}},{key:"getSearchParameters",value:function(t){return"function"==typeof e.getSearchParameters?e.getSearchParameters.call(this,t,this.props,this.props.contextValue.store.getState().widgets):null}},{key:"getMetadata",value:function(t){return"function"==typeof e.getMetadata?e.getMetadata.call(this,this.props,t):{}}},{key:"transitionState",value:function(t,n){return"function"==typeof e.transitionState?e.transitionState.call(this,this.props,t,n):n}},{key:"render",value:function(){var t=this.props,a=(t.contextValue,(0,i.A)(t,y)),s=this.state.providedProps;if(null===s)return null;var o="function"==typeof e.refine?{refine:this.refine,createURL:this.createURL}:{},c="function"==typeof e.searchForFacetValues?{searchForItems:this.searchForFacetValues}:{};return d().createElement(n,(0,r.A)({},a,s,o,c))}}]),x}(f.Component);return(0,l.A)(v,"displayName","".concat(e.displayName,"(").concat((0,g.Mn)(n),")")),(0,l.A)(v,"$$type",e.$$type),(0,l.A)(v,"$$widgetType",p.$$widgetType),(0,l.A)(v,"propTypes",e.propTypes),(0,l.A)(v,"defaultProps",e.defaultProps),(0,l.A)(v,"_connectorDesc",e),v}}(e)(t,n);return function(e){return d().createElement(v.Cx,null,(function(t){return d().createElement(v.tv,null,(function(n){return d().createElement(p,(0,r.A)({contextValue:t,indexContextValue:n},e))}))}))}}}},52760:function(e,t,n){"use strict";n.d(t,{C:function(){return s},L:function(){return i}});var r=n(30125),i={highlightPreTag:"<ais-highlight-0000000000>",highlightPostTag:"</ais-highlight-0000000000>"};function a(e){var t=e.preTag,n=e.postTag,r=e.highlightedValue,i=(void 0===r?"":r).split(t),a=i.shift(),s=""===a?[]:[{value:a,isHighlighted:!1}];if(n===t){var o=!0;i.forEach((function(e){s.push({value:e,isHighlighted:o}),o=!o}))}else i.forEach((function(e){var t=e.split(n);s.push({value:t[0],isHighlighted:!0}),""!==t[1]&&s.push({value:t[1],isHighlighted:!1})}));return s}function s(e){var t=e.preTag,n=void 0===t?"<em>":t,i=e.postTag,s=void 0===i?"</em>":i,o=e.highlightProperty,c=e.attribute,u=e.hit;if(!u)throw new Error("`hit`, the matching record, must be provided");var h=(0,r.EV)(u[o],c)||{};return Array.isArray(h)?h.map((function(e){return a({preTag:n,postTag:s,highlightedValue:e.value})})):a({preTag:n,postTag:s,highlightedValue:h.value})}},78607:function(e,t,n){"use strict";n.d(t,{Ou:function(){return d},_1:function(){return f},ei:function(){return u},h1:function(){return c},xM:function(){return h},yO:function(){return o}});var r=n(64467),i=n(30125);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e){return u(e)?e.multiIndexContext.targetedIndex:e.ais.mainTargetedIndex}function c(e,t){if(e.results){if(e.results.hits)return e.results;var n=o(t);if(e.results[n])return e.results[n]}return null}function u(e){return e&&e.multiIndexContext}function h(e,t,n,i,a){if(u(n)){var c=o(n);return a?function(e,t,n,i,a){var o,c=i?{page:1}:void 0,u=e.indices&&e.indices[n]?s(s({},e.indices),{},(0,r.A)({},n,s(s({},e.indices[n]),{},(o={},(0,r.A)(o,a,s(s({},e.indices[n][a]),t)),(0,r.A)(o,"page",1),o)))):s(s({},e.indices),{},(0,r.A)({},n,s((0,r.A)({},a,t),c)));return s(s({},e),{},{indices:u})}(e,t,c,i,a):function(e,t,n,i){var a=i?{page:1}:void 0,o=e.indices&&e.indices[n]?s(s({},e.indices),{},(0,r.A)({},n,s(s(s({},e.indices[n]),t),a))):s(s({},e.indices),{},(0,r.A)({},n,s(s({},t),a)));return s(s({},e),{},{indices:o})}(e,t,c,i)}return e.indices&&i&&Object.keys(e.indices).forEach((function(t){e=h(e,{page:1},{multiIndexContext:{targetedIndex:t}},!0,a)})),a?function(e,t,n,i){var a=n?{page:1}:void 0;return s(s({},e),{},(0,r.A)({},i,s(s({},e[i]),t)),a)}(e,t,i,a):function(e,t,n){var r=n?{page:1}:void 0;return s(s(s({},e),t),r)}(e,t,i)}function l(e){var t=e.match(/^([^.]*)\.(.*)/);return{namespace:t&&t[1],attributeName:t&&t[2]}}function f(e,t,n,r,i){var a=o(n),s=l(r),c=s.namespace,h=s.attributeName,f={multiIndex:u(n),indexId:a,namespace:c,attributeName:h,id:r,searchState:t},d=function(e){var t=e.multiIndex,n=e.indexId,r=e.namespace,i=e.attributeName,a=e.id,s=e.searchState;return t&&r?s.indices&&s.indices[n]&&s.indices[n][r]&&Object.hasOwnProperty.call(s.indices[n][r],i):t?s.indices&&s.indices[n]&&Object.hasOwnProperty.call(s.indices[n],a):r?s[r]&&Object.hasOwnProperty.call(s[r],i):Object.hasOwnProperty.call(s,a)}(f);return d?function(e){var t=e.multiIndex,n=e.indexId,r=e.namespace,i=e.attributeName,a=e.id,s=e.searchState;return t&&r?s.indices[n][r][i]:t?s.indices[n][a]:r?s[r][i]:s[a]}(f):e.defaultRefinement?e.defaultRefinement:i}function d(e,t,n){var a=o(t),c=l(n),h=c.namespace,f=c.attributeName;return u(t)&&Boolean(e.indices)?function(e){var t=e.searchState,n=e.indexId,a=e.id,o=e.namespace,c=e.attribute,u=t.indices[n];return o&&u?s(s({},t),{},{indices:s(s({},t.indices),{},(0,r.A)({},n,s(s({},u),{},(0,r.A)({},o,(0,i.cJ)(u[o],[c])))))}):u?s(s({},t),{},{indices:s(s({},t.indices),{},(0,r.A)({},n,(0,i.cJ)(u,[a])))}):t}({attribute:f,searchState:e,indexId:a,id:n,namespace:h}):function(e){var t=e.searchState,n=e.id,a=e.namespace,o=e.attribute;return a?s(s({},t),{},(0,r.A)({},a,(0,i.cJ)(t[a],[o]))):(0,i.cJ)(t,[n])}({attribute:f,searchState:e,id:n,namespace:h})}},23013:function(e,t,n){"use strict";n.d(t,{A:function(){return p}});var r=n(58168),i=n(23029),a=n(92901),s=n(9417),o=n(85501),c=n(56822),u=n(53954),h=n(64467),l=n(51609),f=n.n(l);var d=function(e){return function(t,n,r){var i=t[n];if(i)for(var a=0,s=Object.keys(i);a<s.length;a++){var o=s[a];if(-1===e.indexOf(o))return new Error("Unknown `".concat(n,"` key `").concat(o,"`. Check the render method ")+"of `".concat(r,"`."))}}};function p(e){return function(t){var n=function(n){(0,o.A)(m,n);var l,d,p=(l=m,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,u.A)(l);if(d){var n=(0,u.A)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.A)(this,e)});function m(){var t;(0,i.A)(this,m);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=p.call.apply(p,[this].concat(r)),(0,h.A)((0,s.A)(t),"translate",(function(n){var r=t.props.translations,i=r&&r.hasOwnProperty(n)?r[n]:e[n];if("function"==typeof i){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return i.apply(void 0,s)}return i})),t}return(0,a.A)(m,[{key:"render",value:function(){return f().createElement(t,(0,r.A)({translate:this.translate},this.props))}}]),m}(l.Component),p=t.displayName||t.name||"UnknownComponent";return n.displayName="Translatable(".concat(p,")"),n.propTypes={translations:d(Object.keys(e))},n}}},30125:function(e,t,n){"use strict";n.d(t,{EV:function(){return m},Mn:function(){return c},PD:function(){return d},Tb:function(){return g},Zp:function(){return f},bN:function(){return o},cJ:function(){return p},tU:function(){return l},v6:function(){return h}});var r=n(64467),i=n(82284);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var o=function(e,t){if(e===t)return!0;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty,a=0;a<n.length;a++)if(!i.call(t,n[a])||e[n[a]]!==t[n[a]])return!1;return!0},c=function(e){return e.displayName||e.name||"UnknownComponent"},u=Promise.resolve(),h=function(e){u.then(e)},l=function e(t){return Object.keys(t).forEach((function(n){var r,a=t[n];(function(e){return"object"===(0,i.A)(e)&&null!==e&&!Array.isArray(e)})(a)&&((r=a)&&Object.keys(r).length>0?e(a):delete t[n])})),t};function f(e,t,n){return e.map((function(e,r){return s(s({},e),{},{__position:t*n+r+1})}))}function d(e,t){return t?e.map((function(e){return s(s({},e),{},{__queryID:t})})):e}function p(e,t){if(null==e)return{};for(var n={},r=Object.keys(e),i=0;i<r.length;i++){var a=r[i];t.indexOf(a)>=0||(n[a]=e[a])}return n}var m=function(e,t){return(Array.isArray(t)?t:t.replace(/\[(\d+)]/g,".$1").split(".")).reduce((function(e,t){return e?e[t]:void 0}),e)};function g(e){return e.replace(/^\\-/,"-")}},86030:function(e,t,n){"use strict";n.d(t,{A:function(){return f}});var r=n(64467),i=n(80045),a=n(30125),s=n(65723),o=n(78607),c=["children","contextValue","indexContextValue"],u=["children","contextValue","indexContextValue"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=(0,s.A)({displayName:"AlgoliaConfigure",$$type:"ais.configure",getProvidedProps:function(){return{}},getSearchParameters:function(e,t){t.children,t.contextValue,t.indexContextValue;var n=(0,i.A)(t,c);return e.setQueryParameters(n)},transitionState:function(e,t,n){var s="configure",c=(e.children,e.contextValue,e.indexContextValue,(0,i.A)(e,u)),h=Object.keys(e),f=this._props?Object.keys(this._props).filter((function(e){return-1===h.indexOf(e)})):[];this._props=e;var d=(0,r.A)({},s,l(l({},(0,a.cJ)(n[s],f)),c));return(0,o.xM)(n,d,{ais:e.contextValue,multiIndexContext:e.indexContextValue})},cleanUp:function(e,t){var n="configure",i=(0,o.yO)({ais:e.contextValue,multiIndexContext:e.indexContextValue}),a=(0,o.ei)({ais:e.contextValue,multiIndexContext:e.indexContextValue})&&t.indices?t.indices[i]:t,s=(a&&a[n]?Object.keys(a[n]):[]).reduce((function(t,r){return e[r]||(t[r]=a[n][r]),t}),{}),c=(0,r.A)({},n,s);return(0,o.xM)(t,c,{ais:e.contextValue,multiIndexContext:e.indexContextValue})}})((function(){return null}),{$$widgetType:"ais.configure"})},74080:function(e,t,n){"use strict";n.d(t,{A:function(){return B}});var r=n(23029),i=n(92901),a=n(9417),s=n(85501),o=n(56822),c=n(53954),u=n(64467),h=n(51609),l=n.n(h),f=n(30115),d=n.n(f),p=n(5556),m=n.n(p),g=n(80045),v=n(74103),y=n.n(v),R=n(30125),b=n(52760),x=n(78607),F="6.30.2",_=["resultsFacetValues"],S=["resultsFacetValues"],P=["resultsFacetValues"];function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,u.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){"function"==typeof e.addAlgoliaAgent&&(e.addAlgoliaAgent("react (".concat(h.version,")")),e.addAlgoliaAgent("react-instantsearch (".concat(F,")")))}var E=function(e){return(0,x.ei)({ais:e.props.contextValue,multiIndexContext:e.props.indexContextValue})},j=function(e,t){return e.props.indexContextValue.targetedIndex===t},C=function(e){return Boolean(e.props.indexId)},T=function(e,t){return e.props.indexId===t},I=function(e,t){var n=C(e),r=C(t);return n&&!r?-1:!n&&r?1:0};function N(e){var t=e.indexName,n=e.initialState,r=void 0===n?{}:n,i=e.searchClient,a=e.resultsState,s=e.stalledSearchDelay,o=y()(i,t,A({},b.L));w(i),o.on("search",(function(){l||(l=setTimeout((function(){var e=m.getState(),t=(e.resultsFacetValues,(0,g.A)(e,P));m.setState(A(A({},t),{},{isSearchStalled:!0}))}),s))})).on("result",O({indexId:t})).on("error",N);var c,h=!1,l=null,f=o.state,d=function(e){var t=[],n=!1;function r(){n||(n=!0,(0,R.v6)((function(){var e;n=!1,e=v(m.getState().widgets),m.setState(A(A({},m.getState()),{},{metadata:e,searching:!0})),F()})))}return{registerWidget:function(e){return t.push(e),r(),function(){t.splice(t.indexOf(e),1),r()}},update:r,getWidgets:function(){return t}}}();!function(e,t){if(t&&(e.transporter&&!e._cacheHydrated||e._useCache&&"function"==typeof e.addAlgoliaAgent)){if(e.transporter&&!e._cacheHydrated){e._cacheHydrated=!0;var n=e.search;e.search=function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var s=t.map((function(e){return A(A({},e),{},{params:(t=e.params,Object.keys(t).map((function(e){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0;return e.replace(/%s/g,(function(){return encodeURIComponent(n[i++])}))}("%s=%s",e,(n=t[e],"[object Object]"===Object.prototype.toString.call(n)||"[object Array]"===Object.prototype.toString.call(n)?JSON.stringify(t[e]):t[e]));var n})).join("&"))});var t}));return e.transporter.responsesCache.get({method:"search",args:[s].concat(i)},(function(){return n.apply(void 0,[t].concat(i))}))}}Array.isArray(t.results)?function(e,t){if(e.transporter)e.transporter.responsesCache.set({method:"search",args:[t.reduce((function(e,t){return e.concat(t.rawResults.map((function(e){return{indexName:e.index,params:e.params}})))}),[])]},{results:t.reduce((function(e,t){return e.concat(t.rawResults)}),[])});else{var n="/1/indexes/*/queries_body_".concat(JSON.stringify({requests:t.reduce((function(e,t){return e.concat(t.rawResults.map((function(e){return{indexName:e.index,params:e.params}})))}),[])}));e.cache=A(A({},e.cache),{},(0,u.A)({},n,JSON.stringify({results:t.reduce((function(e,t){return e.concat(t.rawResults)}),[])})))}}(e,t.results):function(e,t){if(e.transporter)e.transporter.responsesCache.set({method:"search",args:[t.rawResults.map((function(e){return{indexName:e.index,params:e.params}}))]},{results:t.rawResults});else{var n="/1/indexes/*/queries_body_".concat(JSON.stringify({requests:t.rawResults.map((function(e){return{indexName:e.index,params:e.params}}))}));e.cache=A(A({},e.cache),{},(0,u.A)({},n,JSON.stringify({results:t.rawResults})))}}(e,t)}}(i,a);var p,m=function(e){var t=e,n=[];return{getState:function(){return t},setState:function(e){t=e,n.forEach((function(e){return e()}))},subscribe:function(e){return n.push(e),function(){n.splice(n.indexOf(e),1)}}}}({widgets:r,metadata:H(a),results:(p=a,p?Array.isArray(p.results)?p.results.reduce((function(e,t){return A(A({},e),{},(0,u.A)({},t._internalIndexId,new(y().SearchResults)(new(y().SearchParameters)(t.state),t.rawResults)))}),{}):new(y().SearchResults)(new(y().SearchParameters)(p.state),p.rawResults):null),error:null,searching:!1,isSearchStalled:!0,searchingForFacetValues:!1});function v(e){return d.getWidgets().filter((function(e){return Boolean(e.getMetadata)})).map((function(t){return t.getMetadata(e)}))}function x(){var e=d.getWidgets().filter((function(e){return Boolean(e.getSearchParameters)})).filter((function(e){return!E(e)&&!C(e)})).reduce((function(e,t){return t.getSearchParameters(e)}),f),n=d.getWidgets().filter((function(e){return Boolean(e.getSearchParameters)})).filter((function(e){var n=E(e)&&j(e,t),r=C(e)&&T(e,t);return n||r})).sort(I).reduce((function(e,t){return t.getSearchParameters(e)}),e),r=d.getWidgets().filter((function(e){return Boolean(e.getSearchParameters)})).filter((function(e){var n=E(e)&&!j(e,t),r=C(e)&&!T(e,t);return n||r})).sort(I).reduce((function(e,t){var n=E(t)?t.props.indexContextValue.targetedIndex:t.props.indexId,r=e[n]||[];return A(A({},e),{},(0,u.A)({},n,r.concat(t)))}),{});return{mainParameters:n,derivedParameters:Object.keys(r).map((function(t){return{parameters:r[t].reduce((function(e,t){return t.getSearchParameters(e)}),e),indexId:t}}))}}function F(){if(!h){var e=x(o.state),t=e.mainParameters,n=e.derivedParameters;c=n.length+1,o.derivedHelpers.slice().forEach((function(e){e.detach()})),n.forEach((function(e){var t=e.indexId,n=e.parameters;o.derive((function(){return n})).on("result",O({indexId:t})).on("error",N)})),o.setState(t),o.search()}}function O(e){var t=e.indexId;return function(e){c--;var n=m.getState(),r=!o.derivedHelpers.length,i=n.results?n.results:{};i=!r&&i.getFacetByName?{}:i,i=r?e.results:A(A({},i),{},(0,u.A)({},t,e.results));var a=m.getState(),s=a.isSearchStalled;o.hasPendingRequests()||(clearTimeout(l),l=null,s=!1),a.resultsFacetValues;var h=(0,g.A)(a,_);m.setState(A(A({},h),{},{results:i,isSearchStalled:s,searching:c>0,error:null}))}}function N(e){var t=e.error,n=m.getState(),r=n.isSearchStalled;o.hasPendingRequests()||(clearTimeout(l),r=!1),n.resultsFacetValues;var i=(0,g.A)(n,S);m.setState(A(A({},i),{},{isSearchStalled:r,error:t,searching:!1}))}return{store:m,widgetsManager:d,getWidgetsIds:function(){return m.getState().metadata.reduce((function(e,t){return void 0!==t.id?e.concat(t.id):e}),[])},getSearchParameters:x,onSearchForFacetValues:function(e){var t=e.facetName,n=e.query,r=e.maxFacetHits,i=void 0===r?10:r,a=Math.max(1,Math.min(i,100));m.setState(A(A({},m.getState()),{},{searchingForFacetValues:!0})),o.searchForFacetValues(t,n,a).then((function(e){var r;m.setState(A(A({},m.getState()),{},{error:null,searchingForFacetValues:!1,resultsFacetValues:A(A({},m.getState().resultsFacetValues),{},(r={},(0,u.A)(r,t,e.facetHits),(0,u.A)(r,"query",n),r))}))}),(function(e){m.setState(A(A({},m.getState()),{},{searchingForFacetValues:!1,error:e}))})).catch((function(e){setTimeout((function(){throw e}))}))},onExternalStateUpdate:function(e){var t=v(e);m.setState(A(A({},m.getState()),{},{widgets:e,metadata:t,searching:!0})),F()},transitionState:function(e){var t=m.getState().widgets;return d.getWidgets().filter((function(e){return Boolean(e.transitionState)})).reduce((function(e,n){return n.transitionState(t,e)}),e)},updateClient:function(e){w(e),o.setClient(e),F()},updateIndex:function(e){f=f.setIndex(e)},clearCache:function(){o.clearCache(),F()},skipSearch:function(){h=!0}}}function H(e){return e?e.metadata.map((function(e){return A(A({value:function(){return{}}},e),{},{items:e.items&&e.items.map((function(e){return A(A({value:function(){return{}}},e),{},{items:e.items&&e.items.map((function(e){return A({value:function(){return{}}},e)}))})}))})})):[]}var V=n(59559),k=n(82284);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,u.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e){return Boolean(e.searchState)}var q=function(e){(0,s.A)(p,e);var t,n,f=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.A)(t);if(n){var i=(0,c.A)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,o.A)(this,e)});function p(e){var t;(0,r.A)(this,p),t=f.call(this,e),(0,u.A)((0,a.A)(t),"isUnmounting",!1);var n=N({indexName:t.props.indexName,searchClient:t.props.searchClient,initialState:t.props.searchState||{},resultsState:t.props.resultsState,stalledSearchDelay:t.props.stalledSearchDelay}),i={store:n.store,widgetsManager:n.widgetsManager,mainTargetedIndex:t.props.indexName,onInternalStateUpdate:t.onWidgetsInternalStateUpdate.bind((0,a.A)(t)),createHrefForState:t.createHrefForState.bind((0,a.A)(t)),onSearchForFacetValues:t.onSearchForFacetValues.bind((0,a.A)(t)),onSearchStateChange:t.onSearchStateChange.bind((0,a.A)(t)),onSearchParameters:t.onSearchParameters.bind((0,a.A)(t))};return t.state={isControlled:D(t.props),instantSearchManager:n,contextValue:i},t}return(0,i.A)(p,[{key:"componentDidUpdate",value:function(e){var t=D(e);if(t&&!this.state.isControlled)throw new Error("You can't switch <InstantSearch> from being controlled to uncontrolled");if(!t&&this.state.isControlled)throw new Error("You can't switch <InstantSearch> from being uncontrolled to controlled");this.props.refresh!==e.refresh&&this.props.refresh&&this.state.instantSearchManager.clearCache(),e.indexName!==this.props.indexName&&this.state.instantSearchManager.updateIndex(this.props.indexName),e.searchClient!==this.props.searchClient&&this.state.instantSearchManager.updateClient(this.props.searchClient)}},{key:"componentDidMount",value:function(){"object"===("undefined"==typeof window?"undefined":(0,k.A)(window))&&"object"===(0,k.A)(window.navigator)&&"string"==typeof window.navigator.userAgent&&window.navigator.userAgent.includes("Algolia Crawler")&&"object"===(0,k.A)(window.document)&&function(e,t){var n=document.createElement("meta"),r=document.querySelector("head");n.name="algolia:metadata";var i=function(e,t){var n=["contextValue","indexContextValue"],r=e.map((function(e){var t=e.props,r=e.constructor,i=r._connectorDesc||{},a=i.defaultProps,s=void 0===a?{}:a,o=i.displayName;return{displayName:void 0===o?r.displayName:o,$$type:r.$$type,$$widgetType:r.$$widgetType,params:Object.keys(t).filter((function(e){return!n.includes(e)&&s[e]!==t[e]&&void 0!==t[e]}))}})),i=t;return{ua:i.transporter&&i.transporter.userAgent?i.transporter.userAgent.value:i._ua,widgets:r}}(e,t);n.content=JSON.stringify(i),r.appendChild(n)}(this.state.instantSearchManager.widgetsManager.getWidgets(),this.props.searchClient)}},{key:"componentWillUnmount",value:function(){this.isUnmounting=!0,this.state.instantSearchManager.skipSearch()}},{key:"createHrefForState",value:function(e){return e=this.state.instantSearchManager.transitionState(e),this.state.isControlled&&this.props.createURL?this.props.createURL(e,this.getKnownKeys()):"#"}},{key:"onWidgetsInternalStateUpdate",value:function(e){e=this.state.instantSearchManager.transitionState(e),this.onSearchStateChange(e),this.state.isControlled||this.state.instantSearchManager.onExternalStateUpdate(e)}},{key:"onSearchStateChange",value:function(e){this.props.onSearchStateChange&&!this.isUnmounting&&this.props.onSearchStateChange(e)}},{key:"onSearchParameters",value:function(e,t,n,r,i){if(this.props.onSearchParameters){var a=this.props.searchState?this.props.searchState:{};this.props.onSearchParameters(e,t,n,a)}if(this.props.widgetsCollector){var s=this.props.searchState?this.props.searchState:{};this.props.widgetsCollector({getSearchParameters:e,getMetadata:r,context:t,props:n,searchState:s,displayName:i})}}},{key:"onSearchForFacetValues",value:function(e){this.state.instantSearchManager.onSearchForFacetValues(e)}},{key:"getKnownKeys",value:function(){return this.state.instantSearchManager.getWidgetsIds()}},{key:"render",value:function(){return 0===h.Children.count(this.props.children)?null:l().createElement(V.vi,{value:this.state.contextValue},this.props.children)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=D(e),r=t.instantSearchManager.store.getState().widgets,i=e.searchState;return n&&!d()(r,i)&&t.instantSearchManager.onExternalStateUpdate(e.searchState),{isControlled:n,contextValue:M(M({},t.contextValue),{},{mainTargetedIndex:e.indexName})}}}]),p}(h.Component);(0,u.A)(q,"defaultProps",{stalledSearchDelay:200,refresh:!1}),(0,u.A)(q,"propTypes",{indexName:m().string.isRequired,searchClient:m().shape({search:m().func.isRequired,searchForFacetValues:m().func,addAlgoliaAgent:m().func,clearCache:m().func}).isRequired,createURL:m().func,refresh:m().bool,searchState:m().object,onSearchStateChange:m().func,onSearchParameters:m().func,widgetsCollector:m().func,resultsState:m().oneOfType([m().object,m().array]),children:m().node,stalledSearchDelay:m().number});var B=q},57897:function(e,t,n){"use strict";var r=n(58168),i=n(23029),a=n(92901),s=n(9417),o=n(85501),c=n(56822),u=n(53954),h=n(64467),l=n(51609),f=n.n(l),d=n(5556),p=n.n(d),m=n(32485),g=n.n(m),v=n(23013);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,h.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=(0,n(28970).p)("SearchBox"),x=f().createElement("svg",{width:"18",height:"18",viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#444",className:b("loadingIcon")},f().createElement("g",{fill:"none",fillRule:"evenodd"},f().createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},f().createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),f().createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},f().createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"}))))),F=f().createElement("svg",{className:b("resetIcon"),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",width:"10",height:"10"},f().createElement("path",{d:"M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z"})),_=f().createElement("svg",{className:b("submitIcon"),xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 40 40"},f().createElement("path",{d:"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"})),S=function(e){(0,o.A)(d,e);var t,n,l=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.A)(t);if(n){var i=(0,u.A)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,c.A)(this,e)});function d(e){var t;return(0,i.A)(this,d),t=l.call(this),(0,h.A)((0,s.A)(t),"getQuery",(function(){return t.props.searchAsYouType?t.props.currentRefinement:t.state.query})),(0,h.A)((0,s.A)(t),"onInputMount",(function(e){t.input=e,t.props.inputRef&&("function"==typeof t.props.inputRef?t.props.inputRef(e):t.props.inputRef.current=e)})),(0,h.A)((0,s.A)(t),"onKeyDown",(function(e){if(t.props.focusShortcuts){var n=t.props.focusShortcuts.map((function(e){return"string"==typeof e?e.toUpperCase().charCodeAt(0):e})),r=e.target||e.srcElement,i=r.tagName;if(!r.isContentEditable&&"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i){var a=e.which||e.keyCode;-1!==n.indexOf(a)&&(t.input.focus(),e.stopPropagation(),e.preventDefault())}}})),(0,h.A)((0,s.A)(t),"onSubmit",(function(e){e.preventDefault(),e.stopPropagation(),t.input.blur();var n=t.props,r=n.refine;return n.searchAsYouType||r(t.getQuery()),!1})),(0,h.A)((0,s.A)(t),"onChange",(function(e){var n=t.props,r=n.searchAsYouType,i=n.refine,a=n.onChange,s=e.target.value;r?i(s):t.setState({query:s}),a&&a(e)})),(0,h.A)((0,s.A)(t),"onReset",(function(e){var n=t.props,r=n.searchAsYouType,i=n.refine,a=n.onReset;i(""),t.input.focus(),r||t.setState({query:""}),a&&a(e)})),t.state={query:e.searchAsYouType?null:e.currentRefinement},t}return(0,a.A)(d,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown)}},{key:"componentDidUpdate",value:function(e){this.props.searchAsYouType||e.currentRefinement===this.props.currentRefinement||this.setState({query:this.props.currentRefinement})}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,i=t.inputId,a=t.translate,s=t.autoFocus,o=t.loadingIndicator,c=t.submit,u=t.reset,l=this.getQuery(),d=Object.keys(this.props).reduce((function(t,n){return-1===["onsubmit","onreset","onchange"].indexOf(n.toLowerCase())&&0===n.indexOf("on")?R(R({},t),{},(0,h.A)({},n,e.props[n])):t}),{}),p=this.props.showLoadingIndicator&&this.props.isSearchStalled;return f().createElement("div",{className:g()(b(""),n)},f().createElement("form",{noValidate:!0,onSubmit:this.props.onSubmit?this.props.onSubmit:this.onSubmit,onReset:this.onReset,className:b("form",p&&"form--stalledSearch"),action:"",role:"search"},f().createElement("input",(0,r.A)({ref:this.onInputMount,id:i,type:"search",placeholder:a("placeholder"),autoFocus:s,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",required:!0,maxLength:"512",value:l,onChange:this.onChange},d,{className:b("input")})),f().createElement("button",{type:"submit",title:a("submitTitle"),className:b("submit")},c),f().createElement("button",{type:"reset",title:a("resetTitle"),className:b("reset"),hidden:!l||p},u),this.props.showLoadingIndicator&&f().createElement("span",{hidden:!p,className:b("loadingIndicator")},o)))}}]),d}(l.Component);(0,h.A)(S,"propTypes",{currentRefinement:p().string,className:p().string,refine:p().func.isRequired,translate:p().func.isRequired,loadingIndicator:p().node,reset:p().node,submit:p().node,focusShortcuts:p().arrayOf(p().oneOfType([p().string,p().number])),autoFocus:p().bool,searchAsYouType:p().bool,onSubmit:p().func,onReset:p().func,onChange:p().func,isSearchStalled:p().bool,showLoadingIndicator:p().bool,inputRef:p().oneOfType([p().func,p().exact({current:p().object})]),inputId:p().string}),(0,h.A)(S,"defaultProps",{currentRefinement:"",className:"",focusShortcuts:["s","/"],autoFocus:!1,searchAsYouType:!0,showLoadingIndicator:!1,isSearchStalled:!1,loadingIndicator:x,reset:F,submit:_}),t.A=(0,v.A)({resetTitle:"Clear the search query.",submitTitle:"Submit your search query.",placeholder:"Search here"})(S)},28970:function(e,t,n){"use strict";n.d(t,{p:function(){return a},sP:function(){return s}});var r=n(32485),i=n.n(r),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ais";return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var s=r.filter((function(e){return e||""===e})).map((function(n){var r="".concat(t,"-").concat(e);return n?"".concat(r,"-").concat(n):r}));return i()(s)}},s=function(e){var t=1===e.button;return Boolean(t||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}},78233:function(e,t,n){"use strict";n.d(t,{A:function(){return W}});var r=n(51609),i=n.n(r),a=n(46446),s=n(23029),o=n(92901),c=n(85501),u=n(56822),h=n(53954),l=n(64467),f=n(5556),d=n.n(f),p=n(9417),m=n(32485),g=n.n(m),v=n(28970);var y=(0,v.p)("Panel"),R=(0,r.createContext)((function(){})),b=R.Consumer,x=R.Provider,F=function(e){(0,c.A)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,h.A)(t);if(n){var i=(0,h.A)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,u.A)(this,e)});function a(){var e;(0,s.A)(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),(0,l.A)((0,p.A)(e),"state",{canRefine:!0}),(0,l.A)((0,p.A)(e),"setCanRefine",(function(t){e.setState({canRefine:t})})),e}return(0,o.A)(a,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.header,a=e.footer,s=this.state.canRefine;return i().createElement("div",{className:g()(y("",!s&&"-noRefinement"),n)},r&&i().createElement("div",{className:y("header")},r),i().createElement("div",{className:y("body")},i().createElement(x,{value:this.setCanRefine},t)),a&&i().createElement("div",{className:y("footer")},a))}}]),a}(r.Component);(0,l.A)(F,"propTypes",{children:d().node.isRequired,className:d().string,header:d().node,footer:d().node}),(0,l.A)(F,"defaultProps",{className:"",header:null,footer:null});var _=function(e){(0,c.A)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,h.A)(t);if(n){var i=(0,h.A)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,u.A)(this,e)});function i(){return(0,s.A)(this,i),r.apply(this,arguments)}return(0,o.A)(i,[{key:"componentDidMount",value:function(){this.props.setCanRefine(this.props.canRefine)}},{key:"componentDidUpdate",value:function(e){e.canRefine!==this.props.canRefine&&this.props.setCanRefine(this.props.canRefine)}},{key:"render",value:function(){return this.props.children}}]),i}(r.Component);(0,l.A)(_,"propTypes",{children:d().node.isRequired,canRefine:d().bool.isRequired,setCanRefine:d().func.isRequired});var S=function(e){var t=e.canRefine,n=e.children;return i().createElement(b,null,(function(e){return i().createElement(_,{setCanRefine:e,canRefine:t},n)}))};S.propTypes={canRefine:d().bool.isRequired,children:d().node.isRequired};var P=S,O=n(23013),A=n(65723),w=n(52760),E=function(e){var t=e.attribute,n=e.hit,r=e.highlightProperty,i=e.preTag,a=void 0===i?w.L.highlightPreTag:i,s=e.postTag,o=void 0===s?w.L.highlightPostTag:s;return(0,w.C)({attribute:t,highlightProperty:r,hit:n,preTag:a,postTag:o})},j=(0,A.A)({displayName:"AlgoliaHighlighter",$$type:"ais.highlighter",propTypes:{},getProvidedProps:function(){return{highlight:E}}}),C=n(58168),T=function(e){var t=e.cx,n=e.value,r=e.highlightedTagName,a=e.isHighlighted,s=e.nonHighlightedTagName,o=a?r:s,c=a?"highlighted":"nonHighlighted";return i().createElement(o,{className:t(c)},n)};T.propTypes={cx:d().func.isRequired,value:d().string.isRequired,isHighlighted:d().bool.isRequired,highlightedTagName:d().string.isRequired,nonHighlightedTagName:d().string.isRequired};var I=function(e){var t=e.cx,n=e.hit,r=e.attribute,a=e.highlight,s=e.highlightProperty,o=e.tagName,c=e.nonHighlightedTagName,u=e.separator,h=e.className,l=a({hit:n,attribute:r,highlightProperty:s});return i().createElement("span",{className:g()(t(""),h)},l.map((function(e,n){if(Array.isArray(e)){var r=n===l.length-1;return i().createElement("span",{key:n},e.map((function(e,n){return i().createElement(T,{cx:t,key:n,value:e.value,highlightedTagName:o,nonHighlightedTagName:c,isHighlighted:e.isHighlighted})})),!r&&i().createElement("span",{className:t("separator")},u))}return i().createElement(T,{cx:t,key:n,value:e.value,highlightedTagName:o,nonHighlightedTagName:c,isHighlighted:e.isHighlighted})})))};I.propTypes={cx:d().func.isRequired,hit:d().object.isRequired,attribute:d().oneOfType([d().arrayOf(d().string),d().string]).isRequired,highlight:d().func.isRequired,highlightProperty:d().string.isRequired,tagName:d().string,nonHighlightedTagName:d().string,className:d().string,separator:d().node},I.defaultProps={tagName:"em",nonHighlightedTagName:"span",className:"",separator:", "};var N=I,H=(0,v.p)("Highlight"),V=j((function(e){return i().createElement(N,(0,C.A)({},e,{highlightProperty:"_highlightResult",cx:H}))}),{$$widgetType:"ais.highlight"}),k=n(57897);var L=d().arrayOf(d().shape({value:d().any,label:d().node.isRequired,items:function(){return L.apply(void 0,arguments)}})),M=function(e){(0,c.A)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,h.A)(t);if(n){var i=(0,h.A)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,u.A)(this,e)});function a(){var e;return(0,s.A)(this,a),e=r.call(this),(0,l.A)((0,p.A)(e),"onShowMoreClick",(function(){e.setState((function(e){return{extended:!e.extended}}))})),(0,l.A)((0,p.A)(e),"getLimit",(function(){var t=e.props,n=t.limit,r=t.showMoreLimit;return e.state.extended?r:n})),(0,l.A)((0,p.A)(e),"resetQuery",(function(){e.setState({query:""})})),(0,l.A)((0,p.A)(e),"renderItem",(function(t,n){var r=t.items&&Boolean(t.items.length);return i().createElement("li",{key:t.key||t.label,className:e.props.cx("item",t.isRefined&&"item--selected",t.noRefinement&&"item--noRefinement",r&&"item--parent")},e.props.renderItem(t,n),r&&i().createElement("ul",{className:e.props.cx("list","list--child")},t.items.slice(0,e.getLimit()).map((function(n){return e.renderItem(n,t)}))))})),e.state={extended:!1,query:""},e}return(0,o.A)(a,[{key:"renderShowMore",value:function(){var e=this.props,t=e.showMore,n=e.translate,r=e.cx,a=this.state.extended,s=this.props.limit>=this.props.items.length;return t?i().createElement("button",{disabled:s,className:r("showMore",s&&"showMore--disabled"),onClick:this.onShowMoreClick},n("showMore",a)):null}},{key:"renderSearchBox",value:function(){var e=this,t=this.props,n=t.cx,r=t.searchForItems,a=t.isFromSearch,s=t.translate,o=t.items,c=t.selectItem,u=0===o.length&&""!==this.state.query?i().createElement("div",{className:n("noResults")},s("noResults")):null;return i().createElement("div",{className:n("searchBox")},i().createElement(k.A,{currentRefinement:this.state.query,refine:function(t){e.setState({query:t}),r(t)},focusShortcuts:[],translate:s,onSubmit:function(t){t.preventDefault(),t.stopPropagation(),a&&o.length>0&&c(o[0],e.resetQuery)}}),u)}},{key:"render",value:function(){var e=this,t=this.props,n=t.cx,r=t.items,a=t.className,s=t.searchable,o=t.canRefine,c=s?this.renderSearchBox():null,u=g()(n("",!o&&"-noRefinement"),a);return 0===r.length?i().createElement("div",{className:u},c):i().createElement("div",{className:u},c,i().createElement("ul",{className:n("list",!o&&"list--noRefinement")},r.slice(0,this.getLimit()).map((function(t){return e.renderItem(t,e.resetQuery)}))),this.renderShowMore())}}]),a}(r.Component);(0,l.A)(M,"propTypes",{cx:d().func.isRequired,translate:d().func,items:L,renderItem:d().func.isRequired,selectItem:d().func,className:d().string,showMore:d().bool,limit:d().number,showMoreLimit:d().number,show:d().func,searchForItems:d().func,searchable:d().bool,isFromSearch:d().bool,canRefine:d().bool}),(0,l.A)(M,"defaultProps",{className:"",isFromSearch:!1});var D=M;var q=function(e){(0,c.A)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,h.A)(t);if(n){var i=(0,h.A)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,u.A)(this,e)});function a(){var e;(0,s.A)(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e=r.call.apply(r,[this].concat(n)),(0,l.A)((0,p.A)(e),"onClick",(function(t){(0,v.sP)(t)||(e.props.onClick(),t.preventDefault())})),e}return(0,o.A)(a,[{key:"render",value:function(){return i().createElement("a",(0,C.A)({},this.props,{onClick:this.onClick}))}}]),a}(r.Component);(0,l.A)(q,"propTypes",{onClick:d().func.isRequired});var B=(0,v.p)("Menu"),$=function(e){(0,c.A)(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,h.A)(t);if(n){var i=(0,h.A)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,u.A)(this,e)});function a(){var e;(0,s.A)(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e=r.call.apply(r,[this].concat(n)),(0,l.A)((0,p.A)(e),"renderItem",(function(t,n){var r=e.props.createURL,a=e.props.isFromSearch?i().createElement(V,{attribute:"label",hit:t}):t.label;return i().createElement(q,{className:B("link"),onClick:function(){return e.selectItem(t,n)},href:r(t.value)},i().createElement("span",{className:B("label")},a)," ",i().createElement("span",{className:B("count")},t.count))})),(0,l.A)((0,p.A)(e),"selectItem",(function(t,n){n(),e.props.refine(t.value)})),e}return(0,o.A)(a,[{key:"render",value:function(){var e=this.props,t=e.translate,n=e.items,r=e.showMore,a=e.limit,s=e.showMoreLimit,o=e.isFromSearch,c=e.searchForItems,u=e.searchable,h=e.canRefine,l=e.className;return i().createElement(D,{renderItem:this.renderItem,selectItem:this.selectItem,cx:B,translate:t,items:n,showMore:r,limit:a,showMoreLimit:s,isFromSearch:o,searchForItems:c,searchable:u,canRefine:h,className:l})}}]),a}(r.Component);(0,l.A)($,"propTypes",{translate:d().func.isRequired,refine:d().func.isRequired,searchForItems:d().func.isRequired,searchable:d().bool,createURL:d().func.isRequired,items:d().arrayOf(d().shape({label:d().string.isRequired,value:d().string.isRequired,count:d().number.isRequired,isRefined:d().bool.isRequired})),isFromSearch:d().bool.isRequired,canRefine:d().bool.isRequired,showMore:d().bool,limit:d().number,showMoreLimit:d().number,transformItems:d().func,className:d().string}),(0,l.A)($,"defaultProps",{className:""});var Q=(0,O.A)({showMore:function(e){return e?"Show less":"Show more"},noResults:"No results",submit:null,reset:null,resetTitle:"Clear the search query.",submitTitle:"Submit your search query.",placeholder:"Search here"})($),W=(0,a.A)((function(e){return i().createElement(P,e,i().createElement(Q,e))}),{$$widgetType:"ais.menu"})},81895:function(e,t,n){"use strict";n.d(t,{A:function(){return h}});var r=n(64467),i=n(5556),a=n.n(i),s=n(65723),o=n(78607);function c(e,t,n){return(0,o._1)(e,t,n,"query","")||""}function u(e,t,n,i){var a=(0,r.A)({},"query",n);return(0,o.xM)(t,a,i,!0)}var h=(0,s.A)({displayName:"AlgoliaSearchBox",$$type:"ais.searchBox",propTypes:{defaultRefinement:a().string},getProvidedProps:function(e,t,n){return{currentRefinement:c(e,t,{ais:e.contextValue,multiIndexContext:e.indexContextValue}),isSearchStalled:n.isSearchStalled}},refine:function(e,t,n){return u(0,t,n,{ais:e.contextValue,multiIndexContext:e.indexContextValue})},cleanUp:function(e,t){return function(e,t,n){return(0,o.Ou)(t,n,"query")}(0,t,{ais:e.contextValue,multiIndexContext:e.indexContextValue})},getSearchParameters:function(e,t,n){return e.setQuery(c(t,n,{ais:t.contextValue,multiIndexContext:t.indexContextValue}))},getMetadata:function(e,t){var n="query",r=c(e,t,{ais:e.contextValue,multiIndexContext:e.indexContextValue});return{id:n,index:(0,o.yO)({ais:e.contextValue,multiIndexContext:e.indexContextValue}),items:null===r?[]:[{label:"".concat(n,": ").concat(r),value:function(t){return u(0,t,"",{ais:e.contextValue,multiIndexContext:e.indexContextValue})},currentRefinement:r}]}}})(n(57897).A,{$$widgetType:"ais.searchBox"})},21962:function(e,t,n){"use strict";n.d(t,{A:function(){return m}});var r=n(65723),i=n(78607),a=(0,r.A)({displayName:"AlgoliaStats",$$type:"ais.stats",getProvidedProps:function(e,t,n){var r=(0,i.h1)(n,{ais:e.contextValue,multiIndexContext:e.indexContextValue});return r?{areHitsSorted:void 0!==r.appliedRelevancyStrictness&&r.appliedRelevancyStrictness>0&&r.nbHits!==r.nbSortedHits,nbHits:r.nbHits,nbSortedHits:r.nbSortedHits,processingTimeMS:r.processingTimeMS}:null}}),s=n(51609),o=n.n(s),c=n(5556),u=n.n(c),h=n(32485),l=n.n(h),f=n(23013),d=(0,n(28970).p)("Stats"),p=function(e){var t=e.className,n=void 0===t?"":t,r=e.areHitsSorted,i=e.nbHits,a=e.nbSortedHits,s=e.processingTimeMS,c=e.translate;return o().createElement("div",{className:l()(d(""),n)},o().createElement("span",{className:d("text")},c("stats",i,s,a,r)))};p.propTypes={className:u().string,areHitsSorted:u().bool.isRequired,nbHits:u().number.isRequired,nbSortedHits:u().number,processingTimeMS:u().number.isRequired,translate:u().func.isRequired};var m=a((0,f.A)({stats:function(e,t,n,r){return r&&e!==n?"".concat(n.toLocaleString()," relevant results sorted out of ").concat(e.toLocaleString()," found in ").concat(t.toLocaleString(),"ms"):"".concat(e.toLocaleString()," results found in ").concat(t.toLocaleString(),"ms")}})(p),{$$widgetType:"ais.stats"})},38793:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});class r{constructor(e={}){this.server=e.server||{nodes:[{host:"localhost",port:"8108",path:"",protocol:"http"}]},this.server.cacheSearchResultsForSeconds=this.server.cacheSearchResultsForSeconds??120,this.additionalSearchParameters=e.additionalSearchParameters??{},this.additionalSearchParameters.query_by=this.additionalSearchParameters.queryBy??this.additionalSearchParameters.query_by??"",this.additionalSearchParameters.preset=this.additionalSearchParameters.preset??this.additionalSearchParameters.preset??"",this.additionalSearchParameters.sort_by=this.additionalSearchParameters.sortBy??this.additionalSearchParameters.sort_by??"",this.additionalSearchParameters.highlight_full_fields=this.additionalSearchParameters.highlightFullFields??this.additionalSearchParameters.highlight_full_fields??this.additionalSearchParameters.query_by,this.geoLocationField=e.geoLocationField??"_geoloc",this.facetableFieldsWithSpecialCharacters=e.facetableFieldsWithSpecialCharacters??[],this.collectionSpecificSearchParameters=e.collectionSpecificSearchParameters??{},Object.keys(this.collectionSpecificSearchParameters).forEach((e=>{const t=this.collectionSpecificSearchParameters[e];t.query_by=t.queryBy??t.query_by,t.preset=t.preset??t.preset,t.sort_by=t.sortBy??t.sort_by,t.highlight_full_fields=t.highlightFullFields??t.highlight_full_fields??this.additionalSearchParameters.highlight_full_fields??t.query_by,Object.keys(t).forEach((e=>void 0===t[e]?delete t[e]:{}))})),this.renderingContent=e.renderingContent,this.flattenGroupedHits=e.flattenGroupedHits??!0,this.facetByOptions=e.facetByOptions??{},this.filterByOptions=e.filterByOptions??{},this.collectionSpecificFacetByOptions=e.collectionSpecificFacetByOptions??{},this.collectionSpecificFilterByOptions=e.collectionSpecificFilterByOptions??{}}validate(){if((this.additionalSearchParameters.queryBy||Object.values(this.collectionSpecificSearchParameters).some((e=>e.queryBy)))&&console.warn("[typesense-instantsearch-adapter] Please use snake_cased versions of parameters in additionalSearchParameters instead of camelCased parameters. For example: Use query_by instead of queryBy. camelCased parameters will be deprecated in a future version. We're making this change so that parameter names are identical to the ones sent to Typesense (which are all snake_cased), and to also keep the types for these parameters in sync with the types defined in typesense-js."),0===this.additionalSearchParameters.query_by.length&&0===this.additionalSearchParameters.preset.length&&(0===Object.keys(this.collectionSpecificSearchParameters).length||Object.values(this.collectionSpecificSearchParameters).some((e=>0===(e.query_by||"").length&&0===(e.preset||"").length))))throw new Error("[typesense-instantsearch-adapter] Missing parameter: One of additionalSearchParameters.query_by or additionalSearchParameters.preset needs to be set, or all collectionSpecificSearchParameters need to have either .query_by or .preset set.")}}var i=n(38567);class a{static get INDEX_NAME_MATCHING_REGEX(){return new RegExp("^(.+?)(?=(/sort/(.*))|$)")}static get DEFAULT_FACET_FILTER_STRING_MATCHING_REGEX(){return new RegExp("(.*)((?!:).):(?!:)(.*)")}static get DEFAULT_NUMERIC_FILTER_STRING_MATCHING_REGEX(){return new RegExp("(.*?)(<=|>=|>|<|=)(.*)")}constructor(e,t,n){this.instantsearchRequests=e,this.typesenseClient=t,this.configuration=n,this.additionalSearchParameters=n.additionalSearchParameters,this.collectionSpecificSearchParameters=n.collectionSpecificSearchParameters}_shouldUseExactMatchForField(e,t){return!1!==this.configuration.collectionSpecificFilterByOptions?.[t]?.[e]?.exactMatch&&!1!==this.configuration.filterByOptions?.[e]?.exactMatch}_adaptFacetFilters(e,t){let n="";return e?(n=e.map((e=>{if(Array.isArray(e)){const n={};e.forEach((e=>{const{fieldName:t,fieldValue:r}=this._parseFacetFilter(e);n[t]=n[t]||[],n[t].push(r)})),Object.keys(n).length>1&&console.error(`[Typesense-Instantsearch-Adapter] Typesense does not support cross-field ORs at the moment. The adapter could not OR values between these fields: ${Object.keys(n).join(",")}`);const r=Object.keys(n)[0],i=n[r],[a,s]=i.reduce(((e,t)=>(t.startsWith("-")&&!this._isNumber(t)?e[0].push(t.substring(1)):e[1].push(t),e)),[[],[]]),o=[];if(s.length>0){const e=this._shouldUseExactMatchForField(r,t)?":=":":";o.push(`${r}${e}[${s.map((e=>this._escapeFacetValue(e))).join(",")}]`)}if(a.length>0){const e=this._shouldUseExactMatchForField(r,t)?":!=":":!";o.push(`${r}${e}[${a.map((e=>this._escapeFacetValue(e))).join(",")}]`)}return o.filter((e=>e)).join(" && ")}{const{fieldName:n,fieldValue:r}=this._parseFacetFilter(e);let i;return i=r.startsWith("-")&&!this._isNumber(r)?`${n}${this._shouldUseExactMatchForField(n,t)?":!=":":!"}[${this._escapeFacetValue(r.substring(1))}]`:`${n}${this._shouldUseExactMatchForField(n,t)?":=":":"}[${this._escapeFacetValue(r)}]`,i}})).join(" && "),n):n}_parseFacetFilter(e){let t,n,r,i;if(this.configuration.facetableFieldsWithSpecialCharacters?.length>0){const a=this.configuration.facetableFieldsWithSpecialCharacters.flat().map((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));if(t=new RegExp(`^(${a.join("|")}):(.*)$`),n=e.match(t),null!=n)return r=`${n[1]}`,i=`${n[2]}`,{fieldName:r,fieldValue:i}}return t=this.constructor.DEFAULT_FACET_FILTER_STRING_MATCHING_REGEX,n=e.match(t),null==n?console.error(`[Typesense-Instantsearch-Adapter] Parsing failed for a facet filter \`${e}\` with the Regex \`${t}\`. If you have field names with special characters, be sure to add them to a parameter called \`facetableFieldsWithSpecialCharacters\` when instantiating the adapter.`):(r=`${n[1]}${n[2]}`,i=`${n[3]}`),{fieldName:r,fieldValue:i}}_escapeFacetValue(e){return"boolean"==typeof e||"true"===e||"false"===e||this._isNumber(e)?e:`\`${e}\``}_isNumber(e){return Number.isInteger(e%1)||!!(e%1)}_adaptNumericFilters(e){let t="";if(!e)return t;const n={};e.forEach((e=>{const{fieldName:t,operator:r,fieldValue:i}=this._parseNumericFilter(e);n[t]=n[t]||{},n[t][r]=i}));const r=[];return Object.keys(n).forEach((e=>{null!=n[e]["<="]&&null!=n[e][">="]?r.push(`${e}:=[${n[e][">="]}..${n[e]["<="]}]`):null!=n[e]["<="]?r.push(`${e}:<=${n[e]["<="]}`):null!=n[e][">="]?r.push(`${e}:>=${n[e][">="]}`):null!=n[e]["="]?r.push(`${e}:=${n[e]["="]}`):console.warn(`[Typesense-Instantsearch-Adapter] Unsupported operator found ${JSON.stringify(n[e])}`)})),t=r.join(" && "),t}_parseNumericFilter(e){let t,n,r,i,a;if(this.configuration.facetableFieldsWithSpecialCharacters?.length>0){const s=this.configuration.facetableFieldsWithSpecialCharacters.map((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));if(t=new RegExp(`^(${s.join("|")})(<=|>=|>|<|=)(.*)$`),n=e.match(t),null!=n)return[,r,i,a]=n,{fieldName:r,operator:i,fieldValue:a}}return t=this.constructor.DEFAULT_NUMERIC_FILTER_STRING_MATCHING_REGEX,n=e.match(t),null==n?console.error(`[Typesense-Instantsearch-Adapter] Parsing failed for a numeric filter \`${e}\` with the Regex \`${t}\`. If you have field names with special characters, be sure to add them to a parameter called \`facetableFieldsWithSpecialCharacters\` when instantiating the adapter.`):[,r,i,a]=n,{fieldName:r,operator:i,fieldValue:a}}_adaptGeoFilter({insideBoundingBox:e,aroundRadius:t,aroundLatLng:n,insidePolygon:r}){if(e){let t,n,r,i;return Array.isArray(e)?[t,n,r,i]=e.flat():[t,n,r,i]=e.split(","),`${this.configuration.geoLocationField}:(${t}, ${n}, ${t}, ${i}, ${r}, ${i}, ${r}, ${n})`}if(n||t){if(!t||"all"===t)throw new Error("[Typesense-Instantsearch-Adapter] In Typesense, geo-filtering around a lat/lng also requires a numerical radius. So the `aroundRadius` parameter is required when `aroundLatLng` is used. If you intend to just geo-sort around a lat/long, you want to use the sortBy InstantSearch widget (or a virtual sortBy custom widget).");const e=parseFloat(t)/1e3+" km";return`${this.configuration.geoLocationField}:(${n}, ${e})`}if(r){let e=r;return Array.isArray(r)&&(e=r.flat().join(",")),`${this.configuration.geoLocationField}:(${e})`}}_adaptFilters(e,t){const n=[];return e.filters&&n.push(e.filters),n.push(this._adaptFacetFilters(e.facetFilters,t)),n.push(this._adaptNumericFilters(e.numericFilters)),n.push(this._adaptGeoFilter(e)),n.filter((e=>e&&""!==e)).join(" && ")}_adaptIndexName(e){return e.match(this.constructor.INDEX_NAME_MATCHING_REGEX)[1]}_adaptSortBy(e){return e.match(this.constructor.INDEX_NAME_MATCHING_REGEX)[3]}_adaptFacetBy(e,t){return[e].flat().map((e=>this.configuration.collectionSpecificFacetByOptions?.[t]?.[e]?`${e}${this.configuration.collectionSpecificFacetByOptions[t][e]}`:this.configuration.facetByOptions[e]?`${e}${this.configuration.facetByOptions[e]}`:e)).join(",")}_buildSearchParameters(e){const t=e.params,n=e.indexName,r=this._adaptIndexName(n),i={};for(const[e,t]of Object.entries(this.additionalSearchParameters))i[this._camelToSnakeCase(e)]=t;if(this.collectionSpecificSearchParameters[r])for(const[e,t]of Object.entries(this.collectionSpecificSearchParameters[r]))i[this._camelToSnakeCase(e)]=t;const a=Object.assign({},i),s=this._adaptSortBy(n);return Object.assign(a,{collection:r,q:""===t.query||void 0===t.query?"*":t.query,facet_by:i.facet_by||this._adaptFacetBy(t.facets,r),filter_by:this._adaptFilters(t,r)||i.filter_by,sort_by:s||i.sort_by,max_facet_values:t.maxValuesPerFacet,page:(t.page||0)+1}),t.hitsPerPage&&(a.per_page=t.hitsPerPage),t.facetQuery&&(a.facet_query=`${t.facetName}:${t.facetQuery}`,a.per_page=0),t.typesenseVectorQuery&&(a.vector_query=t.typesenseVectorQuery),Object.fromEntries(Object.entries(a).filter((([e,t])=>null!=t&&""!==t)))}_camelToSnakeCase(e){return e.split(/(?=[A-Z])/).join("_").toLowerCase()}async request(){const e=this.instantsearchRequests.map((e=>this._buildSearchParameters(e)));return this.typesenseClient.multiSearch.perform({searches:e})}}const s={_adaptHighlightTag(e,t,n){return e.replace(new RegExp("<mark>","g"),t||"<mark>").replace(new RegExp("</mark>","g"),n||"</mark>")},_adaptNumberOfPages(){const e=this.typesenseResponse.found/this.typesenseResponse.request_params.per_page;return Number.isFinite(e)?Math.ceil(e):1}};class o{constructor(e,t,n,r=[]){this.typesenseResponse=e,this.instantsearchRequest=t,this.configuration=n,this.allTypesenseResponses=r}_adaptGroupedHits(e){let t=[];return t=e.map((e=>{const t=this._adaptHits(e.hits);return t.forEach((t=>{t.group_key=t._group_key=e.group_key,e.found&&(t._group_found=e.found)})),t})),t=this.configuration.flattenGroupedHits?t.flat():t.map((e=>({...e[0],_grouped_hits:e}))),t}_adaptHits(e){let t=[];return t=e.map((e=>{const t={...e.document};t.objectID=e.document.id,t._snippetResult=this._adaptHighlightResult(e,"snippet"),t._highlightResult=this._adaptHighlightResult(e,"value"),t._rawTypesenseHit=e,["text_match","geo_distance_meters","curated","text_match_info","hybrid_search_info","vector_distance"].forEach((n=>{Object.keys(e).includes(n)&&!Object.keys(t).includes(n)&&(t[n]=e[n])}));const n=t[this.configuration.geoLocationField];return n&&(t._geoloc={lat:n[0],lng:n[1]}),t})),t}_adaptHighlightResult(e,t){const n={};return null!=e.highlight&&this.isHighlightPost0240RCN32Format(e.highlight)?this.adaptHighlightObject(e,n,t):this.adaptHighlightsArray(e,n,t),n}isHighlightPost0240RCN32Format(e){return null==e.full&&null==e.snippet}adaptHighlightsArray(e,t,n){Object.assign(t,...Object.entries(e.document).map((([e,t])=>({[e]:{value:t,matchLevel:"none",matchedWords:[]}})))),e.highlights.forEach((e=>{t[e.field]={value:e[n]||e[`${n}s`],matchLevel:"full",matchedWords:e.matched_tokens},e.indices&&(t[e.field].matchedIndices=e.indices)})),Object.entries(t).forEach((([r,i])=>{const a=r,{value:s,matchLevel:o,matchedWords:c,matchedIndices:u}=i;null==s?t[a]=this._adaptHighlightNullValue():Array.isArray(s)?(t[a]=[],e.document[a].forEach(((e,r)=>{u&&u.includes(r)?t[a].push({value:this._adaptHighlightTag(`${s[u.indexOf(r)]}`,this.instantsearchRequest.params.highlightPreTag,this.instantsearchRequest.params.highlightPostTag),matchLevel:o,matchedWords:c[r]}):"object"==typeof e?t[a].push(this._adaptHighlightInObjectValue(e,{},n)):t[a].push({value:`${e}`,matchLevel:"none",matchedWords:[]})}))):"object"==typeof s?t[a]=this._adaptHighlightInObjectValue(s,{},n):t[a].value=this._adaptHighlightTag(`${s}`,this.instantsearchRequest.params.highlightPreTag,this.instantsearchRequest.params.highlightPostTag)}))}adaptHighlightObject(e,t,n){Object.assign(t,this._adaptHighlightInObjectValue(e.document,e.highlight,n))}_adaptHighlightInObjectValue(e,t,n){return Object.assign({},...Object.entries(e).map((([e,r])=>{let i;return i=null==r?this._adaptHighlightNullValue():Array.isArray(r)?this._adaptHighlightInArrayValue(r,t?.[e]??[],n):"object"==typeof r?this._adaptHighlightInObjectValue(r,t?.[e]??{},n):this._adaptHighlightInPrimitiveValue(r,t?.[e],n),{[e]:i}})))}_adaptHighlightInArrayValue(e,t,n){return e.map(((e,r)=>{let i;return i=null==e?this._adaptHighlightNullValue():Array.isArray(e)?this._adaptHighlightInArrayValue(e,t?.[r]??[],n):"object"==typeof e?this._adaptHighlightInObjectValue(e,t?.[r]??{},n):this._adaptHighlightInPrimitiveValue(e,t?.[r],n),i}))}_adaptHighlightInPrimitiveValue(e,t,n){return null!=t?{value:this._adaptHighlightTag(`${t[n]??t.highlight??t.snippet}`,this.instantsearchRequest.params.highlightPreTag,this.instantsearchRequest.params.highlightPostTag),matchLevel:(t.matched_tokens||[]).length>0?"full":"none",matchedWords:t.matched_tokens||[]}:{value:this._adaptHighlightTag(`${e}`,this.instantsearchRequest.params.highlightPreTag,this.instantsearchRequest.params.highlightPostTag),matchLevel:"none",matchedWords:[]}}_adaptHighlightNullValue(){return{value:"",matchLevel:"none",matchedWords:[]}}_adaptFacets(e){const t={};return e.forEach((e=>{Object.assign(t,{[e.field_name]:Object.assign({},...e.counts.map((e=>({[e.value]:e.count}))))})})),t}_adaptFacetStats(e){const t={};return e.forEach((e=>{Object.keys(e.stats).length>0&&Object.assign(t,{[e.field_name]:e.stats})})),t}_adaptRenderingContent(e){const t=Object.assign({},this.configuration.renderingContent);return null==t.facetOrdering?.facets?.order&&(t.facetOrdering=t.facetOrdering||{},t.facetOrdering.facets=t.facetOrdering.facets||{},t.facetOrdering.facets.order=[...new Set(e.map((e=>e.field_name)).concat(this.allTypesenseResponses.map((e=>e.facet_counts||[])).flat().map((e=>e.field_name)).filter((e=>e))))]),t}adapt(){const e=this._adaptRenderingContent(this.typesenseResponse.facet_counts||[]);return{hits:this.typesenseResponse.grouped_hits?this._adaptGroupedHits(this.typesenseResponse.grouped_hits):this._adaptHits(this.typesenseResponse.hits),nbHits:this.typesenseResponse.found,page:this.typesenseResponse.page-1,nbPages:this._adaptNumberOfPages(),hitsPerPage:this.typesenseResponse.request_params.per_page,facets:this._adaptFacets(this.typesenseResponse.facet_counts||[]),facets_stats:this._adaptFacetStats(this.typesenseResponse.facet_counts||{}),query:this.typesenseResponse.request_params.q,processingTimeMS:this.typesenseResponse.search_time_ms,...Object.keys(e).length>0?{renderingContent:e}:null}}}Object.assign(o.prototype,s);class c{constructor(e,t){this.typesenseResponse=e,this.instantsearchRequest=t}_adaptFacetHits(e){let t={};return t=e.find((e=>e.field_name===this.instantsearchRequest.params.facetName)).counts.map((e=>({value:e.value,highlighted:this._adaptHighlightTag(e.highlighted,this.instantsearchRequest.params.highlightPreTag,this.instantsearchRequest.params.highlightPostTag),count:e.count}))),t}adapt(){return{facetHits:this._adaptFacetHits(this.typesenseResponse.facet_counts),exhaustiveFacetsCount:!0,processingTimeMS:this.typesenseResponse.search_time_ms}}}Object.assign(c.prototype,s);class u{constructor(e){this.updateConfiguration(e),this.searchClient={clearCache:()=>this.clearCache(),search:e=>this.searchTypesenseAndAdapt(e),searchForFacetValues:e=>this.searchTypesenseForFacetValuesAndAdapt(e)}}async searchTypesenseAndAdapt(e){let t;try{return t=await this._adaptAndPerformTypesenseRequest(e),{results:t.results.map(((n,r)=>(this._validateTypesenseResult(n),new o(n,e[r],this.configuration,t.results).adapt())))}}catch(e){throw console.error(e),e}}async searchTypesenseForFacetValuesAndAdapt(e){let t;try{return t=await this._adaptAndPerformTypesenseRequest(e),t.results.map(((t,n)=>(this._validateTypesenseResult(t),new c(t,e[n],this.configuration).adapt())))}catch(e){throw console.error(e),e}}async _adaptAndPerformTypesenseRequest(e){const t=new a(e,this.typesenseClient,this.configuration);return await t.request()}clearCache(){return this.typesenseClient=new i.SearchClient(this.configuration.server),this.searchClient}updateConfiguration(e){return this.configuration=new r(e),this.configuration.validate(),this.typesenseClient=new i.SearchClient(this.configuration.server),!0}_validateTypesenseResult(e){if(e.error)throw new Error(`${e.code} - ${e.error}`);if(!e.hits&&!e.grouped_hits)throw new Error(`Did not find any hits. ${e.code} - ${e.error}`)}}}}]);