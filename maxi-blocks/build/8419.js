"use strict";(self.webpackChunkmaxi_blocks=self.webpackChunkmaxi_blocks||[]).push([[8419],{72925:function(e,t,s){var o=s(51609),n=s(27723),a=s(86087),l=s(66087),i=s(26287),c=s(35113);const r=(0,i.Ay)((()=>s.e(9556).then(s.bind(s,59556)))),d=(0,i.Ay)((()=>Promise.resolve().then(s.bind(s,68145))));t.A=({results:e,content:t,modifyOption:s,formatValue:i,selectedResultId:m,customValue:u,AISettingsLanguage:f,isSelectedText:b,setResults:p,setSelectedResultId:h,setSelectedResult:y,setModifyOption:x,setCustomValue:_,onContentChange:C,onChangeTextFormat:T,onModifyContent:g,updateSettings:S,switchToGenerateTab:E,switchToModifyTab:k,isModifyTab:I=!1})=>{const[N,M]=(0,a.useState)(c.zi);(0,a.useEffect)((()=>{const t=m&&e.findIndex((e=>e.id===m));t>=N&&M(t+1)}),[N,e,m]);const R="maxi-prompt-control-results";return!(0,l.isEmpty)(e)||m&&("selectedText"!==m||I)?(0,o.createElement)("div",{className:R},e.slice(0,N).map(((n,a)=>{const c=n.refId&&e.findIndex((e=>e.id===n.refId));return(0,o.createElement)(r,{key:n.id,index:a+1,result:n,isSelectedText:b,isSelected:n.id===m,modifyOption:s,customValue:u,AISettingsLanguage:f,isRefExist:c&&c>=0,isModifyTab:I,setModifyOption:x,setCustomValue:_,onModifyContent:g,onInsert:()=>{const{start:e,end:s}=i,o=t.slice(0,e),a=t.slice(s),l=o+n.content+a;e!==s&&T(Object.assign({},i,{end:e+n.content.length})),C(l)},onSelect:(e=n.id)=>h(e),onUseSettings:()=>{if(n.refId)return k(),x(n.modificationType),_(n.customValue),c>=N&&M(c+1),void h(n.refId);n.settings&&(S(n.settings),E())},onModify:()=>{h(n.id),k()},onDelete:()=>{if(I)return y(null),void(n.id===m&&h(null));p((e=>{const t=[].concat(e).filter((e=>e.id!==n.id));return(0,l.isEmpty)(t)&&E(),t})),m===n.id&&h(null)}})})),e.length>N&&(0,o.createElement)("div",{className:`${R}__load-more`},(0,o.createElement)(d,{className:"maxi-prompt-control-modify-tab__button",onClick:()=>M(N+c.zi)},(0,n.__)("Load more","maxi-blocks")))):(0,o.createElement)("div",{className:R},(0,o.createElement)("h4",{className:`${R}__no-results`},(0,n.__)(I?"Select text or result from history to modify":"History is empty","maxi-blocks")))}},78419:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var o=s(51609),n=s(27723),a=s(55590),l=s(94715),i=s(68145),c=s(71882),r=s(30181),d=s(32485),m=s.n(d),u=s(66087),f=({className:e,buttonClassName:t,results:s,setResults:a,setSelectedResultId:d,switchToGenerateTab:f})=>{const b=m()("maxi-prompt-control-history-buttons",e),p=m()("maxi-prompt-control-history-buttons__button",t);return(0,o.createElement)("div",{className:b},(0,o.createElement)(l.MediaUploadCheck,null,(0,o.createElement)(l.MediaUpload,{onSelect:e=>{fetch(e.url).then((e=>e.json())).then((e=>JSON.parse(e))).then((e=>{a(e),d(e[0].id)})).catch((e=>{console.error(e)}))},allowedTypes:"text",render:({open:e})=>(0,o.createElement)(i.default,{className:p,onClick:e},(0,n.__)("Import","maxi-blocks"))})),(0,o.createElement)(i.default,{className:p,onClick:()=>{(0,r.MT)(s,"history.txt")}},(0,n.__)("Export","maxi-blocks")),!(0,u.isEmpty)(s)&&(0,o.createElement)(c.default,{message:(0,n.__)("Are you sure you want to clean the history?","maxi-blocks"),cancelLabel:(0,n.__)("Cancel","maxi-blocks"),confirmLabel:(0,n.__)("Clean","maxi-blocks"),onConfirm:()=>{a([]),f()},buttonClassName:p,buttonChildren:(0,n.__)("Clean","maxi-blocks")}))},b=s(72925),p=({results:e,content:t,modifyOption:s,formatValue:l,selectedResultId:i,isSelectedText:c,isGenerating:r,setResults:d,setModifyOption:m,setCustomValue:u,setSelectedResultId:p,onContentChange:h,onChangeTextFormat:y,onAbort:x,updateSettings:_,switchToGenerateTab:C,switchToModifyTab:T})=>{const g="maxi-prompt-control-history-tab";return(0,o.createElement)("div",{className:g},(0,o.createElement)(f,{className:"maxi-prompt-control__buttons",buttonClassName:"maxi-prompt-control__button",results:e,setResults:d,setSelectedResultId:p,switchToGenerateTab:C}),(0,o.createElement)(b.A,{results:e,content:t,modifyOption:s,formatValue:l,selectedResultId:i,isSelectedText:c,setResults:d,setSelectedResultId:p,setModifyOption:m,setCustomValue:u,onContentChange:h,onChangeTextFormat:y,updateSettings:_,switchToGenerateTab:C,switchToModifyTab:T}),r&&(0,o.createElement)(a.$n,{className:`${g}__abort`,onClick:x},(0,n.__)("Stop","maxi-blocks")))}}}]);