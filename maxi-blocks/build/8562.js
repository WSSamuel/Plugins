"use strict";(self.webpackChunkmaxi_blocks=self.webpackChunkmaxi_blocks||[]).push([[8562,2289,4602,7569],{77569:function(e,t,n){n.r(t);var o=n(51609),r=n(27723),a=n(29491),s=n(47143),i=n(86087),l=n(66087),c=n(32485),u=n.n(c),m=n(26287),p=n(82724),d=n(46416),h=n(70417),b=n(97397);const f=(0,m.Ay)((()=>Promise.resolve().then(n.bind(n,2114)))),k=(0,m.Ay)((()=>Promise.resolve().then(n.bind(n,68145)))),_=(0,m.Ay)((()=>Promise.resolve().then(n.bind(n,98279)))),v=e=>{const{clientId:t,onChange:n,breakpoint:c,repeaterStatus:m,repeaterRowClientId:g,getInnerBlocksPositions:E,toolbar:w=!1}=e,[C,N]=(0,i.useState)((0,l.isNil)(e["row-pattern-general"])?1:(0,p.pw)(e["row-pattern-general"])),[y,A]=(0,i.useState)([]),x=(0,a.useInstanceId)(v);(0,i.useEffect)((()=>{const e=m&&t===g;A(w?(0,p.yv)(e):(0,p.yv)(e,c,C))}),[c,C]),(0,i.useEffect)((()=>{e["row-pattern-general"]&&N((0,p.pw)(e["row-pattern-general"]))}),[c,e["row-pattern-general"]]);const I=()=>{const e=[],{getBlock:n}=(0,s.select)("core/block-editor");return n(t).innerBlocks.forEach((t=>{e.push((0,d.qw)({target:"column-size",breakpoint:c,attributes:t.attributes}))})),e},P=e=>{const t=[],n=(e=>{const t=[];let n=0,o=0,r=1;return e.forEach((e=>{n+=e,o+=1,t.push({rowNumber:r}),Math.round(100*n+Number.EPSILON)/100==1&&(t.forEach((e=>{e.columnsNumber||(e.columnsNumber=o)})),r+=1,n=0,o=0)})),t})(e);return e.forEach(((o,r)=>{n[r].columnsNumber>1&&t.push(100*e[r]),1===n[r].columnsNumber&&t.push(100)})),t},S=u()("components-column-pattern__template-button",w&&"components-column-pattern__template-button--toolbar");return(0,o.createElement)("div",{className:"components-column-pattern"},!w&&"general"===c&&(0,o.createElement)(f,{label:(0,r.__)("Number of columns","maxi-blocks"),value:C,defaultValue:C,onChangeValue:e=>N(e),min:1,maxRange:8,disableReset:!0}),(0,o.createElement)("div",{className:"components-column-pattern__templates"},y.map((r=>r.isMoreThanEightColumns&&"general"!==c?null:(0,o.createElement)(k,{key:(0,l.uniqueId)(`components-column-pattern--${x}--`),className:S+(r.isMoreThanEightColumns?" components-column-pattern-apply_settings":""),"aria-pressed":(0,l.isEqual)(I(),(r.isMoreThanEightColumns?Array(C).fill(100/C):P(r.sizes)).map((e=>(0,l.floor)(e,2)))),onClick:()=>{(0,p.Is)(r.name,t,c,C,m);const o=(0,d.ul)({target:"row-pattern",props:e,breakpoint:c}),a=r.isMoreThanEightColumns?C.toString():r.name;if(m){var i,l;const e=E();if((null!==(i=(0,p.W9)(o)?.sizes.length)&&void 0!==i?i:Number(o))<(null!==(l=(0,p.W9)(a)?.sizes.length)&&void 0!==l?l:Number(a))&&t===g)(0,h.Jw)(g,e);else if(t!==g){e[(0,b.hV)(t,e)].forEach((e=>{e!==t&&(0,p.Is)(a,e,c,C,m,m)}));const{__unstableMarkNextChangeAsNotPersistent:n}=(0,s.dispatch)("core/block-editor");n()}}n({[(0,d.Ku)("row-pattern",!1,null,c)]:a})}},r.isMoreThanEightColumns?"Apply Setting":(0,o.createElement)(_,{className:"components-column-pattern__icon",icon:r.icon}))))))};t.default=v},82289:function(e,t,n){n.r(t);var o=n(51609),r=n(27723),a=n(47143),s=n(55590),i=n(97397),l=n(82724),c=n(17757),u=n(66087);t.default=({clientId:e,maxiSetAttributes:t,deviceType:n,repeaterStatus:m,repeaterRowClientId:p,getInnerBlocksPositions:d})=>{const{selectBlock:h}=(0,a.useDispatch)("core/block-editor");return(0,o.createElement)(o.Fragment,null,(0,o.createElement)("div",{className:"maxi-row-block__title"},(0,o.createElement)("span",null,(0,r.__)("Column picker","maxi-blocks"))),(0,o.createElement)("div",{className:"maxi-row-block__template",onClick:()=>h(e),key:`maxi-row-block--${e}`},(0,l.yv)(m).map((r=>(0,o.createElement)(s.$n,{key:(0,u.uniqueId)(`maxi-row-block--${e}--`),className:"maxi-row-block__template__button",onClick:()=>{if(t({"row-pattern-general":r.name,"row-pattern-m":r.responsiveLayout}),(0,c.A)(r.name,e,n),m&&e!==p){const t=d();t[(0,i.hV)(e,t)].forEach((t=>{t!==e&&(0,c.A)(r.name,t,n)}))}}},(0,o.createElement)(s.In,{className:"maxi-row-block__template__icon",icon:r.icon,avoidSize:!0}))))))}},78562:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var o=n(51609),r=n(27723),a=n(94602),s=n(77569),i=(n(82289),n(46416)),l=n(2521),c=e=>{const{clientId:t,blockName:n,onChange:c,breakpoint:u,repeaterStatus:m,repeaterRowClientId:p,getInnerBlocksPositions:d}=e;return"maxi-blocks/row-maxi"===n&&e["row-pattern-general"]?(0,o.createElement)(a.default,{className:"toolbar-item__column-pattern",icon:l.qKD,tooltip:(0,r.__)("Column picker","maxi-blocks")},(0,o.createElement)("div",{className:"toolbar-item__column-pattern__popover"},(0,o.createElement)(s.default,Object.assign({clientId:t},(0,i.XW)(e,"rowPattern"),{onChange:e=>{c(e)},breakpoint:u,repeaterStatus:m,repeaterRowClientId:p,getInnerBlocksPositions:d,toolbar:!0})))):null}},94602:function(e,t,n){n.r(t);var o=n(23029),r=n(92901),a=n(56822),s=n(53954),i=n(85501),l=n(64467),c=n(51609),u=n(27723),m=n(86087),p=n(56427),d=n(47143),h=n(32485),b=n.n(h),f=n(66087),k=n(26287),_=n(20436),v=n(2521),g=n(8062);function E(e,t,n){return t=(0,s.A)(t),(0,a.A)(e,w()?Reflect.construct(t,n||[],(0,s.A)(e).constructor):t.apply(e,n))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}const C=(0,k.Ay)((()=>Promise.resolve().then(n.bind(n,68145)))),N=(0,k.Ay)((()=>Promise.resolve().then(n.bind(n,98279)))),y=(0,k.Ay)((()=>Promise.resolve().then(n.bind(n,57076))));let A=function(e){function t(...e){var n;return(0,o.A)(this,t),n=E(this,t,[].concat(e)),(0,l.A)(n,"state",{isOpen:!1,onClose:()=>{n.setState({isOpen:!1})}}),n.ref=(0,m.createRef)(),n}return(0,i.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"onClickOutside",value:function(e){const t=e.path||e.composedPath&&e.composedPath();this.mounted&&(this.ref.current?.ownerDocument.querySelectorAll(".toolbar-item__popover").length>=2||t&&!t.includes(this.ref.current?.ownerDocument.querySelector(".toolbar-item__popover"))&&!t.includes(this.ref.current))&&this.state.onClose()}},{key:"onToggle",value:function(){const{isOpen:e}=this.state,{defaultView:t}=this.ref.current.ownerDocument;e?t.removeEventListener("click",this.onClickOutside.bind(this),!1):t.addEventListener("click",this.onClickOutside.bind(this),!1),this.setState({isOpen:!e})}},{key:"render",value:function(){const{text:e,className:t,tooltip:n,icon:o,children:r,advancedOptions:a=!1,tab:s=0,position:i="top center",disabled:l=!1}=this.props,{isOpen:m,onClose:h}=this.state,k=b()("toolbar-item","toolbar-item__button",t),{receiveMaxiSettings:E}=(0,d.select)("maxiBlocks"),{hide_tooltips:w}=E(),A=!(0,f.isEmpty)(w)&&w,x=()=>(0,c.createElement)(C,{className:k,onClick:()=>this.onToggle(),"aria-expanded":m,action:"popup",disabled:l},(0,c.createElement)(N,{className:"toolbar-item__icon",icon:o}),(0,u.__)(e,"maxi-blocks"));return(0,c.createElement)("div",{ref:this.ref},(0,c.createElement)(g.A.Provider,{value:this.state},!A&&(0,c.createElement)(p.Tooltip,{text:n,placement:"top"},x()),A&&x(),m&&r&&(0,c.createElement)(y,{anchor:this.ref?.current?.closest(".toolbar-wrapper"),className:"toolbar-item__popover",onClose:h,position:i,useAnimationFrame:!0,useFlip:!0,useShift:!0,shiftPadding:!!a&&{right:20},shiftLimit:{mainAxis:!1},isAlternate:!0,noArrow:!0},(0,c.createElement)("div",null,r),!!a&&(0,c.createElement)(C,{className:"toolbar-item__popover__advanced-button",icon:v.P2$,onClick:()=>{(0,_.z4)(s,a)}}))))}}])}(m.Component);t.default=A},8062:function(e,t,n){const o=(0,n(86087).createContext)();t.A=o}}]);