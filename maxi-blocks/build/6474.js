"use strict";(self.webpackChunkmaxi_blocks=self.webpackChunkmaxi_blocks||[]).push([[6474],{72925:function(e,t,s){var n=s(51609),i=s(27723),o=s(86087),a=s(66087),l=s(26287),r=s(35113);const c=(0,l.Ay)((()=>s.e(9556).then(s.bind(s,59556)))),d=(0,l.Ay)((()=>Promise.resolve().then(s.bind(s,68145))));t.A=({results:e,content:t,modifyOption:s,formatValue:l,selectedResultId:u,customValue:m,AISettingsLanguage:f,isSelectedText:g,setResults:p,setSelectedResultId:y,setSelectedResult:h,setModifyOption:x,setCustomValue:T,onContentChange:S,onChangeTextFormat:b,onModifyContent:I,updateSettings:R,switchToGenerateTab:$,switchToModifyTab:C,isModifyTab:E=!1})=>{const[v,M]=(0,o.useState)(r.zi);(0,o.useEffect)((()=>{const t=u&&e.findIndex((e=>e.id===u));t>=v&&M(t+1)}),[v,e,u]);const O="maxi-prompt-control-results";return!(0,a.isEmpty)(e)||u&&("selectedText"!==u||E)?(0,n.createElement)("div",{className:O},e.slice(0,v).map(((i,o)=>{const r=i.refId&&e.findIndex((e=>e.id===i.refId));return(0,n.createElement)(c,{key:i.id,index:o+1,result:i,isSelectedText:g,isSelected:i.id===u,modifyOption:s,customValue:m,AISettingsLanguage:f,isRefExist:r&&r>=0,isModifyTab:E,setModifyOption:x,setCustomValue:T,onModifyContent:I,onInsert:()=>{const{start:e,end:s}=l,n=t.slice(0,e),o=t.slice(s),a=n+i.content+o;e!==s&&b(Object.assign({},l,{end:e+i.content.length})),S(a)},onSelect:(e=i.id)=>y(e),onUseSettings:()=>{if(i.refId)return C(),x(i.modificationType),T(i.customValue),r>=v&&M(r+1),void y(i.refId);i.settings&&(R(i.settings),$())},onModify:()=>{y(i.id),C()},onDelete:()=>{if(E)return h(null),void(i.id===u&&y(null));p((e=>{const t=[].concat(e).filter((e=>e.id!==i.id));return(0,a.isEmpty)(t)&&$(),t})),u===i.id&&y(null)}})})),e.length>v&&(0,n.createElement)("div",{className:`${O}__load-more`},(0,n.createElement)(d,{className:"maxi-prompt-control-modify-tab__button",onClick:()=>M(v+r.zi)},(0,i.__)("Load more","maxi-blocks")))):(0,n.createElement)("div",{className:O},(0,n.createElement)("h4",{className:`${O}__no-results`},(0,i.__)(E?"Select text or result from history to modify":"History is empty","maxi-blocks")))}},96474:function(e,t,s){s.r(t);var n=s(51609),i=s(86087),o=s(72925),a=s(65500),l=s(35113);t.default=({clientId:e,results:t,AISettings:s,settings:r,contextOption:c,selectedText:d,modifyOption:u,customValue:m,abortControllerRef:f,setModifyOption:g,setCustomValue:p,setIsGenerating:y,selectedResultId:h,setSelectedResultId:x,setResults:T,switchToResultsTab:S})=>{const[b,I]=(0,i.useState)(null);(0,i.useEffect)((()=>{if("selectedText"!==h){const e=t.find((e=>e.id===h));I(e)}}),[h,t]);const R=async n=>{const{modificationType:i,customValue:o,refFromSelectedText:u=!1}=n,{prompt:m,temperature:f,contentType:g,tone:p,writingStyle:y,language:x}=r||{},T="custom"===i?`, using the user-provided instruction: ${o}`:"",S="translate"===i?` to ${o} language`:"",b=u?"":`${m?`- Original Prompt: ${m}`:""}\n${(0,a.Wu)(g,p,y,x)}\n- Temperature: ${f}`,I=`${(0,a.SZ)(s)}\n${(0,a.zV)((0,a.SD)(c,e))}\n${b}`,R=`Please ${i}${S} the following text${T}.${(()=>{switch(i){case"rephrase":return" Reword the entire text to offer a fresh perspective.";case"shorten":return" Drastically condense the text to make it much more succinct.";case"lengthen":return" Enhance the text by adding relevant details. Aim for a 10-20% increase from the original length.";default:return""}})()} Ensure the ${l.wm[i]} content maintains the original intent and context, aligns with the provided site details, and is polished and ready for the website.\n\nOriginal text: ${"selectedText"===h?d:t.find((e=>e.id===h)).content}`;return(0,a.xy)(I,R)};return(0,n.createElement)("div",{className:"maxi-prompt-control-modify-tab"},(0,n.createElement)(o.A,{results:[d&&{id:"selectedText",content:d,isSelectedText:!0},b].filter(Boolean),modifyOption:u,selectedResultId:h,customValue:m,AISettingsLanguage:s.language,setSelectedResultId:x,setSelectedResult:I,setModifyOption:g,setCustomValue:p,onModifyContent:async()=>{S();const e="selectedText"===h&&d;(0,a.YU)({openAIApiKey:s.openaiApiKey,modelName:s.model,additionalParams:{topP:1},additionalData:Object.assign({},!e&&{refId:h,settings:r},{modificationType:u,refFromSelectedText:e},["custom","translate"].includes(u)&&{customValue:m}),results:t,abortControllerRef:f,getMessages:R,setResults:T,setSelectedResultId:x,setIsGenerating:y})},isModifyTab:!0}))}}}]);