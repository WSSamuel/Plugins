"use strict";(self.webpackChunkmaxi_blocks=self.webpackChunkmaxi_blocks||[]).push([[1703,4602],{81703:function(e,t,o){o.r(t);var n=o(51609),r=o(27723),i=o(94602),a=o(53400),c=o(81882),l=o(27261),s=o(66087),u=o(3247),d=o(2521);const m=["maxi-blocks/container-maxi","maxi-blocks/row-maxi","maxi-blocks/column-maxi","maxi-blocks/group-maxi","maxi-blocks/slide-maxi","maxi-blocks/slider-maxi"];t.default=e=>{const{blockName:t,onChangeInline:o,onChange:p,breakpoint:b,"background-layers":h=[]}=e;if(!m.includes(t))return null;const k=h&&h.filter((e=>"color"===e.type)),f=k?k[k.length-1]:null,_=!(0,s.isEmpty)(f);return(0,n.createElement)(i.default,{className:"toolbar-item__background",advancedOptions:"background layer",tooltip:_?(0,r.__)("Background colour","maxi-blocks"):(0,r.__)("Background colour disabled","maxi-blocks"),icon:d.oRP},(0,n.createElement)("div",{className:"toolbar-item__background__popover"},(0,n.createElement)(l.default,{label:(0,r.__)("Enable background colour","maxi-blocks"),selected:_,onChange:e=>{if(e)p({"background-layers":[].concat(h,[Object.assign({},(0,u.Ik)({layer:c.colorOptions,breakpoint:"general"}),{order:h&&!(0,s.isEmpty)(h)?h.reduce(((e,t)=>e.order>t.order?e:t)).order+1:1})])});else{const e=h.filter((e=>e.order!==f.order));p({"background-layers":e})}}}),_&&(0,n.createElement)(a.A,{disableClipPath:!0,key:`background-color-layer--${f.order}`,colorOptions:f,onChangeInline:e=>o(e,`.maxi-background-displayer__${f.order}`),onChange:e=>{const t=Object.assign({},f,e),o=(0,s.cloneDeep)(h);h.forEach(((e,n)=>{if(e.order===t.order){const e=(0,s.findIndex)(o,{order:t.order});o[e]=t}})),(0,s.isEqual)(o,h)||p({"background-layers":o},`.maxi-background-displayer__${f.order}`)},breakpoint:b,isToolbar:!0,disableResponsiveTabs:!0})))}},94602:function(e,t,o){o.r(t);var n=o(23029),r=o(92901),i=o(56822),a=o(53954),c=o(85501),l=o(64467),s=o(51609),u=o(27723),d=o(86087),m=o(56427),p=o(47143),b=o(32485),h=o.n(b),k=o(66087),f=o(26287),_=o(20436),g=o(2521),v=o(8062);function x(e,t,o){return t=(0,a.A)(t),(0,i.A)(e,y()?Reflect.construct(t,o||[],(0,a.A)(e).constructor):t.apply(e,o))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}const E=(0,f.Ay)((()=>Promise.resolve().then(o.bind(o,68145)))),C=(0,f.Ay)((()=>Promise.resolve().then(o.bind(o,98279)))),A=(0,f.Ay)((()=>Promise.resolve().then(o.bind(o,57076))));let O=function(e){function t(...e){var o;return(0,n.A)(this,t),o=x(this,t,[].concat(e)),(0,l.A)(o,"state",{isOpen:!1,onClose:()=>{o.setState({isOpen:!1})}}),o.ref=(0,d.createRef)(),o}return(0,c.A)(t,e),(0,r.A)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"onClickOutside",value:function(e){const t=e.path||e.composedPath&&e.composedPath();this.mounted&&(this.ref.current?.ownerDocument.querySelectorAll(".toolbar-item__popover").length>=2||t&&!t.includes(this.ref.current?.ownerDocument.querySelector(".toolbar-item__popover"))&&!t.includes(this.ref.current))&&this.state.onClose()}},{key:"onToggle",value:function(){const{isOpen:e}=this.state,{defaultView:t}=this.ref.current.ownerDocument;e?t.removeEventListener("click",this.onClickOutside.bind(this),!1):t.addEventListener("click",this.onClickOutside.bind(this),!1),this.setState({isOpen:!e})}},{key:"render",value:function(){const{text:e,className:t,tooltip:o,icon:n,children:r,advancedOptions:i=!1,tab:a=0,position:c="top center",disabled:l=!1}=this.props,{isOpen:d,onClose:b}=this.state,f=h()("toolbar-item","toolbar-item__button",t),{receiveMaxiSettings:x}=(0,p.select)("maxiBlocks"),{hide_tooltips:y}=x(),O=!(0,k.isEmpty)(y)&&y,P=()=>(0,s.createElement)(E,{className:f,onClick:()=>this.onToggle(),"aria-expanded":d,action:"popup",disabled:l},(0,s.createElement)(C,{className:"toolbar-item__icon",icon:n}),(0,u.__)(e,"maxi-blocks"));return(0,s.createElement)("div",{ref:this.ref},(0,s.createElement)(v.A.Provider,{value:this.state},!O&&(0,s.createElement)(m.Tooltip,{text:o,placement:"top"},P()),O&&P(),d&&r&&(0,s.createElement)(A,{anchor:this.ref?.current?.closest(".toolbar-wrapper"),className:"toolbar-item__popover",onClose:b,position:c,useAnimationFrame:!0,useFlip:!0,useShift:!0,shiftPadding:!!i&&{right:20},shiftLimit:{mainAxis:!1},isAlternate:!0,noArrow:!0},(0,s.createElement)("div",null,r),!!i&&(0,s.createElement)(E,{className:"toolbar-item__popover__advanced-button",icon:g.P2$,onClick:()=>{(0,_.z4)(a,i)}}))))}}])}(d.Component);t.default=O},8062:function(e,t,o){const n=(0,o(86087).createContext)();t.A=n}}]);