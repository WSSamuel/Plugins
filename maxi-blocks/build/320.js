"use strict";(self.webpackChunkmaxi_blocks=self.webpackChunkmaxi_blocks||[]).push([[320,4602],{70320:function(e,t,o){o.r(t);var n=o(51609),i=o(27723),s=o(47143),l=o(86087),c=o(74997),r=o(68145),a=o(94602),u=o(86329),m=o(96721),p=o(66087),_=o(2521);t.default=e=>{const{blockName:t,isList:o,typeOfList:d,onChange:f,content:b,clientId:h}=e;if("maxi-blocks/text-maxi"!==t)return null;const{formatValue:k}=(0,l.useContext)(u.hE),v=e=>{let t="";"indent"===e&&(t=(0,m.rL)(k,{type:d})),"outdent"===e&&(t=(0,m.qx)(k));const o=(0,m.Ky)({value:t,multilineTag:"li"});f({isList:!0,typeOfList:d,content:o})},C=e=>{if(o&&e===d)return;const t={isList:!0,typeOfList:e,content:b};if(o)f(t);else{const e=b.split("\n").map((e=>(0,c.createBlock)("maxi-blocks/list-item-maxi",{content:e}))),{replaceInnerBlocks:o,__unstableMarkNextChangeAsNotPersistent:n}=(0,s.dispatch)("core/block-editor");n(),o(h,e),f(t)}};return(0,n.createElement)(a.default,{className:"toolbar-item__list-options",tooltip:(0,i.__)("List styles","maxi-blocks"),icon:_.GUs},(0,n.createElement)("div",{className:"toolbar-item__popover__list-options"},(0,n.createElement)(r.default,{className:"toolbar-item__popover__list-options__button",onClick:()=>(()=>{if(!o)return;const{getBlock:e}=(0,s.select)("core/block-editor"),t=e(h).innerBlocks.reduce(((e,t)=>e?`${e}\n${t.attributes.content}`:t.attributes.content),"");f({isList:!1,content:t});const{replaceInnerBlocks:n,__unstableMarkNextChangeAsNotPersistent:i}=(0,s.dispatch)("core/block-editor");i(),n(h,[])})(),"aria-pressed":!o},(0,i.__)("P","maxi-blocks")),(0,n.createElement)(r.default,{className:"toolbar-item__popover__list-options__button",icon:_.k3R,onClick:()=>C("ol"),"aria-pressed":o&&"ol"===d}),(0,n.createElement)(r.default,{className:"toolbar-item__popover__list-options__button",icon:_.GUs,onClick:()=>C("ul"),"aria-pressed":o&&"ul"===d}),o&&!(0,p.isEmpty)(k)&&k.formats&&(0,n.createElement)(n.Fragment,null,(0,m.OZ)(k)&&(0,n.createElement)(r.default,{className:"toolbar-item__popover__list-options__button",icon:_.DfU,onClick:()=>v("outdent")}),(0,m.nl)(k)&&(0,n.createElement)(r.default,{className:"toolbar-item__popover__list-options__button",icon:_.mtU,onClick:()=>v("indent")}))))}},94602:function(e,t,o){o.r(t);var n=o(23029),i=o(92901),s=o(56822),l=o(53954),c=o(85501),r=o(64467),a=o(51609),u=o(27723),m=o(86087),p=o(56427),_=o(47143),d=o(32485),f=o.n(d),b=o(66087),h=o(26287),k=o(20436),v=o(2521),C=o(8062);function x(e,t,o){return t=(0,l.A)(t),(0,s.A)(e,y()?Reflect.construct(t,o||[],(0,l.A)(e).constructor):t.apply(e,o))}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(y=function(){return!!e})()}const E=(0,h.Ay)((()=>Promise.resolve().then(o.bind(o,68145)))),A=(0,h.Ay)((()=>Promise.resolve().then(o.bind(o,98279)))),N=(0,h.Ay)((()=>Promise.resolve().then(o.bind(o,57076))));let g=function(e){function t(...e){var o;return(0,n.A)(this,t),o=x(this,t,[].concat(e)),(0,r.A)(o,"state",{isOpen:!1,onClose:()=>{o.setState({isOpen:!1})}}),o.ref=(0,m.createRef)(),o}return(0,c.A)(t,e),(0,i.A)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"onClickOutside",value:function(e){const t=e.path||e.composedPath&&e.composedPath();this.mounted&&(this.ref.current?.ownerDocument.querySelectorAll(".toolbar-item__popover").length>=2||t&&!t.includes(this.ref.current?.ownerDocument.querySelector(".toolbar-item__popover"))&&!t.includes(this.ref.current))&&this.state.onClose()}},{key:"onToggle",value:function(){const{isOpen:e}=this.state,{defaultView:t}=this.ref.current.ownerDocument;e?t.removeEventListener("click",this.onClickOutside.bind(this),!1):t.addEventListener("click",this.onClickOutside.bind(this),!1),this.setState({isOpen:!e})}},{key:"render",value:function(){const{text:e,className:t,tooltip:o,icon:n,children:i,advancedOptions:s=!1,tab:l=0,position:c="top center",disabled:r=!1}=this.props,{isOpen:m,onClose:d}=this.state,h=f()("toolbar-item","toolbar-item__button",t),{receiveMaxiSettings:x}=(0,_.select)("maxiBlocks"),{hide_tooltips:y}=x(),g=!(0,b.isEmpty)(y)&&y,O=()=>(0,a.createElement)(E,{className:h,onClick:()=>this.onToggle(),"aria-expanded":m,action:"popup",disabled:r},(0,a.createElement)(A,{className:"toolbar-item__icon",icon:n}),(0,u.__)(e,"maxi-blocks"));return(0,a.createElement)("div",{ref:this.ref},(0,a.createElement)(C.A.Provider,{value:this.state},!g&&(0,a.createElement)(p.Tooltip,{text:o,placement:"top"},O()),g&&O(),m&&i&&(0,a.createElement)(N,{anchor:this.ref?.current?.closest(".toolbar-wrapper"),className:"toolbar-item__popover",onClose:d,position:c,useAnimationFrame:!0,useFlip:!0,useShift:!0,shiftPadding:!!s&&{right:20},shiftLimit:{mainAxis:!1},isAlternate:!0,noArrow:!0},(0,a.createElement)("div",null,i),!!s&&(0,a.createElement)(E,{className:"toolbar-item__popover__advanced-button",icon:v.P2$,onClick:()=>{(0,k.z4)(l,s)}}))))}}])}(m.Component);t.default=g},8062:function(e,t,o){const n=(0,o(86087).createContext)();t.A=n}}]);